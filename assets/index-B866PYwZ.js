var DD=Object.defineProperty;var xS=n=>{throw TypeError(n)};var MD=(n,t,e)=>t in n?DD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var L=(n,t,e)=>MD(n,typeof t!="symbol"?t+"":t,e),rv=(n,t,e)=>t.has(n)||xS("Cannot "+e);var a=(n,t,e)=>(rv(n,t,"read from private field"),e?e.call(n):t.get(n)),S=(n,t,e)=>t.has(n)?xS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),v=(n,t,e,i)=>(rv(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),C=(n,t,e)=>(rv(n,t,"access private method"),e);var we=(n,t,e,i)=>({set _(s){v(n,t,s,e)},get _(){return a(n,t,i)}});function ND(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function LD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gE={exports:{}},by={},yE={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=Symbol.for("react.element"),RD=Symbol.for("react.portal"),ID=Symbol.for("react.fragment"),jD=Symbol.for("react.strict_mode"),FD=Symbol.for("react.profiler"),OD=Symbol.for("react.provider"),BD=Symbol.for("react.context"),zD=Symbol.for("react.forward_ref"),VD=Symbol.for("react.suspense"),UD=Symbol.for("react.memo"),HD=Symbol.for("react.lazy"),bS=Symbol.iterator;function $D(n){return n===null||typeof n!="object"?null:(n=bS&&n[bS]||n["@@iterator"],typeof n=="function"?n:null)}var vE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xE=Object.assign,bE={};function Qd(n,t,e){this.props=n,this.context=t,this.refs=bE,this.updater=e||vE}Qd.prototype.isReactComponent={};Qd.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Qd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wE(){}wE.prototype=Qd.prototype;function Bw(n,t,e){this.props=n,this.context=t,this.refs=bE,this.updater=e||vE}var zw=Bw.prototype=new wE;zw.constructor=Bw;xE(zw,Qd.prototype);zw.isPureReactComponent=!0;var wS=Array.isArray,SE=Object.prototype.hasOwnProperty,Vw={current:null},AE={key:!0,ref:!0,__self:!0,__source:!0};function CE(n,t,e){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)SE.call(t,i)&&!AE.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(l===1)s.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:Cm,type:n,key:r,ref:o,props:s,_owner:Vw.current}}function WD(n,t){return{$$typeof:Cm,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function Uw(n){return typeof n=="object"&&n!==null&&n.$$typeof===Cm}function GD(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var SS=/\/+/g;function ov(n,t){return typeof n=="object"&&n!==null&&n.key!=null?GD(""+n.key):t.toString(36)}function mg(n,t,e,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Cm:case RD:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+ov(o,0):i,wS(s)?(e="",n!=null&&(e=n.replace(SS,"$&/")+"/"),mg(s,t,e,"",function(u){return u})):s!=null&&(Uw(s)&&(s=WD(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(SS,"$&/")+"/")+n)),t.push(s)),1;if(o=0,i=i===""?".":i+":",wS(n))for(var l=0;l<n.length;l++){r=n[l];var c=i+ov(r,l);o+=mg(r,t,e,c,s)}else if(c=$D(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=i+ov(r,l++),o+=mg(r,t,e,c,s);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bm(n,t,e){if(n==null)return n;var i=[],s=0;return mg(n,i,"","",function(r){return t.call(e,r,s++)}),i}function qD(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var An={current:null},gg={transition:null},XD={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:gg,ReactCurrentOwner:Vw};function EE(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:Bm,forEach:function(n,t,e){Bm(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Bm(n,function(){t++}),t},toArray:function(n){return Bm(n,function(t){return t})||[]},only:function(n){if(!Uw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ut.Component=Qd;ut.Fragment=ID;ut.Profiler=FD;ut.PureComponent=Bw;ut.StrictMode=jD;ut.Suspense=VD;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XD;ut.act=EE;ut.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=xE({},n.props),s=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=Vw.current),t.key!==void 0&&(s=""+t.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in t)SE.call(t,c)&&!AE.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Cm,type:n.type,key:s,ref:r,props:i,_owner:o}};ut.createContext=function(n){return n={$$typeof:BD,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:OD,_context:n},n.Consumer=n};ut.createElement=CE;ut.createFactory=function(n){var t=CE.bind(null,n);return t.type=n,t};ut.createRef=function(){return{current:null}};ut.forwardRef=function(n){return{$$typeof:zD,render:n}};ut.isValidElement=Uw;ut.lazy=function(n){return{$$typeof:HD,_payload:{_status:-1,_result:n},_init:qD}};ut.memo=function(n,t){return{$$typeof:UD,type:n,compare:t===void 0?null:t}};ut.startTransition=function(n){var t=gg.transition;gg.transition={};try{n()}finally{gg.transition=t}};ut.unstable_act=EE;ut.useCallback=function(n,t){return An.current.useCallback(n,t)};ut.useContext=function(n){return An.current.useContext(n)};ut.useDebugValue=function(){};ut.useDeferredValue=function(n){return An.current.useDeferredValue(n)};ut.useEffect=function(n,t){return An.current.useEffect(n,t)};ut.useId=function(){return An.current.useId()};ut.useImperativeHandle=function(n,t,e){return An.current.useImperativeHandle(n,t,e)};ut.useInsertionEffect=function(n,t){return An.current.useInsertionEffect(n,t)};ut.useLayoutEffect=function(n,t){return An.current.useLayoutEffect(n,t)};ut.useMemo=function(n,t){return An.current.useMemo(n,t)};ut.useReducer=function(n,t,e){return An.current.useReducer(n,t,e)};ut.useRef=function(n){return An.current.useRef(n)};ut.useState=function(n){return An.current.useState(n)};ut.useSyncExternalStore=function(n,t,e){return An.current.useSyncExternalStore(n,t,e)};ut.useTransition=function(){return An.current.useTransition()};ut.version="18.3.1";yE.exports=ut;var N=yE.exports;const wy=LD(N),YD=ND({__proto__:null,default:wy},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD=N,KD=Symbol.for("react.element"),JD=Symbol.for("react.fragment"),ZD=Object.prototype.hasOwnProperty,tM=QD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eM={key:!0,ref:!0,__self:!0,__source:!0};function TE(n,t,e){var i,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)ZD.call(t,i)&&!eM.hasOwnProperty(i)&&(s[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:KD,type:n,key:r,ref:o,props:s,_owner:tM.current}}by.Fragment=JD;by.jsx=TE;by.jsxs=TE;gE.exports=by;var m=gE.exports,ex={},kE={exports:{}},xi={},PE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(j,q){var Q=j.length;j.push(q);t:for(;0<Q;){var K=Q-1>>>1,Z=j[K];if(0<s(Z,q))j[K]=q,j[Q]=Z,Q=K;else break t}}function e(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var q=j[0],Q=j.pop();if(Q!==q){j[0]=Q;t:for(var K=0,Z=j.length,ft=Z>>>1;K<ft;){var ie=2*(K+1)-1,wt=j[ie],St=ie+1,At=j[St];if(0>s(wt,Q))St<Z&&0>s(At,wt)?(j[K]=At,j[St]=Q,K=St):(j[K]=wt,j[ie]=Q,K=ie);else if(St<Z&&0>s(At,Q))j[K]=At,j[St]=Q,K=St;else break t}}return q}function s(j,q){var Q=j.sortIndex-q.sortIndex;return Q!==0?Q:j.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,x=!1,y=!1,A=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var q=e(u);q!==null;){if(q.callback===null)i(u);else if(q.startTime<=j)i(u),q.sortIndex=q.expirationTime,t(c,q);else break;q=e(u)}}function E(j){if(y=!1,b(j),!x)if(e(c)!==null)x=!0,O(T);else{var q=e(u);q!==null&&z(E,q.startTime-j)}}function T(j,q){x=!1,y&&(y=!1,g(_),_=-1),p=!0;var Q=f;try{for(b(q),h=e(c);h!==null&&(!(h.expirationTime>q)||j&&!R());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var Z=K(h.expirationTime<=q);q=n.unstable_now(),typeof Z=="function"?h.callback=Z:h===e(c)&&i(c),b(q)}else i(c);h=e(c)}if(h!==null)var ft=!0;else{var ie=e(u);ie!==null&&z(E,ie.startTime-q),ft=!1}return ft}finally{h=null,f=Q,p=!1}}var P=!1,k=null,_=-1,D=5,M=-1;function R(){return!(n.unstable_now()-M<D)}function V(){if(k!==null){var j=n.unstable_now();M=j;var q=!0;try{q=k(!0,j)}finally{q?G():(P=!1,k=null)}}else P=!1}var G;if(typeof w=="function")G=function(){w(V)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=V,G=function(){F.postMessage(null)}}else G=function(){A(V,0)};function O(j){k=j,P||(P=!0,G())}function z(j,q){_=A(function(){j(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){x||p||(x=!0,O(T))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(j){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var Q=f;f=q;try{return j()}finally{f=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=f;f=j;try{return q()}finally{f=Q}},n.unstable_scheduleCallback=function(j,q,Q){var K=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?K+Q:K):Q=K,j){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Q+Z,j={id:d++,callback:q,priorityLevel:j,startTime:Q,expirationTime:Z,sortIndex:-1},Q>K?(j.sortIndex=Q,t(u,j),e(c)===null&&j===e(u)&&(y?(g(_),_=-1):y=!0,z(E,Q-K))):(j.sortIndex=Z,t(c,j),x||p||(x=!0,O(T))),j},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(j){var q=f;return function(){var Q=f;f=q;try{return j.apply(this,arguments)}finally{f=Q}}}})(_E);PE.exports=_E;var nM=PE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM=N,yi=nM;function B(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DE=new Set,ef={};function wc(n,t){Bd(n,t),Bd(n+"Capture",t)}function Bd(n,t){for(ef[n]=t,n=0;n<t.length;n++)DE.add(t[n])}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nx=Object.prototype.hasOwnProperty,sM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AS={},CS={};function rM(n){return nx.call(CS,n)?!0:nx.call(AS,n)?!1:sM.test(n)?CS[n]=!0:(AS[n]=!0,!1)}function oM(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function aM(n,t,e,i){if(t===null||typeof t>"u"||oM(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cn(n,t,e,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ke[n]=new Cn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];Ke[t]=new Cn(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ke[n]=new Cn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ke[n]=new Cn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ke[n]=new Cn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ke[n]=new Cn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ke[n]=new Cn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ke[n]=new Cn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ke[n]=new Cn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Hw=/[\-:]([a-z])/g;function $w(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(Hw,$w);Ke[t]=new Cn(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(Hw,$w);Ke[t]=new Cn(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(Hw,$w);Ke[t]=new Cn(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ke[n]=new Cn(n,1,!1,n.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ke[n]=new Cn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Ww(n,t,e,i){var s=Ke.hasOwnProperty(t)?Ke[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(aM(t,e,s,i)&&(e=null),i||s===null?rM(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):s.mustUseProperty?n[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,i=s.attributeNamespace,e===null?n.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var ao=iM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zm=Symbol.for("react.element"),Oc=Symbol.for("react.portal"),Bc=Symbol.for("react.fragment"),Gw=Symbol.for("react.strict_mode"),ix=Symbol.for("react.profiler"),ME=Symbol.for("react.provider"),NE=Symbol.for("react.context"),qw=Symbol.for("react.forward_ref"),sx=Symbol.for("react.suspense"),rx=Symbol.for("react.suspense_list"),Xw=Symbol.for("react.memo"),ho=Symbol.for("react.lazy"),LE=Symbol.for("react.offscreen"),ES=Symbol.iterator;function eh(n){return n===null||typeof n!="object"?null:(n=ES&&n[ES]||n["@@iterator"],typeof n=="function"?n:null)}var ne=Object.assign,av;function gh(n){if(av===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);av=t&&t[1]||""}return`
`+av+n}var lv=!1;function cv(n,t){if(!n||lv)return"";lv=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{lv=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?gh(n):""}function lM(n){switch(n.tag){case 5:return gh(n.type);case 16:return gh("Lazy");case 13:return gh("Suspense");case 19:return gh("SuspenseList");case 0:case 2:case 15:return n=cv(n.type,!1),n;case 11:return n=cv(n.type.render,!1),n;case 1:return n=cv(n.type,!0),n;default:return""}}function ox(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Bc:return"Fragment";case Oc:return"Portal";case ix:return"Profiler";case Gw:return"StrictMode";case sx:return"Suspense";case rx:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case NE:return(n.displayName||"Context")+".Consumer";case ME:return(n._context.displayName||"Context")+".Provider";case qw:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Xw:return t=n.displayName||null,t!==null?t:ox(n.type)||"Memo";case ho:t=n._payload,n=n._init;try{return ox(n(t))}catch{}}return null}function cM(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ox(t);case 8:return t===Gw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ca(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function RE(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uM(n){var t=RE(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Vm(n){n._valueTracker||(n._valueTracker=uM(n))}function IE(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=RE(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function u0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ax(n,t){var e=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function TS(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=Ca(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jE(n,t){t=t.checked,t!=null&&Ww(n,"checked",t,!1)}function lx(n,t){jE(n,t);var e=Ca(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?cx(n,t.type,e):t.hasOwnProperty("defaultValue")&&cx(n,t.type,Ca(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function kS(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function cx(n,t,e){(t!=="number"||u0(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var yh=Array.isArray;function ou(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Ca(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function ux(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function PS(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(B(92));if(yh(e)){if(1<e.length)throw Error(B(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:Ca(e)}}function FE(n,t){var e=Ca(t.value),i=Ca(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function _S(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function OE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dx(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?OE(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Um,BE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,s){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,s)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Um=Um||document.createElement("div"),Um.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Um.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function nf(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var Uh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dM=["Webkit","ms","Moz","O"];Object.keys(Uh).forEach(function(n){dM.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),Uh[t]=Uh[n]})});function zE(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Uh.hasOwnProperty(n)&&Uh[n]?(""+t).trim():t+"px"}function VE(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,s=zE(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,s):n[e]=s}}var hM=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hx(n,t){if(t){if(hM[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function fx(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var px=null;function Yw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mx=null,au=null,lu=null;function DS(n){if(n=km(n)){if(typeof mx!="function")throw Error(B(280));var t=n.stateNode;t&&(t=Ty(t),mx(n.stateNode,n.type,t))}}function UE(n){au?lu?lu.push(n):lu=[n]:au=n}function HE(){if(au){var n=au,t=lu;if(lu=au=null,DS(n),t)for(n=0;n<t.length;n++)DS(t[n])}}function $E(n,t){return n(t)}function WE(){}var uv=!1;function GE(n,t,e){if(uv)return n(t,e);uv=!0;try{return $E(n,t,e)}finally{uv=!1,(au!==null||lu!==null)&&(WE(),HE())}}function sf(n,t){var e=n.stateNode;if(e===null)return null;var i=Ty(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(B(231,t,typeof e));return e}var gx=!1;if(Zr)try{var nh={};Object.defineProperty(nh,"passive",{get:function(){gx=!0}}),window.addEventListener("test",nh,nh),window.removeEventListener("test",nh,nh)}catch{gx=!1}function fM(n,t,e,i,s,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(d){this.onError(d)}}var Hh=!1,d0=null,h0=!1,yx=null,pM={onError:function(n){Hh=!0,d0=n}};function mM(n,t,e,i,s,r,o,l,c){Hh=!1,d0=null,fM.apply(pM,arguments)}function gM(n,t,e,i,s,r,o,l,c){if(mM.apply(this,arguments),Hh){if(Hh){var u=d0;Hh=!1,d0=null}else throw Error(B(198));h0||(h0=!0,yx=u)}}function Sc(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function qE(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function MS(n){if(Sc(n)!==n)throw Error(B(188))}function yM(n){var t=n.alternate;if(!t){if(t=Sc(n),t===null)throw Error(B(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return MS(s),n;if(r===i)return MS(s),t;r=r.sibling}throw Error(B(188))}if(e.return!==i.return)e=s,i=r;else{for(var o=!1,l=s.child;l;){if(l===e){o=!0,e=s,i=r;break}if(l===i){o=!0,i=s,e=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===e){o=!0,e=r,i=s;break}if(l===i){o=!0,i=r,e=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(e.alternate!==i)throw Error(B(190))}if(e.tag!==3)throw Error(B(188));return e.stateNode.current===e?n:t}function XE(n){return n=yM(n),n!==null?YE(n):null}function YE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=YE(n);if(t!==null)return t;n=n.sibling}return null}var QE=yi.unstable_scheduleCallback,NS=yi.unstable_cancelCallback,vM=yi.unstable_shouldYield,xM=yi.unstable_requestPaint,fe=yi.unstable_now,bM=yi.unstable_getCurrentPriorityLevel,Qw=yi.unstable_ImmediatePriority,KE=yi.unstable_UserBlockingPriority,f0=yi.unstable_NormalPriority,wM=yi.unstable_LowPriority,JE=yi.unstable_IdlePriority,Sy=null,Xs=null;function SM(n){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(Sy,n,void 0,(n.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:EM,AM=Math.log,CM=Math.LN2;function EM(n){return n>>>=0,n===0?32:31-(AM(n)/CM|0)|0}var Hm=64,$m=4194304;function vh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function p0(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var l=o&~s;l!==0?i=vh(l):(r&=o,r!==0&&(i=vh(r)))}else o=e&~s,o!==0?i=vh(o):r!==0&&(i=vh(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-ps(t),s=1<<e,i|=n[e],t&=~s;return i}function TM(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kM(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-ps(r),l=1<<o,c=s[o];c===-1?(!(l&e)||l&i)&&(s[o]=TM(l,t)):c<=t&&(n.expiredLanes|=l),r&=~l}}function vx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ZE(){var n=Hm;return Hm<<=1,!(Hm&4194240)&&(Hm=64),n}function dv(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function Em(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-ps(t),n[t]=e}function PM(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var s=31-ps(e),r=1<<s;t[s]=0,i[s]=-1,n[s]=-1,e&=~r}}function Kw(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-ps(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}var Pt=0;function tT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var eT,Jw,nT,iT,sT,xx=!1,Wm=[],ma=null,ga=null,ya=null,rf=new Map,of=new Map,mo=[],_M="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LS(n,t){switch(n){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":rf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":of.delete(t.pointerId)}}function ih(n,t,e,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=km(t),t!==null&&Jw(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function DM(n,t,e,i,s){switch(t){case"focusin":return ma=ih(ma,n,t,e,i,s),!0;case"dragenter":return ga=ih(ga,n,t,e,i,s),!0;case"mouseover":return ya=ih(ya,n,t,e,i,s),!0;case"pointerover":var r=s.pointerId;return rf.set(r,ih(rf.get(r)||null,n,t,e,i,s)),!0;case"gotpointercapture":return r=s.pointerId,of.set(r,ih(of.get(r)||null,n,t,e,i,s)),!0}return!1}function rT(n){var t=qa(n.target);if(t!==null){var e=Sc(t);if(e!==null){if(t=e.tag,t===13){if(t=qE(e),t!==null){n.blockedOn=t,sT(n.priority,function(){nT(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yg(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=bx(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);px=i,e.target.dispatchEvent(i),px=null}else return t=km(e),t!==null&&Jw(t),n.blockedOn=e,!1;t.shift()}return!0}function RS(n,t,e){yg(n)&&e.delete(t)}function MM(){xx=!1,ma!==null&&yg(ma)&&(ma=null),ga!==null&&yg(ga)&&(ga=null),ya!==null&&yg(ya)&&(ya=null),rf.forEach(RS),of.forEach(RS)}function sh(n,t){n.blockedOn===t&&(n.blockedOn=null,xx||(xx=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,MM)))}function af(n){function t(s){return sh(s,n)}if(0<Wm.length){sh(Wm[0],n);for(var e=1;e<Wm.length;e++){var i=Wm[e];i.blockedOn===n&&(i.blockedOn=null)}}for(ma!==null&&sh(ma,n),ga!==null&&sh(ga,n),ya!==null&&sh(ya,n),rf.forEach(t),of.forEach(t),e=0;e<mo.length;e++)i=mo[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<mo.length&&(e=mo[0],e.blockedOn===null);)rT(e),e.blockedOn===null&&mo.shift()}var cu=ao.ReactCurrentBatchConfig,m0=!0;function NM(n,t,e,i){var s=Pt,r=cu.transition;cu.transition=null;try{Pt=1,Zw(n,t,e,i)}finally{Pt=s,cu.transition=r}}function LM(n,t,e,i){var s=Pt,r=cu.transition;cu.transition=null;try{Pt=4,Zw(n,t,e,i)}finally{Pt=s,cu.transition=r}}function Zw(n,t,e,i){if(m0){var s=bx(n,t,e,i);if(s===null)wv(n,t,i,g0,e),LS(n,i);else if(DM(s,n,t,e,i))i.stopPropagation();else if(LS(n,i),t&4&&-1<_M.indexOf(n)){for(;s!==null;){var r=km(s);if(r!==null&&eT(r),r=bx(n,t,e,i),r===null&&wv(n,t,i,g0,e),r===s)break;s=r}s!==null&&i.stopPropagation()}else wv(n,t,i,null,e)}}var g0=null;function bx(n,t,e,i){if(g0=null,n=Yw(i),n=qa(n),n!==null)if(t=Sc(n),t===null)n=null;else if(e=t.tag,e===13){if(n=qE(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return g0=n,null}function oT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bM()){case Qw:return 1;case KE:return 4;case f0:case wM:return 16;case JE:return 536870912;default:return 16}default:return 16}}var ha=null,t1=null,vg=null;function aT(){if(vg)return vg;var n,t=t1,e=t.length,i,s="value"in ha?ha.value:ha.textContent,r=s.length;for(n=0;n<e&&t[n]===s[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===s[r-i];i++);return vg=s.slice(n,1<i?1-i:void 0)}function xg(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Gm(){return!0}function IS(){return!1}function bi(n){function t(e,i,s,r,o){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(e=n[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Gm:IS,this.isPropagationStopped=IS,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Gm)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Gm)},persist:function(){},isPersistent:Gm}),t}var Kd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e1=bi(Kd),Tm=ne({},Kd,{view:0,detail:0}),RM=bi(Tm),hv,fv,rh,Ay=ne({},Tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rh&&(rh&&n.type==="mousemove"?(hv=n.screenX-rh.screenX,fv=n.screenY-rh.screenY):fv=hv=0,rh=n),hv)},movementY:function(n){return"movementY"in n?n.movementY:fv}}),jS=bi(Ay),IM=ne({},Ay,{dataTransfer:0}),jM=bi(IM),FM=ne({},Tm,{relatedTarget:0}),pv=bi(FM),OM=ne({},Kd,{animationName:0,elapsedTime:0,pseudoElement:0}),BM=bi(OM),zM=ne({},Kd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),VM=bi(zM),UM=ne({},Kd,{data:0}),FS=bi(UM),HM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GM(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=WM[n])?!!t[n]:!1}function n1(){return GM}var qM=ne({},Tm,{key:function(n){if(n.key){var t=HM[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=xg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$M[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n1,charCode:function(n){return n.type==="keypress"?xg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),XM=bi(qM),YM=ne({},Ay,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OS=bi(YM),QM=ne({},Tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n1}),KM=bi(QM),JM=ne({},Kd,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZM=bi(JM),tN=ne({},Ay,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),eN=bi(tN),nN=[9,13,27,32],i1=Zr&&"CompositionEvent"in window,$h=null;Zr&&"documentMode"in document&&($h=document.documentMode);var iN=Zr&&"TextEvent"in window&&!$h,lT=Zr&&(!i1||$h&&8<$h&&11>=$h),BS=" ",zS=!1;function cT(n,t){switch(n){case"keyup":return nN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zc=!1;function sN(n,t){switch(n){case"compositionend":return uT(t);case"keypress":return t.which!==32?null:(zS=!0,BS);case"textInput":return n=t.data,n===BS&&zS?null:n;default:return null}}function rN(n,t){if(zc)return n==="compositionend"||!i1&&cT(n,t)?(n=aT(),vg=t1=ha=null,zc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lT&&t.locale!=="ko"?null:t.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VS(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!oN[n.type]:t==="textarea"}function dT(n,t,e,i){UE(i),t=y0(t,"onChange"),0<t.length&&(e=new e1("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var Wh=null,lf=null;function aN(n){ST(n,0)}function Cy(n){var t=Hc(n);if(IE(t))return n}function lN(n,t){if(n==="change")return t}var hT=!1;if(Zr){var mv;if(Zr){var gv="oninput"in document;if(!gv){var US=document.createElement("div");US.setAttribute("oninput","return;"),gv=typeof US.oninput=="function"}mv=gv}else mv=!1;hT=mv&&(!document.documentMode||9<document.documentMode)}function HS(){Wh&&(Wh.detachEvent("onpropertychange",fT),lf=Wh=null)}function fT(n){if(n.propertyName==="value"&&Cy(lf)){var t=[];dT(t,lf,n,Yw(n)),GE(aN,t)}}function cN(n,t,e){n==="focusin"?(HS(),Wh=t,lf=e,Wh.attachEvent("onpropertychange",fT)):n==="focusout"&&HS()}function uN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cy(lf)}function dN(n,t){if(n==="click")return Cy(t)}function hN(n,t){if(n==="input"||n==="change")return Cy(t)}function fN(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var gs=typeof Object.is=="function"?Object.is:fN;function cf(n,t){if(gs(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!nx.call(t,s)||!gs(n[s],t[s]))return!1}return!0}function $S(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function WS(n,t){var e=$S(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=$S(e)}}function pT(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?pT(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function mT(){for(var n=window,t=u0();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=u0(n.document)}return t}function s1(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function pN(n){var t=mT(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&pT(e.ownerDocument.documentElement,e)){if(i!==null&&s1(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=WS(e,r);var o=WS(e,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var mN=Zr&&"documentMode"in document&&11>=document.documentMode,Vc=null,wx=null,Gh=null,Sx=!1;function GS(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Sx||Vc==null||Vc!==u0(i)||(i=Vc,"selectionStart"in i&&s1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Gh&&cf(Gh,i)||(Gh=i,i=y0(wx,"onSelect"),0<i.length&&(t=new e1("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Vc)))}function qm(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Uc={animationend:qm("Animation","AnimationEnd"),animationiteration:qm("Animation","AnimationIteration"),animationstart:qm("Animation","AnimationStart"),transitionend:qm("Transition","TransitionEnd")},yv={},gT={};Zr&&(gT=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function Ey(n){if(yv[n])return yv[n];if(!Uc[n])return n;var t=Uc[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in gT)return yv[n]=t[e];return n}var yT=Ey("animationend"),vT=Ey("animationiteration"),xT=Ey("animationstart"),bT=Ey("transitionend"),wT=new Map,qS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(n,t){wT.set(n,t),wc(t,[n])}for(var vv=0;vv<qS.length;vv++){var xv=qS[vv],gN=xv.toLowerCase(),yN=xv[0].toUpperCase()+xv.slice(1);Ma(gN,"on"+yN)}Ma(yT,"onAnimationEnd");Ma(vT,"onAnimationIteration");Ma(xT,"onAnimationStart");Ma("dblclick","onDoubleClick");Ma("focusin","onFocus");Ma("focusout","onBlur");Ma(bT,"onTransitionEnd");Bd("onMouseEnter",["mouseout","mouseover"]);Bd("onMouseLeave",["mouseout","mouseover"]);Bd("onPointerEnter",["pointerout","pointerover"]);Bd("onPointerLeave",["pointerout","pointerover"]);wc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wc("onBeforeInput",["compositionend","keypress","textInput","paste"]);wc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vN=new Set("cancel close invalid load scroll toggle".split(" ").concat(xh));function XS(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,gM(i,t,void 0,n),n.currentTarget=null}function ST(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break t;XS(s,l,u),r=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break t;XS(s,l,u),r=c}}}if(h0)throw n=yx,h0=!1,yx=null,n}function Vt(n,t){var e=t[kx];e===void 0&&(e=t[kx]=new Set);var i=n+"__bubble";e.has(i)||(AT(t,n,2,!1),e.add(i))}function bv(n,t,e){var i=0;t&&(i|=4),AT(e,n,i,t)}var Xm="_reactListening"+Math.random().toString(36).slice(2);function uf(n){if(!n[Xm]){n[Xm]=!0,DE.forEach(function(e){e!=="selectionchange"&&(vN.has(e)||bv(e,!1,n),bv(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Xm]||(t[Xm]=!0,bv("selectionchange",!1,t))}}function AT(n,t,e,i){switch(oT(t)){case 1:var s=NM;break;case 4:s=LM;break;default:s=Zw}e=s.bind(null,t,e,n),s=void 0,!gx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function wv(n,t,e,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=qa(l),o===null)return;if(c=o.tag,c===5||c===6){i=r=o;continue t}l=l.parentNode}}i=i.return}GE(function(){var u=r,d=Yw(e),h=[];t:{var f=wT.get(n);if(f!==void 0){var p=e1,x=n;switch(n){case"keypress":if(xg(e)===0)break t;case"keydown":case"keyup":p=XM;break;case"focusin":x="focus",p=pv;break;case"focusout":x="blur",p=pv;break;case"beforeblur":case"afterblur":p=pv;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=jS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=KM;break;case yT:case vT:case xT:p=BM;break;case bT:p=ZM;break;case"scroll":p=RM;break;case"wheel":p=eN;break;case"copy":case"cut":case"paste":p=VM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=OS}var y=(t&4)!==0,A=!y&&n==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var w=u,b;w!==null;){b=w;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,g!==null&&(E=sf(w,g),E!=null&&y.push(df(w,E,b)))),A)break;w=w.return}0<y.length&&(f=new p(f,x,null,e,d),h.push({event:f,listeners:y}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&e!==px&&(x=e.relatedTarget||e.fromElement)&&(qa(x)||x[to]))break t;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(x=e.relatedTarget||e.toElement,p=u,x=x?qa(x):null,x!==null&&(A=Sc(x),x!==A||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(y=jS,E="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(y=OS,E="onPointerLeave",g="onPointerEnter",w="pointer"),A=p==null?f:Hc(p),b=x==null?f:Hc(x),f=new y(E,w+"leave",p,e,d),f.target=A,f.relatedTarget=b,E=null,qa(d)===u&&(y=new y(g,w+"enter",x,e,d),y.target=b,y.relatedTarget=A,E=y),A=E,p&&x)e:{for(y=p,g=x,w=0,b=y;b;b=Pc(b))w++;for(b=0,E=g;E;E=Pc(E))b++;for(;0<w-b;)y=Pc(y),w--;for(;0<b-w;)g=Pc(g),b--;for(;w--;){if(y===g||g!==null&&y===g.alternate)break e;y=Pc(y),g=Pc(g)}y=null}else y=null;p!==null&&YS(h,f,p,y,!1),x!==null&&A!==null&&YS(h,A,x,y,!0)}}t:{if(f=u?Hc(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=lN;else if(VS(f))if(hT)T=hN;else{T=uN;var P=cN}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=dN);if(T&&(T=T(n,u))){dT(h,T,e,d);break t}P&&P(n,f,u),n==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&cx(f,"number",f.value)}switch(P=u?Hc(u):window,n){case"focusin":(VS(P)||P.contentEditable==="true")&&(Vc=P,wx=u,Gh=null);break;case"focusout":Gh=wx=Vc=null;break;case"mousedown":Sx=!0;break;case"contextmenu":case"mouseup":case"dragend":Sx=!1,GS(h,e,d);break;case"selectionchange":if(mN)break;case"keydown":case"keyup":GS(h,e,d)}var k;if(i1)t:{switch(n){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else zc?cT(n,e)&&(_="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(_="onCompositionStart");_&&(lT&&e.locale!=="ko"&&(zc||_!=="onCompositionStart"?_==="onCompositionEnd"&&zc&&(k=aT()):(ha=d,t1="value"in ha?ha.value:ha.textContent,zc=!0)),P=y0(u,_),0<P.length&&(_=new FS(_,n,null,e,d),h.push({event:_,listeners:P}),k?_.data=k:(k=uT(e),k!==null&&(_.data=k)))),(k=iN?sN(n,e):rN(n,e))&&(u=y0(u,"onBeforeInput"),0<u.length&&(d=new FS("onBeforeInput","beforeinput",null,e,d),h.push({event:d,listeners:u}),d.data=k))}ST(h,t)})}function df(n,t,e){return{instance:n,listener:t,currentTarget:e}}function y0(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=sf(n,e),r!=null&&i.unshift(df(n,r,s)),r=sf(n,t),r!=null&&i.push(df(n,r,s))),n=n.return}return i}function Pc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function YS(n,t,e,i,s){for(var r=t._reactName,o=[];e!==null&&e!==i;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,s?(c=sf(e,r),c!=null&&o.unshift(df(e,c,l))):s||(c=sf(e,r),c!=null&&o.push(df(e,c,l)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var xN=/\r\n?/g,bN=/\u0000|\uFFFD/g;function QS(n){return(typeof n=="string"?n:""+n).replace(xN,`
`).replace(bN,"")}function Ym(n,t,e){if(t=QS(t),QS(n)!==t&&e)throw Error(B(425))}function v0(){}var Ax=null,Cx=null;function Ex(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tx=typeof setTimeout=="function"?setTimeout:void 0,wN=typeof clearTimeout=="function"?clearTimeout:void 0,KS=typeof Promise=="function"?Promise:void 0,SN=typeof queueMicrotask=="function"?queueMicrotask:typeof KS<"u"?function(n){return KS.resolve(null).then(n).catch(AN)}:Tx;function AN(n){setTimeout(function(){throw n})}function Sv(n,t){var e=t,i=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(i===0){n.removeChild(s),af(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=s}while(e);af(t)}function va(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function JS(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var Jd=Math.random().toString(36).slice(2),Gs="__reactFiber$"+Jd,hf="__reactProps$"+Jd,to="__reactContainer$"+Jd,kx="__reactEvents$"+Jd,CN="__reactListeners$"+Jd,EN="__reactHandles$"+Jd;function qa(n){var t=n[Gs];if(t)return t;for(var e=n.parentNode;e;){if(t=e[to]||e[Gs]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=JS(n);n!==null;){if(e=n[Gs])return e;n=JS(n)}return t}n=e,e=n.parentNode}return null}function km(n){return n=n[Gs]||n[to],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Hc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(B(33))}function Ty(n){return n[hf]||null}var Px=[],$c=-1;function Na(n){return{current:n}}function Ht(n){0>$c||(n.current=Px[$c],Px[$c]=null,$c--)}function Bt(n,t){$c++,Px[$c]=n.current,n.current=t}var Ea={},un=Na(Ea),On=Na(!1),fc=Ea;function zd(n,t){var e=n.type.contextTypes;if(!e)return Ea;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=s),s}function Bn(n){return n=n.childContextTypes,n!=null}function x0(){Ht(On),Ht(un)}function ZS(n,t,e){if(un.current!==Ea)throw Error(B(168));Bt(un,t),Bt(On,e)}function CT(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(B(108,cM(n)||"Unknown",s));return ne({},e,i)}function b0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ea,fc=un.current,Bt(un,n),Bt(On,On.current),!0}function tA(n,t,e){var i=n.stateNode;if(!i)throw Error(B(169));e?(n=CT(n,t,fc),i.__reactInternalMemoizedMergedChildContext=n,Ht(On),Ht(un),Bt(un,n)):Ht(On),Bt(On,e)}var or=null,ky=!1,Av=!1;function ET(n){or===null?or=[n]:or.push(n)}function TN(n){ky=!0,ET(n)}function La(){if(!Av&&or!==null){Av=!0;var n=0,t=Pt;try{var e=or;for(Pt=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}or=null,ky=!1}catch(s){throw or!==null&&(or=or.slice(n+1)),QE(Qw,La),s}finally{Pt=t,Av=!1}}return null}var Wc=[],Gc=0,w0=null,S0=0,Bi=[],zi=0,pc=null,$r=1,Wr="";function Fa(n,t){Wc[Gc++]=S0,Wc[Gc++]=w0,w0=n,S0=t}function TT(n,t,e){Bi[zi++]=$r,Bi[zi++]=Wr,Bi[zi++]=pc,pc=n;var i=$r;n=Wr;var s=32-ps(i)-1;i&=~(1<<s),e+=1;var r=32-ps(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,$r=1<<32-ps(t)+s|e<<s|i,Wr=r+n}else $r=1<<r|e<<s|i,Wr=n}function r1(n){n.return!==null&&(Fa(n,1),TT(n,1,0))}function o1(n){for(;n===w0;)w0=Wc[--Gc],Wc[Gc]=null,S0=Wc[--Gc],Wc[Gc]=null;for(;n===pc;)pc=Bi[--zi],Bi[zi]=null,Wr=Bi[--zi],Bi[zi]=null,$r=Bi[--zi],Bi[zi]=null}var mi=null,fi=null,Xt=!1,hs=null;function kT(n,t){var e=Ui(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function eA(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,mi=n,fi=va(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,mi=n,fi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=pc!==null?{id:$r,overflow:Wr}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Ui(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,mi=n,fi=null,!0):!1;default:return!1}}function _x(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Dx(n){if(Xt){var t=fi;if(t){var e=t;if(!eA(n,t)){if(_x(n))throw Error(B(418));t=va(e.nextSibling);var i=mi;t&&eA(n,t)?kT(i,e):(n.flags=n.flags&-4097|2,Xt=!1,mi=n)}}else{if(_x(n))throw Error(B(418));n.flags=n.flags&-4097|2,Xt=!1,mi=n}}}function nA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mi=n}function Qm(n){if(n!==mi)return!1;if(!Xt)return nA(n),Xt=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!Ex(n.type,n.memoizedProps)),t&&(t=fi)){if(_x(n))throw PT(),Error(B(418));for(;t;)kT(n,t),t=va(t.nextSibling)}if(nA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(B(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){fi=va(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}fi=null}}else fi=mi?va(n.stateNode.nextSibling):null;return!0}function PT(){for(var n=fi;n;)n=va(n.nextSibling)}function Vd(){fi=mi=null,Xt=!1}function a1(n){hs===null?hs=[n]:hs.push(n)}var kN=ao.ReactCurrentBatchConfig;function oh(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(B(309));var i=e.stateNode}if(!i)throw Error(B(147,n));var s=i,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(B(284));if(!e._owner)throw Error(B(290,n))}return n}function Km(n,t){throw n=Object.prototype.toString.call(t),Error(B(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function iA(n){var t=n._init;return t(n._payload)}function _T(n){function t(g,w){if(n){var b=g.deletions;b===null?(g.deletions=[w],g.flags|=16):b.push(w)}}function e(g,w){if(!n)return null;for(;w!==null;)t(g,w),w=w.sibling;return null}function i(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function s(g,w){return g=Sa(g,w),g.index=0,g.sibling=null,g}function r(g,w,b){return g.index=b,n?(b=g.alternate,b!==null?(b=b.index,b<w?(g.flags|=2,w):b):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function l(g,w,b,E){return w===null||w.tag!==6?(w=Dv(b,g.mode,E),w.return=g,w):(w=s(w,b),w.return=g,w)}function c(g,w,b,E){var T=b.type;return T===Bc?d(g,w,b.props.children,E,b.key):w!==null&&(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ho&&iA(T)===w.type)?(E=s(w,b.props),E.ref=oh(g,w,b),E.return=g,E):(E=Tg(b.type,b.key,b.props,null,g.mode,E),E.ref=oh(g,w,b),E.return=g,E)}function u(g,w,b,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Mv(b,g.mode,E),w.return=g,w):(w=s(w,b.children||[]),w.return=g,w)}function d(g,w,b,E,T){return w===null||w.tag!==7?(w=uc(b,g.mode,E,T),w.return=g,w):(w=s(w,b),w.return=g,w)}function h(g,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Dv(""+w,g.mode,b),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zm:return b=Tg(w.type,w.key,w.props,null,g.mode,b),b.ref=oh(g,null,w),b.return=g,b;case Oc:return w=Mv(w,g.mode,b),w.return=g,w;case ho:var E=w._init;return h(g,E(w._payload),b)}if(yh(w)||eh(w))return w=uc(w,g.mode,b,null),w.return=g,w;Km(g,w)}return null}function f(g,w,b,E){var T=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:l(g,w,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zm:return b.key===T?c(g,w,b,E):null;case Oc:return b.key===T?u(g,w,b,E):null;case ho:return T=b._init,f(g,w,T(b._payload),E)}if(yh(b)||eh(b))return T!==null?null:d(g,w,b,E,null);Km(g,b)}return null}function p(g,w,b,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(b)||null,l(w,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case zm:return g=g.get(E.key===null?b:E.key)||null,c(w,g,E,T);case Oc:return g=g.get(E.key===null?b:E.key)||null,u(w,g,E,T);case ho:var P=E._init;return p(g,w,b,P(E._payload),T)}if(yh(E)||eh(E))return g=g.get(b)||null,d(w,g,E,T,null);Km(w,E)}return null}function x(g,w,b,E){for(var T=null,P=null,k=w,_=w=0,D=null;k!==null&&_<b.length;_++){k.index>_?(D=k,k=null):D=k.sibling;var M=f(g,k,b[_],E);if(M===null){k===null&&(k=D);break}n&&k&&M.alternate===null&&t(g,k),w=r(M,w,_),P===null?T=M:P.sibling=M,P=M,k=D}if(_===b.length)return e(g,k),Xt&&Fa(g,_),T;if(k===null){for(;_<b.length;_++)k=h(g,b[_],E),k!==null&&(w=r(k,w,_),P===null?T=k:P.sibling=k,P=k);return Xt&&Fa(g,_),T}for(k=i(g,k);_<b.length;_++)D=p(k,g,_,b[_],E),D!==null&&(n&&D.alternate!==null&&k.delete(D.key===null?_:D.key),w=r(D,w,_),P===null?T=D:P.sibling=D,P=D);return n&&k.forEach(function(R){return t(g,R)}),Xt&&Fa(g,_),T}function y(g,w,b,E){var T=eh(b);if(typeof T!="function")throw Error(B(150));if(b=T.call(b),b==null)throw Error(B(151));for(var P=T=null,k=w,_=w=0,D=null,M=b.next();k!==null&&!M.done;_++,M=b.next()){k.index>_?(D=k,k=null):D=k.sibling;var R=f(g,k,M.value,E);if(R===null){k===null&&(k=D);break}n&&k&&R.alternate===null&&t(g,k),w=r(R,w,_),P===null?T=R:P.sibling=R,P=R,k=D}if(M.done)return e(g,k),Xt&&Fa(g,_),T;if(k===null){for(;!M.done;_++,M=b.next())M=h(g,M.value,E),M!==null&&(w=r(M,w,_),P===null?T=M:P.sibling=M,P=M);return Xt&&Fa(g,_),T}for(k=i(g,k);!M.done;_++,M=b.next())M=p(k,g,_,M.value,E),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?_:M.key),w=r(M,w,_),P===null?T=M:P.sibling=M,P=M);return n&&k.forEach(function(V){return t(g,V)}),Xt&&Fa(g,_),T}function A(g,w,b,E){if(typeof b=="object"&&b!==null&&b.type===Bc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zm:t:{for(var T=b.key,P=w;P!==null;){if(P.key===T){if(T=b.type,T===Bc){if(P.tag===7){e(g,P.sibling),w=s(P,b.props.children),w.return=g,g=w;break t}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ho&&iA(T)===P.type){e(g,P.sibling),w=s(P,b.props),w.ref=oh(g,P,b),w.return=g,g=w;break t}e(g,P);break}else t(g,P);P=P.sibling}b.type===Bc?(w=uc(b.props.children,g.mode,E,b.key),w.return=g,g=w):(E=Tg(b.type,b.key,b.props,null,g.mode,E),E.ref=oh(g,w,b),E.return=g,g=E)}return o(g);case Oc:t:{for(P=b.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){e(g,w.sibling),w=s(w,b.children||[]),w.return=g,g=w;break t}else{e(g,w);break}else t(g,w);w=w.sibling}w=Mv(b,g.mode,E),w.return=g,g=w}return o(g);case ho:return P=b._init,A(g,w,P(b._payload),E)}if(yh(b))return x(g,w,b,E);if(eh(b))return y(g,w,b,E);Km(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(e(g,w.sibling),w=s(w,b),w.return=g,g=w):(e(g,w),w=Dv(b,g.mode,E),w.return=g,g=w),o(g)):e(g,w)}return A}var Ud=_T(!0),DT=_T(!1),A0=Na(null),C0=null,qc=null,l1=null;function c1(){l1=qc=C0=null}function u1(n){var t=A0.current;Ht(A0),n._currentValue=t}function Mx(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function uu(n,t){C0=n,l1=qc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(Fn=!0),n.firstContext=null)}function Wi(n){var t=n._currentValue;if(l1!==n)if(n={context:n,memoizedValue:t,next:null},qc===null){if(C0===null)throw Error(B(308));qc=n,C0.dependencies={lanes:0,firstContext:n}}else qc=qc.next=n;return t}var Xa=null;function d1(n){Xa===null?Xa=[n]:Xa.push(n)}function MT(n,t,e,i){var s=t.interleaved;return s===null?(e.next=e,d1(t)):(e.next=s.next,s.next=e),t.interleaved=e,eo(n,i)}function eo(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var fo=!1;function h1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NT(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function qr(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function xa(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,eo(n,e)}return s=i.interleaved,s===null?(t.next=t,d1(i)):(t.next=s.next,s.next=t),i.interleaved=t,eo(n,e)}function bg(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Kw(n,e)}}function sA(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function E0(n,t,e,i){var s=n.updateQueue;fo=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(r!==null){var h=s.baseState;o=0,d=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var x=n,y=l;switch(f=t,p=e,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(p,h,f);break t}h=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,f=typeof x=="function"?x.call(p,h,f):x,f==null)break t;h=ne({},h,f);break t;case 2:fo=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);gc|=o,n.lanes=o,n.memoizedState=h}}function rA(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],s=i.callback;if(s!==null){if(i.callback=null,i=e,typeof s!="function")throw Error(B(191,s));s.call(i)}}}var Pm={},Ys=Na(Pm),ff=Na(Pm),pf=Na(Pm);function Ya(n){if(n===Pm)throw Error(B(174));return n}function f1(n,t){switch(Bt(pf,t),Bt(ff,n),Bt(Ys,Pm),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dx(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=dx(t,n)}Ht(Ys),Bt(Ys,t)}function Hd(){Ht(Ys),Ht(ff),Ht(pf)}function LT(n){Ya(pf.current);var t=Ya(Ys.current),e=dx(t,n.type);t!==e&&(Bt(ff,n),Bt(Ys,e))}function p1(n){ff.current===n&&(Ht(Ys),Ht(ff))}var Jt=Na(0);function T0(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cv=[];function m1(){for(var n=0;n<Cv.length;n++)Cv[n]._workInProgressVersionPrimary=null;Cv.length=0}var wg=ao.ReactCurrentDispatcher,Ev=ao.ReactCurrentBatchConfig,mc=0,te=null,Ee=null,Fe=null,k0=!1,qh=!1,mf=0,PN=0;function Je(){throw Error(B(321))}function g1(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!gs(n[e],t[e]))return!1;return!0}function y1(n,t,e,i,s,r){if(mc=r,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wg.current=n===null||n.memoizedState===null?NN:LN,n=e(i,s),qh){r=0;do{if(qh=!1,mf=0,25<=r)throw Error(B(301));r+=1,Fe=Ee=null,t.updateQueue=null,wg.current=RN,n=e(i,s)}while(qh)}if(wg.current=P0,t=Ee!==null&&Ee.next!==null,mc=0,Fe=Ee=te=null,k0=!1,t)throw Error(B(300));return n}function v1(){var n=mf!==0;return mf=0,n}function As(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?te.memoizedState=Fe=n:Fe=Fe.next=n,Fe}function Gi(){if(Ee===null){var n=te.alternate;n=n!==null?n.memoizedState:null}else n=Ee.next;var t=Fe===null?te.memoizedState:Fe.next;if(t!==null)Fe=t,Ee=n;else{if(n===null)throw Error(B(310));Ee=n,n={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Fe===null?te.memoizedState=Fe=n:Fe=Fe.next=n}return Fe}function gf(n,t){return typeof t=="function"?t(n):t}function Tv(n){var t=Gi(),e=t.queue;if(e===null)throw Error(B(311));e.lastRenderedReducer=n;var i=Ee,s=i.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,i=i.baseState;var l=o=null,c=null,u=r;do{var d=u.lane;if((mc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=i):c=c.next=h,te.lanes|=d,gc|=d}u=u.next}while(u!==null&&u!==r);c===null?o=i:c.next=l,gs(i,t.memoizedState)||(Fn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,e.lastRenderedState=i}if(n=e.interleaved,n!==null){s=n;do r=s.lane,te.lanes|=r,gc|=r,s=s.next;while(s!==n)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function kv(n){var t=Gi(),e=t.queue;if(e===null)throw Error(B(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);gs(r,t.memoizedState)||(Fn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function RT(){}function IT(n,t){var e=te,i=Gi(),s=t(),r=!gs(i.memoizedState,s);if(r&&(i.memoizedState=s,Fn=!0),i=i.queue,x1(OT.bind(null,e,i,n),[n]),i.getSnapshot!==t||r||Fe!==null&&Fe.memoizedState.tag&1){if(e.flags|=2048,yf(9,FT.bind(null,e,i,s,t),void 0,null),Oe===null)throw Error(B(349));mc&30||jT(e,t,s)}return s}function jT(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function FT(n,t,e,i){t.value=e,t.getSnapshot=i,BT(t)&&zT(n)}function OT(n,t,e){return e(function(){BT(t)&&zT(n)})}function BT(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!gs(n,e)}catch{return!0}}function zT(n){var t=eo(n,1);t!==null&&ms(t,n,1,-1)}function oA(n){var t=As();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:n},t.queue=n,n=n.dispatch=MN.bind(null,te,n),[t.memoizedState,n]}function yf(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function VT(){return Gi().memoizedState}function Sg(n,t,e,i){var s=As();te.flags|=n,s.memoizedState=yf(1|t,e,void 0,i===void 0?null:i)}function Py(n,t,e,i){var s=Gi();i=i===void 0?null:i;var r=void 0;if(Ee!==null){var o=Ee.memoizedState;if(r=o.destroy,i!==null&&g1(i,o.deps)){s.memoizedState=yf(t,e,r,i);return}}te.flags|=n,s.memoizedState=yf(1|t,e,r,i)}function aA(n,t){return Sg(8390656,8,n,t)}function x1(n,t){return Py(2048,8,n,t)}function UT(n,t){return Py(4,2,n,t)}function HT(n,t){return Py(4,4,n,t)}function $T(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function WT(n,t,e){return e=e!=null?e.concat([n]):null,Py(4,4,$T.bind(null,t,n),e)}function b1(){}function GT(n,t){var e=Gi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&g1(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function qT(n,t){var e=Gi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&g1(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function XT(n,t,e){return mc&21?(gs(e,t)||(e=ZE(),te.lanes|=e,gc|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,Fn=!0),n.memoizedState=e)}function _N(n,t){var e=Pt;Pt=e!==0&&4>e?e:4,n(!0);var i=Ev.transition;Ev.transition={};try{n(!1),t()}finally{Pt=e,Ev.transition=i}}function YT(){return Gi().memoizedState}function DN(n,t,e){var i=wa(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},QT(n))KT(t,e);else if(e=MT(n,t,e,i),e!==null){var s=wn();ms(e,n,i,s),JT(e,t,i)}}function MN(n,t,e){var i=wa(n),s={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(QT(n))KT(t,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,e);if(s.hasEagerState=!0,s.eagerState=l,gs(l,o)){var c=t.interleaved;c===null?(s.next=s,d1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}e=MT(n,t,s,i),e!==null&&(s=wn(),ms(e,n,i,s),JT(e,t,i))}}function QT(n){var t=n.alternate;return n===te||t!==null&&t===te}function KT(n,t){qh=k0=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function JT(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Kw(n,e)}}var P0={readContext:Wi,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},NN={readContext:Wi,useCallback:function(n,t){return As().memoizedState=[n,t===void 0?null:t],n},useContext:Wi,useEffect:aA,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Sg(4194308,4,$T.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Sg(4194308,4,n,t)},useInsertionEffect:function(n,t){return Sg(4,2,n,t)},useMemo:function(n,t){var e=As();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=As();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=DN.bind(null,te,n),[i.memoizedState,n]},useRef:function(n){var t=As();return n={current:n},t.memoizedState=n},useState:oA,useDebugValue:b1,useDeferredValue:function(n){return As().memoizedState=n},useTransition:function(){var n=oA(!1),t=n[0];return n=_N.bind(null,n[1]),As().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=te,s=As();if(Xt){if(e===void 0)throw Error(B(407));e=e()}else{if(e=t(),Oe===null)throw Error(B(349));mc&30||jT(i,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,aA(OT.bind(null,i,r,n),[n]),i.flags|=2048,yf(9,FT.bind(null,i,r,e,t),void 0,null),e},useId:function(){var n=As(),t=Oe.identifierPrefix;if(Xt){var e=Wr,i=$r;e=(i&~(1<<32-ps(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=mf++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=PN++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},LN={readContext:Wi,useCallback:GT,useContext:Wi,useEffect:x1,useImperativeHandle:WT,useInsertionEffect:UT,useLayoutEffect:HT,useMemo:qT,useReducer:Tv,useRef:VT,useState:function(){return Tv(gf)},useDebugValue:b1,useDeferredValue:function(n){var t=Gi();return XT(t,Ee.memoizedState,n)},useTransition:function(){var n=Tv(gf)[0],t=Gi().memoizedState;return[n,t]},useMutableSource:RT,useSyncExternalStore:IT,useId:YT,unstable_isNewReconciler:!1},RN={readContext:Wi,useCallback:GT,useContext:Wi,useEffect:x1,useImperativeHandle:WT,useInsertionEffect:UT,useLayoutEffect:HT,useMemo:qT,useReducer:kv,useRef:VT,useState:function(){return kv(gf)},useDebugValue:b1,useDeferredValue:function(n){var t=Gi();return Ee===null?t.memoizedState=n:XT(t,Ee.memoizedState,n)},useTransition:function(){var n=kv(gf)[0],t=Gi().memoizedState;return[n,t]},useMutableSource:RT,useSyncExternalStore:IT,useId:YT,unstable_isNewReconciler:!1};function Ji(n,t){if(n&&n.defaultProps){t=ne({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function Nx(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:ne({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var _y={isMounted:function(n){return(n=n._reactInternals)?Sc(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=wn(),s=wa(n),r=qr(i,s);r.payload=t,e!=null&&(r.callback=e),t=xa(n,r,s),t!==null&&(ms(t,n,s,i),bg(t,n,s))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=wn(),s=wa(n),r=qr(i,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=xa(n,r,s),t!==null&&(ms(t,n,s,i),bg(t,n,s))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=wn(),i=wa(n),s=qr(e,i);s.tag=2,t!=null&&(s.callback=t),t=xa(n,s,i),t!==null&&(ms(t,n,i,e),bg(t,n,i))}};function lA(n,t,e,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!cf(e,i)||!cf(s,r):!0}function ZT(n,t,e){var i=!1,s=Ea,r=t.contextType;return typeof r=="object"&&r!==null?r=Wi(r):(s=Bn(t)?fc:un.current,i=t.contextTypes,r=(i=i!=null)?zd(n,s):Ea),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_y,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),t}function cA(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&_y.enqueueReplaceState(t,t.state,null)}function Lx(n,t,e,i){var s=n.stateNode;s.props=e,s.state=n.memoizedState,s.refs={},h1(n);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Wi(r):(r=Bn(t)?fc:un.current,s.context=zd(n,r)),s.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Nx(n,t,r,e),s.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&_y.enqueueReplaceState(s,s.state,null),E0(n,e,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function $d(n,t){try{var e="",i=t;do e+=lM(i),i=i.return;while(i);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:s,digest:null}}function Pv(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function Rx(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var IN=typeof WeakMap=="function"?WeakMap:Map;function tk(n,t,e){e=qr(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){D0||(D0=!0,$x=i),Rx(n,t)},e}function ek(n,t,e){e=qr(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;e.payload=function(){return i(s)},e.callback=function(){Rx(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Rx(n,t),typeof i!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function uA(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new IN;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(s.add(e),n=YN.bind(null,n,t,e),t.then(n,n))}function dA(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function hA(n,t,e,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=qr(-1,1),t.tag=2,xa(e,t,1))),e.lanes|=1),n)}var jN=ao.ReactCurrentOwner,Fn=!1;function xn(n,t,e,i){t.child=n===null?DT(t,null,e,i):Ud(t,n.child,e,i)}function fA(n,t,e,i,s){e=e.render;var r=t.ref;return uu(t,s),i=y1(n,t,e,i,r,s),e=v1(),n!==null&&!Fn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,no(n,t,s)):(Xt&&e&&r1(t),t.flags|=1,xn(n,t,i,s),t.child)}function pA(n,t,e,i,s){if(n===null){var r=e.type;return typeof r=="function"&&!P1(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,nk(n,t,r,i,s)):(n=Tg(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:cf,e(o,i)&&n.ref===t.ref)return no(n,t,s)}return t.flags|=1,n=Sa(r,i),n.ref=t.ref,n.return=t,t.child=n}function nk(n,t,e,i,s){if(n!==null){var r=n.memoizedProps;if(cf(r,i)&&n.ref===t.ref)if(Fn=!1,t.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Fn=!0);else return t.lanes=n.lanes,no(n,t,s)}return Ix(n,t,e,i,s)}function ik(n,t,e){var i=t.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(Yc,ui),ui|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Bt(Yc,ui),ui|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,Bt(Yc,ui),ui|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,Bt(Yc,ui),ui|=i;return xn(n,t,s,e),t.child}function sk(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Ix(n,t,e,i,s){var r=Bn(e)?fc:un.current;return r=zd(t,r),uu(t,s),e=y1(n,t,e,i,r,s),i=v1(),n!==null&&!Fn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,no(n,t,s)):(Xt&&i&&r1(t),t.flags|=1,xn(n,t,e,s),t.child)}function mA(n,t,e,i,s){if(Bn(e)){var r=!0;b0(t)}else r=!1;if(uu(t,s),t.stateNode===null)Ag(n,t),ZT(t,e,i),Lx(t,e,i,s),i=!0;else if(n===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Wi(u):(u=Bn(e)?fc:un.current,u=zd(t,u));var d=e.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==u)&&cA(t,o,i,u),fo=!1;var f=t.memoizedState;o.state=f,E0(t,i,o,s),c=t.memoizedState,l!==i||f!==c||On.current||fo?(typeof d=="function"&&(Nx(t,e,d,i),c=t.memoizedState),(l=fo||lA(t,e,l,i,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,NT(n,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ji(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=Wi(c):(c=Bn(e)?fc:un.current,c=zd(t,c));var p=e.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&cA(t,o,i,c),fo=!1,f=t.memoizedState,o.state=f,E0(t,i,o,s);var x=t.memoizedState;l!==h||f!==x||On.current||fo?(typeof p=="function"&&(Nx(t,e,p,i),x=t.memoizedState),(u=fo||lA(t,e,u,i,f,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=x),o.props=i,o.state=x,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return jx(n,t,e,i,r,s)}function jx(n,t,e,i,s,r){sk(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&tA(t,e,!1),no(n,t,r);i=t.stateNode,jN.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=Ud(t,n.child,null,r),t.child=Ud(t,null,l,r)):xn(n,t,l,r),t.memoizedState=i.state,s&&tA(t,e,!0),t.child}function rk(n){var t=n.stateNode;t.pendingContext?ZS(n,t.pendingContext,t.pendingContext!==t.context):t.context&&ZS(n,t.context,!1),f1(n,t.containerInfo)}function gA(n,t,e,i,s){return Vd(),a1(s),t.flags|=256,xn(n,t,e,i),t.child}var Fx={dehydrated:null,treeContext:null,retryLane:0};function Ox(n){return{baseLanes:n,cachePool:null,transitions:null}}function ok(n,t,e){var i=t.pendingProps,s=Jt.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Bt(Jt,s&1),n===null)return Dx(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Ny(o,i,0,null),n=uc(n,i,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=Ox(e),t.memoizedState=Fx,n):w1(t,o));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return FN(n,t,o,i,l,s,e);if(r){r=i.fallback,o=t.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=Sa(s,c),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=Sa(l,r):(r=uc(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o=o===null?Ox(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=Fx,i}return r=n.child,n=r.sibling,i=Sa(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function w1(n,t){return t=Ny({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function Jm(n,t,e,i){return i!==null&&a1(i),Ud(t,n.child,null,e),n=w1(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function FN(n,t,e,i,s,r,o){if(e)return t.flags&256?(t.flags&=-257,i=Pv(Error(B(422))),Jm(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=Ny({mode:"visible",children:i.children},s,0,null),r=uc(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&Ud(t,n.child,null,o),t.child.memoizedState=Ox(o),t.memoizedState=Fx,r);if(!(t.mode&1))return Jm(n,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,r=Error(B(419)),i=Pv(r,i,void 0),Jm(n,t,o,i)}if(l=(o&n.childLanes)!==0,Fn||l){if(i=Oe,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,eo(n,s),ms(i,n,s,-1))}return k1(),i=Pv(Error(B(421))),Jm(n,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=n.child,t=QN.bind(null,n),s._reactRetry=t,null):(n=r.treeContext,fi=va(s.nextSibling),mi=t,Xt=!0,hs=null,n!==null&&(Bi[zi++]=$r,Bi[zi++]=Wr,Bi[zi++]=pc,$r=n.id,Wr=n.overflow,pc=t),t=w1(t,i.children),t.flags|=4096,t)}function yA(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),Mx(n.return,t,e)}function _v(n,t,e,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=s)}function ak(n,t,e){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(xn(n,t,i.children,e),i=Jt.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yA(n,e,t);else if(n.tag===19)yA(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Bt(Jt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&T0(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),_v(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&T0(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}_v(t,!0,e,null,r);break;case"together":_v(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ag(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function no(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),gc|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(B(153));if(t.child!==null){for(n=t.child,e=Sa(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Sa(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function ON(n,t,e){switch(t.tag){case 3:rk(t),Vd();break;case 5:LT(t);break;case 1:Bn(t.type)&&b0(t);break;case 4:f1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Bt(A0,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Bt(Jt,Jt.current&1),t.flags|=128,null):e&t.child.childLanes?ok(n,t,e):(Bt(Jt,Jt.current&1),n=no(n,t,e),n!==null?n.sibling:null);Bt(Jt,Jt.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return ak(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Bt(Jt,Jt.current),i)break;return null;case 22:case 23:return t.lanes=0,ik(n,t,e)}return no(n,t,e)}var lk,Bx,ck,uk;lk=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Bx=function(){};ck=function(n,t,e,i){var s=n.memoizedProps;if(s!==i){n=t.stateNode,Ya(Ys.current);var r=null;switch(e){case"input":s=ax(n,s),i=ax(n,i),r=[];break;case"select":s=ne({},s,{value:void 0}),i=ne({},i,{value:void 0}),r=[];break;case"textarea":s=ux(n,s),i=ux(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=v0)}hx(e,i);var o;e=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ef.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(l=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ef.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Vt("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};uk=function(n,t,e,i){e!==i&&(t.flags|=4)};function ah(n,t){if(!Xt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ze(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function BN(n,t,e){var i=t.pendingProps;switch(o1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Bn(t.type)&&x0(),Ze(t),null;case 3:return i=t.stateNode,Hd(),Ht(On),Ht(un),m1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Qm(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hs!==null&&(qx(hs),hs=null))),Bx(n,t),Ze(t),null;case 5:p1(t);var s=Ya(pf.current);if(e=t.type,n!==null&&t.stateNode!=null)ck(n,t,e,i,s),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(B(166));return Ze(t),null}if(n=Ya(Ys.current),Qm(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[Gs]=t,i[hf]=r,n=(t.mode&1)!==0,e){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(s=0;s<xh.length;s++)Vt(xh[s],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":TS(i,r),Vt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Vt("invalid",i);break;case"textarea":PS(i,r),Vt("invalid",i)}hx(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?i.textContent!==l&&(r.suppressHydrationWarning!==!0&&Ym(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Ym(i.textContent,l,n),s=["children",""+l]):ef.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Vt("scroll",i)}switch(e){case"input":Vm(i),kS(i,r,!0);break;case"textarea":Vm(i),_S(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=v0)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=OE(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[Gs]=t,n[hf]=i,lk(n,t,!1,!1),t.stateNode=n;t:{switch(o=fx(e,i),e){case"dialog":Vt("cancel",n),Vt("close",n),s=i;break;case"iframe":case"object":case"embed":Vt("load",n),s=i;break;case"video":case"audio":for(s=0;s<xh.length;s++)Vt(xh[s],n);s=i;break;case"source":Vt("error",n),s=i;break;case"img":case"image":case"link":Vt("error",n),Vt("load",n),s=i;break;case"details":Vt("toggle",n),s=i;break;case"input":TS(n,i),s=ax(n,i),Vt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=ne({},i,{value:void 0}),Vt("invalid",n);break;case"textarea":PS(n,i),s=ux(n,i),Vt("invalid",n);break;default:s=i}hx(e,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?VE(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&BE(n,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&nf(n,c):typeof c=="number"&&nf(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ef.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Vt("scroll",n):c!=null&&Ww(n,r,c,o))}switch(e){case"input":Vm(n),kS(n,i,!1);break;case"textarea":Vm(n),_S(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ca(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?ou(n,!!i.multiple,r,!1):i.defaultValue!=null&&ou(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=v0)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(n&&t.stateNode!=null)uk(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(B(166));if(e=Ya(pf.current),Ya(Ys.current),Qm(t)){if(i=t.stateNode,e=t.memoizedProps,i[Gs]=t,(r=i.nodeValue!==e)&&(n=mi,n!==null))switch(n.tag){case 3:Ym(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ym(i.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Gs]=t,t.stateNode=i}return Ze(t),null;case 13:if(Ht(Jt),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Xt&&fi!==null&&t.mode&1&&!(t.flags&128))PT(),Vd(),t.flags|=98560,r=!1;else if(r=Qm(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(B(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[Gs]=t}else Vd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),r=!1}else hs!==null&&(qx(hs),hs=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||Jt.current&1?Te===0&&(Te=3):k1())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return Hd(),Bx(n,t),n===null&&uf(t.stateNode.containerInfo),Ze(t),null;case 10:return u1(t.type._context),Ze(t),null;case 17:return Bn(t.type)&&x0(),Ze(t),null;case 19:if(Ht(Jt),r=t.memoizedState,r===null)return Ze(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)ah(r,!1);else{if(Te!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=T0(n),o!==null){for(t.flags|=128,ah(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Bt(Jt,Jt.current&1|2),t.child}n=n.sibling}r.tail!==null&&fe()>Wd&&(t.flags|=128,i=!0,ah(r,!1),t.lanes=4194304)}else{if(!i)if(n=T0(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),ah(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Xt)return Ze(t),null}else 2*fe()-r.renderingStartTime>Wd&&e!==1073741824&&(t.flags|=128,i=!0,ah(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=fe(),t.sibling=null,e=Jt.current,Bt(Jt,i?e&1|2:e&1),t):(Ze(t),null);case 22:case 23:return T1(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ui&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function zN(n,t){switch(o1(t),t.tag){case 1:return Bn(t.type)&&x0(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Hd(),Ht(On),Ht(un),m1(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return p1(t),null;case 13:if(Ht(Jt),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Vd()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Ht(Jt),null;case 4:return Hd(),null;case 10:return u1(t.type._context),null;case 22:case 23:return T1(),null;case 24:return null;default:return null}}var Zm=!1,cn=!1,VN=typeof WeakSet=="function"?WeakSet:Set,X=null;function Xc(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){le(n,t,i)}else e.current=null}function zx(n,t,e){try{e()}catch(i){le(n,t,i)}}var vA=!1;function UN(n,t){if(Ax=m0,n=mT(),s1(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,u=0,d=0,h=n,f=null;e:for(;;){for(var p;h!==e||s!==0&&h.nodeType!==3||(l=o+s),h!==r||i!==0&&h.nodeType!==3||(c=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===n)break e;if(f===e&&++u===s&&(l=o),f===r&&++d===i&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Cx={focusedElem:n,selectionRange:e},m0=!1,X=t;X!==null;)if(t=X,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,X=n;else for(;X!==null;){t=X;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,A=x.memoizedState,g=t.stateNode,w=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Ji(t.type,y),A);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(E){le(t,t.return,E)}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}return x=vA,vA=!1,x}function Xh(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&zx(t,e,r)}s=s.next}while(s!==i)}}function Dy(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function Vx(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function dk(n){var t=n.alternate;t!==null&&(n.alternate=null,dk(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[Gs],delete t[hf],delete t[kx],delete t[CN],delete t[EN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hk(n){return n.tag===5||n.tag===3||n.tag===4}function xA(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||hk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ux(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=v0));else if(i!==4&&(n=n.child,n!==null))for(Ux(n,t,e),n=n.sibling;n!==null;)Ux(n,t,e),n=n.sibling}function Hx(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Hx(n,t,e),n=n.sibling;n!==null;)Hx(n,t,e),n=n.sibling}var We=null,ds=!1;function lo(n,t,e){for(e=e.child;e!==null;)fk(n,t,e),e=e.sibling}function fk(n,t,e){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(Sy,e)}catch{}switch(e.tag){case 5:cn||Xc(e,t);case 6:var i=We,s=ds;We=null,lo(n,t,e),We=i,ds=s,We!==null&&(ds?(n=We,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):We.removeChild(e.stateNode));break;case 18:We!==null&&(ds?(n=We,e=e.stateNode,n.nodeType===8?Sv(n.parentNode,e):n.nodeType===1&&Sv(n,e),af(n)):Sv(We,e.stateNode));break;case 4:i=We,s=ds,We=e.stateNode.containerInfo,ds=!0,lo(n,t,e),We=i,ds=s;break;case 0:case 11:case 14:case 15:if(!cn&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&zx(e,t,o),s=s.next}while(s!==i)}lo(n,t,e);break;case 1:if(!cn&&(Xc(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(l){le(e,t,l)}lo(n,t,e);break;case 21:lo(n,t,e);break;case 22:e.mode&1?(cn=(i=cn)||e.memoizedState!==null,lo(n,t,e),cn=i):lo(n,t,e);break;default:lo(n,t,e)}}function bA(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new VN),t.forEach(function(i){var s=KN.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}}function Yi(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];try{var r=n,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:We=l.stateNode,ds=!1;break t;case 3:We=l.stateNode.containerInfo,ds=!0;break t;case 4:We=l.stateNode.containerInfo,ds=!0;break t}l=l.return}if(We===null)throw Error(B(160));fk(r,o,s),We=null,ds=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){le(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pk(t,n),t=t.sibling}function pk(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Yi(t,n),xs(n),i&4){try{Xh(3,n,n.return),Dy(3,n)}catch(y){le(n,n.return,y)}try{Xh(5,n,n.return)}catch(y){le(n,n.return,y)}}break;case 1:Yi(t,n),xs(n),i&512&&e!==null&&Xc(e,e.return);break;case 5:if(Yi(t,n),xs(n),i&512&&e!==null&&Xc(e,e.return),n.flags&32){var s=n.stateNode;try{nf(s,"")}catch(y){le(n,n.return,y)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&jE(s,r),fx(l,o);var u=fx(l,r);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?VE(s,h):d==="dangerouslySetInnerHTML"?BE(s,h):d==="children"?nf(s,h):Ww(s,d,h,u)}switch(l){case"input":lx(s,r);break;case"textarea":FE(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?ou(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?ou(s,!!r.multiple,r.defaultValue,!0):ou(s,!!r.multiple,r.multiple?[]:"",!1))}s[hf]=r}catch(y){le(n,n.return,y)}}break;case 6:if(Yi(t,n),xs(n),i&4){if(n.stateNode===null)throw Error(B(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(y){le(n,n.return,y)}}break;case 3:if(Yi(t,n),xs(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{af(t.containerInfo)}catch(y){le(n,n.return,y)}break;case 4:Yi(t,n),xs(n);break;case 13:Yi(t,n),xs(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(C1=fe())),i&4&&bA(n);break;case 22:if(d=e!==null&&e.memoizedState!==null,n.mode&1?(cn=(u=cn)||d,Yi(t,n),cn=u):Yi(t,n),xs(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(X=n,d=n.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,p=f.child,f.tag){case 0:case 11:case 14:case 15:Xh(4,f,f.return);break;case 1:Xc(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){le(i,e,y)}}break;case 5:Xc(f,f.return);break;case 22:if(f.memoizedState!==null){SA(h);continue}}p!==null?(p.return=f,X=p):SA(h)}d=d.sibling}t:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zE("display",o))}catch(y){le(n,n.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){le(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yi(t,n),xs(n),i&4&&bA(n);break;case 21:break;default:Yi(t,n),xs(n)}}function xs(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(hk(e)){var i=e;break t}e=e.return}throw Error(B(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(nf(s,""),i.flags&=-33);var r=xA(n);Hx(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=xA(n);Ux(n,l,o);break;default:throw Error(B(161))}}catch(c){le(n,n.return,c)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function HN(n,t,e){X=n,mk(n)}function mk(n,t,e){for(var i=(n.mode&1)!==0;X!==null;){var s=X,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Zm;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||cn;l=Zm;var u=cn;if(Zm=o,(cn=c)&&!u)for(X=s;X!==null;)o=X,c=o.child,o.tag===22&&o.memoizedState!==null?AA(s):c!==null?(c.return=o,X=c):AA(s);for(;r!==null;)X=r,mk(r),r=r.sibling;X=s,Zm=l,cn=u}wA(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,X=r):wA(n)}}function wA(n){for(;X!==null;){var t=X;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:cn||Dy(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!cn)if(e===null)i.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:Ji(t.type,e.memoizedProps);i.componentDidUpdate(s,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&rA(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}rA(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&af(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}cn||t.flags&512&&Vx(t)}catch(f){le(t,t.return,f)}}if(t===n){X=null;break}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}}function SA(n){for(;X!==null;){var t=X;if(t===n){X=null;break}var e=t.sibling;if(e!==null){e.return=t.return,X=e;break}X=t.return}}function AA(n){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Dy(4,t)}catch(c){le(t,e,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(c){le(t,s,c)}}var r=t.return;try{Vx(t)}catch(c){le(t,r,c)}break;case 5:var o=t.return;try{Vx(t)}catch(c){le(t,o,c)}}}catch(c){le(t,t.return,c)}if(t===n){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var $N=Math.ceil,_0=ao.ReactCurrentDispatcher,S1=ao.ReactCurrentOwner,Hi=ao.ReactCurrentBatchConfig,mt=0,Oe=null,xe=null,Qe=0,ui=0,Yc=Na(0),Te=0,vf=null,gc=0,My=0,A1=0,Yh=null,jn=null,C1=0,Wd=1/0,ir=null,D0=!1,$x=null,ba=null,tg=!1,fa=null,M0=0,Qh=0,Wx=null,Cg=-1,Eg=0;function wn(){return mt&6?fe():Cg!==-1?Cg:Cg=fe()}function wa(n){return n.mode&1?mt&2&&Qe!==0?Qe&-Qe:kN.transition!==null?(Eg===0&&(Eg=ZE()),Eg):(n=Pt,n!==0||(n=window.event,n=n===void 0?16:oT(n.type)),n):1}function ms(n,t,e,i){if(50<Qh)throw Qh=0,Wx=null,Error(B(185));Em(n,e,i),(!(mt&2)||n!==Oe)&&(n===Oe&&(!(mt&2)&&(My|=e),Te===4&&go(n,Qe)),zn(n,i),e===1&&mt===0&&!(t.mode&1)&&(Wd=fe()+500,ky&&La()))}function zn(n,t){var e=n.callbackNode;kM(n,t);var i=p0(n,n===Oe?Qe:0);if(i===0)e!==null&&NS(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&NS(e),t===1)n.tag===0?TN(CA.bind(null,n)):ET(CA.bind(null,n)),SN(function(){!(mt&6)&&La()}),e=null;else{switch(tT(i)){case 1:e=Qw;break;case 4:e=KE;break;case 16:e=f0;break;case 536870912:e=JE;break;default:e=f0}e=Ak(e,gk.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function gk(n,t){if(Cg=-1,Eg=0,mt&6)throw Error(B(327));var e=n.callbackNode;if(du()&&n.callbackNode!==e)return null;var i=p0(n,n===Oe?Qe:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=N0(n,i);else{t=i;var s=mt;mt|=2;var r=vk();(Oe!==n||Qe!==t)&&(ir=null,Wd=fe()+500,cc(n,t));do try{qN();break}catch(l){yk(n,l)}while(!0);c1(),_0.current=r,mt=s,xe!==null?t=0:(Oe=null,Qe=0,t=Te)}if(t!==0){if(t===2&&(s=vx(n),s!==0&&(i=s,t=Gx(n,s))),t===1)throw e=vf,cc(n,0),go(n,i),zn(n,fe()),e;if(t===6)go(n,i);else{if(s=n.current.alternate,!(i&30)&&!WN(s)&&(t=N0(n,i),t===2&&(r=vx(n),r!==0&&(i=r,t=Gx(n,r))),t===1))throw e=vf,cc(n,0),go(n,i),zn(n,fe()),e;switch(n.finishedWork=s,n.finishedLanes=i,t){case 0:case 1:throw Error(B(345));case 2:Oa(n,jn,ir);break;case 3:if(go(n,i),(i&130023424)===i&&(t=C1+500-fe(),10<t)){if(p0(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){wn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Tx(Oa.bind(null,n,jn,ir),t);break}Oa(n,jn,ir);break;case 4:if(go(n,i),(i&4194240)===i)break;for(t=n.eventTimes,s=-1;0<i;){var o=31-ps(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=fe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*$N(i/1960))-i,10<i){n.timeoutHandle=Tx(Oa.bind(null,n,jn,ir),i);break}Oa(n,jn,ir);break;case 5:Oa(n,jn,ir);break;default:throw Error(B(329))}}}return zn(n,fe()),n.callbackNode===e?gk.bind(null,n):null}function Gx(n,t){var e=Yh;return n.current.memoizedState.isDehydrated&&(cc(n,t).flags|=256),n=N0(n,t),n!==2&&(t=jn,jn=e,t!==null&&qx(t)),n}function qx(n){jn===null?jn=n:jn.push.apply(jn,n)}function WN(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var s=e[i],r=s.getSnapshot;s=s.value;try{if(!gs(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function go(n,t){for(t&=~A1,t&=~My,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-ps(t),i=1<<e;n[e]=-1,t&=~i}}function CA(n){if(mt&6)throw Error(B(327));du();var t=p0(n,0);if(!(t&1))return zn(n,fe()),null;var e=N0(n,t);if(n.tag!==0&&e===2){var i=vx(n);i!==0&&(t=i,e=Gx(n,i))}if(e===1)throw e=vf,cc(n,0),go(n,t),zn(n,fe()),e;if(e===6)throw Error(B(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Oa(n,jn,ir),zn(n,fe()),null}function E1(n,t){var e=mt;mt|=1;try{return n(t)}finally{mt=e,mt===0&&(Wd=fe()+500,ky&&La())}}function yc(n){fa!==null&&fa.tag===0&&!(mt&6)&&du();var t=mt;mt|=1;var e=Hi.transition,i=Pt;try{if(Hi.transition=null,Pt=1,n)return n()}finally{Pt=i,Hi.transition=e,mt=t,!(mt&6)&&La()}}function T1(){ui=Yc.current,Ht(Yc)}function cc(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,wN(e)),xe!==null)for(e=xe.return;e!==null;){var i=e;switch(o1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&x0();break;case 3:Hd(),Ht(On),Ht(un),m1();break;case 5:p1(i);break;case 4:Hd();break;case 13:Ht(Jt);break;case 19:Ht(Jt);break;case 10:u1(i.type._context);break;case 22:case 23:T1()}e=e.return}if(Oe=n,xe=n=Sa(n.current,null),Qe=ui=t,Te=0,vf=null,A1=My=gc=0,jn=Yh=null,Xa!==null){for(t=0;t<Xa.length;t++)if(e=Xa[t],i=e.interleaved,i!==null){e.interleaved=null;var s=i.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}e.pending=i}Xa=null}return n}function yk(n,t){do{var e=xe;try{if(c1(),wg.current=P0,k0){for(var i=te.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}k0=!1}if(mc=0,Fe=Ee=te=null,qh=!1,mf=0,S1.current=null,e===null||e.return===null){Te=1,vf=t,xe=null;break}t:{var r=n,o=e.return,l=e,c=t;if(t=Qe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=dA(o);if(p!==null){p.flags&=-257,hA(p,o,l,r,t),p.mode&1&&uA(r,u,t),t=p,c=u;var x=t.updateQueue;if(x===null){var y=new Set;y.add(c),t.updateQueue=y}else x.add(c);break t}else{if(!(t&1)){uA(r,u,t),k1();break t}c=Error(B(426))}}else if(Xt&&l.mode&1){var A=dA(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),hA(A,o,l,r,t),a1($d(c,l));break t}}r=c=$d(c,l),Te!==4&&(Te=2),Yh===null?Yh=[r]:Yh.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var g=tk(r,c,t);sA(r,g);break t;case 1:l=c;var w=r.type,b=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ba===null||!ba.has(b)))){r.flags|=65536,t&=-t,r.lanes|=t;var E=ek(r,l,t);sA(r,E);break t}}r=r.return}while(r!==null)}bk(e)}catch(T){t=T,xe===e&&e!==null&&(xe=e=e.return);continue}break}while(!0)}function vk(){var n=_0.current;return _0.current=P0,n===null?P0:n}function k1(){(Te===0||Te===3||Te===2)&&(Te=4),Oe===null||!(gc&268435455)&&!(My&268435455)||go(Oe,Qe)}function N0(n,t){var e=mt;mt|=2;var i=vk();(Oe!==n||Qe!==t)&&(ir=null,cc(n,t));do try{GN();break}catch(s){yk(n,s)}while(!0);if(c1(),mt=e,_0.current=i,xe!==null)throw Error(B(261));return Oe=null,Qe=0,Te}function GN(){for(;xe!==null;)xk(xe)}function qN(){for(;xe!==null&&!vM();)xk(xe)}function xk(n){var t=Sk(n.alternate,n,ui);n.memoizedProps=n.pendingProps,t===null?bk(n):xe=t,S1.current=null}function bk(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=zN(e,t),e!==null){e.flags&=32767,xe=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Te=6,xe=null;return}}else if(e=BN(e,t,ui),e!==null){xe=e;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=n}while(t!==null);Te===0&&(Te=5)}function Oa(n,t,e){var i=Pt,s=Hi.transition;try{Hi.transition=null,Pt=1,XN(n,t,e,i)}finally{Hi.transition=s,Pt=i}return null}function XN(n,t,e,i){do du();while(fa!==null);if(mt&6)throw Error(B(327));e=n.finishedWork;var s=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(B(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(PM(n,r),n===Oe&&(xe=Oe=null,Qe=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||tg||(tg=!0,Ak(f0,function(){return du(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Hi.transition,Hi.transition=null;var o=Pt;Pt=1;var l=mt;mt|=4,S1.current=null,UN(n,e),pk(e,n),pN(Cx),m0=!!Ax,Cx=Ax=null,n.current=e,HN(e),xM(),mt=l,Pt=o,Hi.transition=r}else n.current=e;if(tg&&(tg=!1,fa=n,M0=s),r=n.pendingLanes,r===0&&(ba=null),SM(e.stateNode),zn(n,fe()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)s=t[e],i(s.value,{componentStack:s.stack,digest:s.digest});if(D0)throw D0=!1,n=$x,$x=null,n;return M0&1&&n.tag!==0&&du(),r=n.pendingLanes,r&1?n===Wx?Qh++:(Qh=0,Wx=n):Qh=0,La(),null}function du(){if(fa!==null){var n=tT(M0),t=Hi.transition,e=Pt;try{if(Hi.transition=null,Pt=16>n?16:n,fa===null)var i=!1;else{if(n=fa,fa=null,M0=0,mt&6)throw Error(B(331));var s=mt;for(mt|=4,X=n.current;X!==null;){var r=X,o=r.child;if(X.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:Xh(8,d,r)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,p=d.return;if(dk(d),d===u){X=null;break}if(f!==null){f.return=p,X=f;break}X=p}}}var x=r.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var A=y.sibling;y.sibling=null,y=A}while(y!==null)}}X=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,X=o;else t:for(;X!==null;){if(r=X,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Xh(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,X=g;break t}X=r.return}}var w=n.current;for(X=w;X!==null;){o=X;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,X=b;else t:for(o=w;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dy(9,l)}}catch(T){le(l,l.return,T)}if(l===o){X=null;break t}var E=l.sibling;if(E!==null){E.return=l.return,X=E;break t}X=l.return}}if(mt=s,La(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(Sy,n)}catch{}i=!0}return i}finally{Pt=e,Hi.transition=t}}return!1}function EA(n,t,e){t=$d(e,t),t=tk(n,t,1),n=xa(n,t,1),t=wn(),n!==null&&(Em(n,1,t),zn(n,t))}function le(n,t,e){if(n.tag===3)EA(n,n,e);else for(;t!==null;){if(t.tag===3){EA(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ba===null||!ba.has(i))){n=$d(e,n),n=ek(t,n,1),t=xa(t,n,1),n=wn(),t!==null&&(Em(t,1,n),zn(t,n));break}}t=t.return}}function YN(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=wn(),n.pingedLanes|=n.suspendedLanes&e,Oe===n&&(Qe&e)===e&&(Te===4||Te===3&&(Qe&130023424)===Qe&&500>fe()-C1?cc(n,0):A1|=e),zn(n,t)}function wk(n,t){t===0&&(n.mode&1?(t=$m,$m<<=1,!($m&130023424)&&($m=4194304)):t=1);var e=wn();n=eo(n,t),n!==null&&(Em(n,t,e),zn(n,e))}function QN(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),wk(n,e)}function KN(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(t),wk(n,e)}var Sk;Sk=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||On.current)Fn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return Fn=!1,ON(n,t,e);Fn=!!(n.flags&131072)}else Fn=!1,Xt&&t.flags&1048576&&TT(t,S0,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ag(n,t),n=t.pendingProps;var s=zd(t,un.current);uu(t,e),s=y1(null,t,i,n,s,e);var r=v1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bn(i)?(r=!0,b0(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,h1(t),s.updater=_y,t.stateNode=s,s._reactInternals=t,Lx(t,i,n,e),t=jx(null,t,i,!0,r,e)):(t.tag=0,Xt&&r&&r1(t),xn(null,t,s,e),t=t.child),t;case 16:i=t.elementType;t:{switch(Ag(n,t),n=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=ZN(i),n=Ji(i,n),s){case 0:t=Ix(null,t,i,n,e);break t;case 1:t=mA(null,t,i,n,e);break t;case 11:t=fA(null,t,i,n,e);break t;case 14:t=pA(null,t,i,Ji(i.type,n),e);break t}throw Error(B(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Ji(i,s),Ix(n,t,i,s,e);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Ji(i,s),mA(n,t,i,s,e);case 3:t:{if(rk(t),n===null)throw Error(B(387));i=t.pendingProps,r=t.memoizedState,s=r.element,NT(n,t),E0(t,i,null,e);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=$d(Error(B(423)),t),t=gA(n,t,i,e,s);break t}else if(i!==s){s=$d(Error(B(424)),t),t=gA(n,t,i,e,s);break t}else for(fi=va(t.stateNode.containerInfo.firstChild),mi=t,Xt=!0,hs=null,e=DT(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Vd(),i===s){t=no(n,t,e);break t}xn(n,t,i,e)}t=t.child}return t;case 5:return LT(t),n===null&&Dx(t),i=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,Ex(i,s)?o=null:r!==null&&Ex(i,r)&&(t.flags|=32),sk(n,t),xn(n,t,o,e),t.child;case 6:return n===null&&Dx(t),null;case 13:return ok(n,t,e);case 4:return f1(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=Ud(t,null,i,e):xn(n,t,i,e),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Ji(i,s),fA(n,t,i,s,e);case 7:return xn(n,t,t.pendingProps,e),t.child;case 8:return xn(n,t,t.pendingProps.children,e),t.child;case 12:return xn(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,Bt(A0,i._currentValue),i._currentValue=o,r!==null)if(gs(r.value,o)){if(r.children===s.children&&!On.current){t=no(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=qr(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),Mx(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(B(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),Mx(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}xn(n,t,s.children,e),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,uu(t,e),s=Wi(s),i=i(s),t.flags|=1,xn(n,t,i,e),t.child;case 14:return i=t.type,s=Ji(i,t.pendingProps),s=Ji(i.type,s),pA(n,t,i,s,e);case 15:return nk(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Ji(i,s),Ag(n,t),t.tag=1,Bn(i)?(n=!0,b0(t)):n=!1,uu(t,e),ZT(t,i,s),Lx(t,i,s,e),jx(null,t,i,!0,n,e);case 19:return ak(n,t,e);case 22:return ik(n,t,e)}throw Error(B(156,t.tag))};function Ak(n,t){return QE(n,t)}function JN(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(n,t,e,i){return new JN(n,t,e,i)}function P1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ZN(n){if(typeof n=="function")return P1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===qw)return 11;if(n===Xw)return 14}return 2}function Sa(n,t){var e=n.alternate;return e===null?(e=Ui(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function Tg(n,t,e,i,s,r){var o=2;if(i=n,typeof n=="function")P1(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case Bc:return uc(e.children,s,r,t);case Gw:o=8,s|=8;break;case ix:return n=Ui(12,e,t,s|2),n.elementType=ix,n.lanes=r,n;case sx:return n=Ui(13,e,t,s),n.elementType=sx,n.lanes=r,n;case rx:return n=Ui(19,e,t,s),n.elementType=rx,n.lanes=r,n;case LE:return Ny(e,s,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ME:o=10;break t;case NE:o=9;break t;case qw:o=11;break t;case Xw:o=14;break t;case ho:o=16,i=null;break t}throw Error(B(130,n==null?n:typeof n,""))}return t=Ui(o,e,t,s),t.elementType=n,t.type=i,t.lanes=r,t}function uc(n,t,e,i){return n=Ui(7,n,i,t),n.lanes=e,n}function Ny(n,t,e,i){return n=Ui(22,n,i,t),n.elementType=LE,n.lanes=e,n.stateNode={isHidden:!1},n}function Dv(n,t,e){return n=Ui(6,n,null,t),n.lanes=e,n}function Mv(n,t,e){return t=Ui(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function tL(n,t,e,i,s){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dv(0),this.expirationTimes=dv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dv(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _1(n,t,e,i,s,r,o,l,c){return n=new tL(n,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Ui(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},h1(r),n}function eL(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oc,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function Ck(n){if(!n)return Ea;n=n._reactInternals;t:{if(Sc(n)!==n||n.tag!==1)throw Error(B(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Bn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(B(171))}if(n.tag===1){var e=n.type;if(Bn(e))return CT(n,e,t)}return t}function Ek(n,t,e,i,s,r,o,l,c){return n=_1(e,i,!0,n,s,r,o,l,c),n.context=Ck(null),e=n.current,i=wn(),s=wa(e),r=qr(i,s),r.callback=t??null,xa(e,r,s),n.current.lanes=s,Em(n,s,i),zn(n,i),n}function Ly(n,t,e,i){var s=t.current,r=wn(),o=wa(s);return e=Ck(e),t.context===null?t.context=e:t.pendingContext=e,t=qr(r,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=xa(s,t,o),n!==null&&(ms(n,s,o,r),bg(n,s,o)),o}function L0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function TA(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function D1(n,t){TA(n,t),(n=n.alternate)&&TA(n,t)}function nL(){return null}var Tk=typeof reportError=="function"?reportError:function(n){console.error(n)};function M1(n){this._internalRoot=n}Ry.prototype.render=M1.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(B(409));Ly(n,t,null,null)};Ry.prototype.unmount=M1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;yc(function(){Ly(null,n,null,null)}),t[to]=null}};function Ry(n){this._internalRoot=n}Ry.prototype.unstable_scheduleHydration=function(n){if(n){var t=iT();n={blockedOn:null,target:n,priority:t};for(var e=0;e<mo.length&&t!==0&&t<mo[e].priority;e++);mo.splice(e,0,n),e===0&&rT(n)}};function N1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Iy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kA(){}function iL(n,t,e,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=L0(o);r.call(u)}}var o=Ek(t,i,n,0,null,!1,!1,"",kA);return n._reactRootContainer=o,n[to]=o.current,uf(n.nodeType===8?n.parentNode:n),yc(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var u=L0(c);l.call(u)}}var c=_1(n,0,!1,null,null,!1,!1,"",kA);return n._reactRootContainer=c,n[to]=c.current,uf(n.nodeType===8?n.parentNode:n),yc(function(){Ly(t,c,e,i)}),c}function jy(n,t,e,i,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var c=L0(o);l.call(c)}}Ly(t,o,n,s)}else o=iL(e,t,n,s,i);return L0(o)}eT=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=vh(t.pendingLanes);e!==0&&(Kw(t,e|1),zn(t,fe()),!(mt&6)&&(Wd=fe()+500,La()))}break;case 13:yc(function(){var i=eo(n,1);if(i!==null){var s=wn();ms(i,n,1,s)}}),D1(n,1)}};Jw=function(n){if(n.tag===13){var t=eo(n,134217728);if(t!==null){var e=wn();ms(t,n,134217728,e)}D1(n,134217728)}};nT=function(n){if(n.tag===13){var t=wa(n),e=eo(n,t);if(e!==null){var i=wn();ms(e,n,t,i)}D1(n,t)}};iT=function(){return Pt};sT=function(n,t){var e=Pt;try{return Pt=n,t()}finally{Pt=e}};mx=function(n,t,e){switch(t){case"input":if(lx(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=Ty(i);if(!s)throw Error(B(90));IE(i),lx(i,s)}}}break;case"textarea":FE(n,e);break;case"select":t=e.value,t!=null&&ou(n,!!e.multiple,t,!1)}};$E=E1;WE=yc;var sL={usingClientEntryPoint:!1,Events:[km,Hc,Ty,UE,HE,E1]},lh={findFiberByHostInstance:qa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rL={bundleType:lh.bundleType,version:lh.version,rendererPackageName:lh.rendererPackageName,rendererConfig:lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=XE(n),n===null?null:n.stateNode},findFiberByHostInstance:lh.findFiberByHostInstance||nL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{Sy=eg.inject(rL),Xs=eg}catch{}}xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sL;xi.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N1(t))throw Error(B(200));return eL(n,t,null,e)};xi.createRoot=function(n,t){if(!N1(n))throw Error(B(299));var e=!1,i="",s=Tk;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_1(n,1,!1,null,null,e,!1,i,s),n[to]=t.current,uf(n.nodeType===8?n.parentNode:n),new M1(t)};xi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(B(188)):(n=Object.keys(n).join(","),Error(B(268,n)));return n=XE(t),n=n===null?null:n.stateNode,n};xi.flushSync=function(n){return yc(n)};xi.hydrate=function(n,t,e){if(!Iy(t))throw Error(B(200));return jy(null,n,t,!0,e)};xi.hydrateRoot=function(n,t,e){if(!N1(n))throw Error(B(405));var i=e!=null&&e.hydratedSources||null,s=!1,r="",o=Tk;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=Ek(t,null,n,1,e??null,s,!1,r,o),n[to]=t.current,uf(n),i)for(n=0;n<i.length;n++)e=i[n],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new Ry(t)};xi.render=function(n,t,e){if(!Iy(t))throw Error(B(200));return jy(null,n,t,!1,e)};xi.unmountComponentAtNode=function(n){if(!Iy(n))throw Error(B(40));return n._reactRootContainer?(yc(function(){jy(null,null,n,!1,function(){n._reactRootContainer=null,n[to]=null})}),!0):!1};xi.unstable_batchedUpdates=E1;xi.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!Iy(e))throw Error(B(200));if(n==null||n._reactInternals===void 0)throw Error(B(38));return jy(n,t,e,!1,i)};xi.version="18.3.1-next-f1338f8080-20240426";function kk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kk)}catch(n){console.error(n)}}kk(),kE.exports=xi;var oL=kE.exports,PA=oL;ex.createRoot=PA.createRoot,ex.hydrateRoot=PA.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xf(){return xf=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},xf.apply(this,arguments)}var pa;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(pa||(pa={}));const _A="popstate";function aL(n){n===void 0&&(n={});function t(i,s){let{pathname:r,search:o,hash:l}=i.location;return Xx("",{pathname:r,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:Pk(s)}return cL(t,e,null,n)}function Pe(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function L1(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lL(){return Math.random().toString(36).substr(2,8)}function DA(n,t){return{usr:n.state,key:n.key,idx:t}}function Xx(n,t,e,i){return e===void 0&&(e=null),xf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?Zd(t):t,{state:e,key:t&&t.key||i||lL()})}function Pk(n){let{pathname:t="/",search:e="",hash:i=""}=n;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Zd(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substr(e),n=n.substr(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substr(i),n=n.substr(0,i)),n&&(t.pathname=n)}return t}function cL(n,t,e,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,l=pa.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(xf({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=pa.Pop;let A=d(),g=A==null?null:A-u;u=A,c&&c({action:l,location:y.location,delta:g})}function f(A,g){l=pa.Push;let w=Xx(y.location,A,g);u=d()+1;let b=DA(w,u),E=y.createHref(w);try{o.pushState(b,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}r&&c&&c({action:l,location:y.location,delta:1})}function p(A,g){l=pa.Replace;let w=Xx(y.location,A,g);u=d();let b=DA(w,u),E=y.createHref(w);o.replaceState(b,"",E),r&&c&&c({action:l,location:y.location,delta:0})}function x(A){let g=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof A=="string"?A:Pk(A);return w=w.replace(/ $/,"%20"),Pe(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let y={get action(){return l},get location(){return n(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(_A,h),c=A,()=>{s.removeEventListener(_A,h),c=null}},createHref(A){return t(s,A)},createURL:x,encodeLocation(A){let g=x(A);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(A){return o.go(A)}};return y}var MA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(MA||(MA={}));function uL(n,t,e){return e===void 0&&(e="/"),dL(n,t,e)}function dL(n,t,e,i){let s=typeof t=="string"?Zd(t):t,r=Mk(s.pathname||"/",e);if(r==null)return null;let o=_k(n);hL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=CL(r);l=wL(o[c],u)}return l}function _k(n,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let s=(r,o,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(Pe(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let u=dc([i,c.relativePath]),d=e.concat(c);r.children&&r.children.length>0&&(Pe(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_k(r.children,t,d,u)),!(r.path==null&&!r.index)&&t.push({path:u,score:xL(u,r.index),routesMeta:d})};return n.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))s(r,o);else for(let c of Dk(r.path))s(r,o,c)}),t}function Dk(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),r=e.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=Dk(i.join("/")),l=[];return l.push(...o.map(c=>c===""?r:[r,c].join("/"))),s&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function hL(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:bL(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const fL=/^:[\w-]+$/,pL=3,mL=2,gL=1,yL=10,vL=-2,NA=n=>n==="*";function xL(n,t){let e=n.split("/"),i=e.length;return e.some(NA)&&(i+=vL),t&&(i+=mL),e.filter(s=>!NA(s)).reduce((s,r)=>s+(fL.test(r)?pL:r===""?gL:yL),i)}function bL(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function wL(n,t,e){let{routesMeta:i}=n,s={},r="/",o=[];for(let l=0;l<i.length;++l){let c=i[l],u=l===i.length-1,d=r==="/"?t:t.slice(r.length)||"/",h=SL({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:dc([r,h.pathname]),pathnameBase:ML(dc([r,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(r=dc([r,h.pathnameBase]))}return o}function SL(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=AL(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=l[h]||"";o=r.slice(0,r.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[h];return p&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:n}}function AL(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),L1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function CL(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return L1(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function Mk(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}const EL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TL=n=>EL.test(n);function kL(n,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?Zd(n):n,r;if(e)if(TL(e))r=e;else{if(e.includes("//")){let o=e;e=e.replace(/\/\/+/g,"/"),L1(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+e))}e.startsWith("/")?r=LA(e.substring(1),"/"):r=LA(e,t)}else r=t;return{pathname:r,search:NL(i),hash:LL(s)}}function LA(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Nv(n,t,e,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PL(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function _L(n,t){let e=PL(n);return t?e.map((i,s)=>s===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function DL(n,t,e,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Zd(n):(s=xf({},n),Pe(!s.pathname||!s.pathname.includes("?"),Nv("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),Nv("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),Nv("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,l;if(o==null)l=e;else{let h=t.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=kL(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(r||o===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const dc=n=>n.join("/").replace(/\/\/+/g,"/"),ML=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function RL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Nk=["post","put","patch","delete"];new Set(Nk);const IL=["get",...Nk];new Set(IL);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},bf.apply(this,arguments)}const R1=N.createContext(null),jL=N.createContext(null),Fy=N.createContext(null),Oy=N.createContext(null),Ac=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Lk=N.createContext(null);function By(){return N.useContext(Oy)!=null}function I1(){return By()||Pe(!1),N.useContext(Oy).location}function Rk(n){N.useContext(Fy).static||N.useLayoutEffect(n)}function Xi(){let{isDataRoute:n}=N.useContext(Ac);return n?YL():FL()}function FL(){By()||Pe(!1);let n=N.useContext(R1),{basename:t,future:e,navigator:i}=N.useContext(Fy),{matches:s}=N.useContext(Ac),{pathname:r}=I1(),o=JSON.stringify(_L(s,e.v7_relativeSplatPath)),l=N.useRef(!1);return Rk(()=>{l.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){i.go(u);return}let h=DL(u,JSON.parse(o),r,d.relative==="path");n==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:dc([t,h.pathname])),(d.replace?i.replace:i.push)(h,d.state,d)},[t,i,o,r,n])}function zy(){let{matches:n}=N.useContext(Ac),t=n[n.length-1];return t?t.params:{}}function OL(n,t){return BL(n,t)}function BL(n,t,e,i){By()||Pe(!1);let{navigator:s}=N.useContext(Fy),{matches:r}=N.useContext(Ac),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=I1(),d;if(t){var h;let A=typeof t=="string"?Zd(t):t;c==="/"||(h=A.pathname)!=null&&h.startsWith(c)||Pe(!1),d=A}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let A=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(A.length).join("/")}let x=uL(n,{pathname:p}),y=$L(x&&x.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:dc([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:dc([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),r,e,i);return t&&y?N.createElement(Oy.Provider,{value:{location:bf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:pa.Pop}},y):y}function zL(){let n=XL(),t=RL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),e?N.createElement("pre",{style:s},e):null,null)}const VL=N.createElement(zL,null);class UL extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(Ac.Provider,{value:this.props.routeContext},N.createElement(Lk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HL(n){let{routeContext:t,match:e,children:i}=n,s=N.useContext(R1);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Ac.Provider,{value:t},i)}function $L(n,t,e,i){var s;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),n==null){var r;if(!e)return null;if(e.errors)n=e.matches;else if((r=i)!=null&&r.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let o=n,l=(s=e)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Pe(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(e&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=e,x=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,x=!1,y=null,A=null;e&&(p=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||VL,c&&(u<0&&f===0?(QL("route-fallback"),x=!0,A=null):u===f&&(x=!0,A=h.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,f+1)),w=()=>{let b;return p?b=y:x?b=A:h.route.Component?b=N.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,N.createElement(HL,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:e!=null},children:b})};return e&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(UL,{location:e.location,revalidation:e.revalidation,component:y,error:p,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var Ik=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Ik||{}),jk=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(jk||{});function WL(n){let t=N.useContext(R1);return t||Pe(!1),t}function GL(n){let t=N.useContext(jL);return t||Pe(!1),t}function qL(n){let t=N.useContext(Ac);return t||Pe(!1),t}function Fk(n){let t=qL(),e=t.matches[t.matches.length-1];return e.route.id||Pe(!1),e.route.id}function XL(){var n;let t=N.useContext(Lk),e=GL(),i=Fk();return t!==void 0?t:(n=e.errors)==null?void 0:n[i]}function YL(){let{router:n}=WL(Ik.UseNavigateStable),t=Fk(jk.UseNavigateStable),e=N.useRef(!1);return Rk(()=>{e.current=!0}),N.useCallback(function(s,r){r===void 0&&(r={}),e.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,bf({fromRouteId:t},r)))},[n,t])}const RA={};function QL(n,t,e){RA[n]||(RA[n]=!0)}function KL(n,t){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Un(n){Pe(!1)}function JL(n){let{basename:t="/",children:e=null,location:i,navigationType:s=pa.Pop,navigator:r,static:o=!1,future:l}=n;By()&&Pe(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:r,static:o,future:bf({v7_relativeSplatPath:!1},l)}),[c,l,r,o]);typeof i=="string"&&(i=Zd(i));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:x="default"}=i,y=N.useMemo(()=>{let A=Mk(d,c);return A==null?null:{location:{pathname:A,search:h,hash:f,state:p,key:x},navigationType:s}},[c,d,h,f,p,x,s]);return y==null?null:N.createElement(Fy.Provider,{value:u},N.createElement(Oy.Provider,{children:e,value:y}))}function ZL(n){let{children:t,location:e}=n;return OL(Yx(t),e)}new Promise(()=>{});function Yx(n,t){t===void 0&&(t=[]);let e=[];return N.Children.forEach(n,(i,s)=>{if(!N.isValidElement(i))return;let r=[...t,s];if(i.type===N.Fragment){e.push.apply(e,Yx(i.props.children,r));return}i.type!==Un&&Pe(!1),!i.props.index||!i.props.children||Pe(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Yx(i.props.children,r)),e.push(o)}),e}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tR="6";try{window.__reactRouterVersion=tR}catch{}const eR="startTransition",IA=YD[eR];function nR(n){let{basename:t,children:e,future:i,window:s}=n,r=N.useRef();r.current==null&&(r.current=aL({window:s,v5Compat:!0}));let o=r.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},d=N.useCallback(h=>{u&&IA?IA(()=>c(h)):c(h)},[c,u]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>KL(i),[i]),N.createElement(JL,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,future:i})}var jA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(jA||(jA={}));var FA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(FA||(FA={}));const Ok=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Vy=N.createContext({}),j1=N.createContext(null),Uy=typeof document<"u",iR=Uy?N.useLayoutEffect:N.useEffect,Bk=N.createContext({strict:!1}),F1=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),sR="framerAppearId",zk="data-"+F1(sR);function rR(n,t,e,i){const{visualElement:s}=N.useContext(Vy),r=N.useContext(Bk),o=N.useContext(j1),l=N.useContext(Ok).reducedMotion,c=N.useRef();i=i||r.renderer,!c.current&&i&&(c.current=i(n,{visualState:t,parent:s,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;N.useInsertionEffect(()=>{u&&u.update(e,o)});const d=N.useRef(!!(e[zk]&&!window.HandoffComplete));return iR(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Qc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function oR(n,t,e){return N.useCallback(i=>{i&&n.mount&&n.mount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Qc(e)&&(e.current=i))},[t])}function wf(n){return typeof n=="string"||Array.isArray(n)}function Hy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const O1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],B1=["initial",...O1];function $y(n){return Hy(n.animate)||B1.some(t=>wf(n[t]))}function Vk(n){return!!($y(n)||n.variants)}function aR(n,t){if($y(n)){const{initial:e,animate:i}=n;return{initial:e===!1||wf(e)?e:void 0,animate:wf(i)?i:void 0}}return n.inherit!==!1?t:{}}function lR(n){const{initial:t,animate:e}=aR(n,N.useContext(Vy));return N.useMemo(()=>({initial:t,animate:e}),[OA(t),OA(e)])}function OA(n){return Array.isArray(n)?n.join(" "):n}const BA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sf={};for(const n in BA)Sf[n]={isEnabled:t=>BA[n].some(e=>!!t[e])};function cR(n){for(const t in n)Sf[t]={...Sf[t],...n[t]}}const Uk=N.createContext({}),Hk=N.createContext({}),uR=Symbol.for("motionComponentSymbol");function dR({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:i,Component:s}){n&&cR(n);function r(l,c){let u;const d={...N.useContext(Ok),...l,layoutId:hR(l)},{isStatic:h}=d,f=lR(l),p=i(l,h);if(!h&&Uy){f.visualElement=rR(s,p,d,t);const x=N.useContext(Hk),y=N.useContext(Bk).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,y,n,x))}return N.createElement(Vy.Provider,{value:f},u&&f.visualElement?N.createElement(u,{visualElement:f.visualElement,...d}):null,e(s,l,oR(p,f.visualElement,c),p,h,f.visualElement))}const o=N.forwardRef(r);return o[uR]=s,o}function hR({layoutId:n}){const t=N.useContext(Uk).id;return t&&n!==void 0?t+"-"+n:n}function fR(n){function t(i,s={}){return dR(n(i,s))}if(typeof Proxy>"u")return t;const e=new Map;return new Proxy(t,{get:(i,s)=>(e.has(s)||e.set(s,t(s)),e.get(s))})}const pR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function z1(n){return typeof n!="string"||n.includes("-")?!1:!!(pR.indexOf(n)>-1||/[A-Z]/.test(n))}const R0={};function mR(n){Object.assign(R0,n)}const _m=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cc=new Set(_m);function $k(n,{layout:t,layoutId:e}){return Cc.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!R0[n]||n==="opacity")}const Vn=n=>!!(n&&n.getVelocity),gR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yR=_m.length;function vR(n,{enableHardwareAcceleration:t=!0,allowTransformNone:e=!0},i,s){let r="";for(let o=0;o<yR;o++){const l=_m[o];if(n[l]!==void 0){const c=gR[l]||l;r+=`${c}(${n[l]}) `}}return t&&!n.z&&(r+="translateZ(0)"),r=r.trim(),s?r=s(n,i?"":r):e&&i&&(r="none"),r}const Wk=n=>t=>typeof t=="string"&&t.startsWith(n),Gk=Wk("--"),Qx=Wk("var(--"),xR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,bR=(n,t)=>t&&typeof n=="number"?t.transform(n):n,Ta=(n,t,e)=>Math.min(Math.max(e,n),t),Ec={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Kh={...Ec,transform:n=>Ta(0,1,n)},ng={...Ec,default:1},Jh=n=>Math.round(n*1e5)/1e5,Wy=/(-)?([\d]*\.?[\d])+/g,qk=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,wR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Dm(n){return typeof n=="string"}const Mm=n=>({test:t=>Dm(t)&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),co=Mm("deg"),Qs=Mm("%"),et=Mm("px"),SR=Mm("vh"),AR=Mm("vw"),zA={...Qs,parse:n=>Qs.parse(n)/100,transform:n=>Qs.transform(n*100)},VA={...Ec,transform:Math.round},Xk={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,size:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,rotate:co,rotateX:co,rotateY:co,rotateZ:co,scale:ng,scaleX:ng,scaleY:ng,scaleZ:ng,skew:co,skewX:co,skewY:co,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Kh,originX:zA,originY:zA,originZ:et,zIndex:VA,fillOpacity:Kh,strokeOpacity:Kh,numOctaves:VA};function V1(n,t,e,i){const{style:s,vars:r,transform:o,transformOrigin:l}=n;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(Gk(h)){r[h]=f;continue}const p=Xk[h],x=bR(f,p);if(Cc.has(h)){if(c=!0,o[h]=x,!d)continue;f!==(p.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=x):s[h]=x}if(t.transform||(c||i?s.transform=vR(n.transform,e,d,i):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=l;s.transformOrigin=`${h} ${f} ${p}`}}const U1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Yk(n,t,e){for(const i in t)!Vn(t[i])&&!$k(i,e)&&(n[i]=t[i])}function CR({transformTemplate:n},t,e){return N.useMemo(()=>{const i=U1();return V1(i,t,{enableHardwareAcceleration:!e},n),Object.assign({},i.vars,i.style)},[t])}function ER(n,t,e){const i=n.style||{},s={};return Yk(s,i,n),Object.assign(s,CR(n,t,e)),n.transformValues?n.transformValues(s):s}function TR(n,t,e){const i={},s=ER(n,t,e);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=s,i}const kR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function I0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||kR.has(n)}let Qk=n=>!I0(n);function PR(n){n&&(Qk=t=>t.startsWith("on")?!I0(t):n(t))}try{PR(require("@emotion/is-prop-valid").default)}catch{}function _R(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(Qk(s)||e===!0&&I0(s)||!t&&!I0(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function UA(n,t,e){return typeof n=="string"?n:et.transform(t+e*n)}function DR(n,t,e){const i=UA(t,n.x,n.width),s=UA(e,n.y,n.height);return`${i} ${s}`}const MR={offset:"stroke-dashoffset",array:"stroke-dasharray"},NR={offset:"strokeDashoffset",array:"strokeDasharray"};function LR(n,t,e=1,i=0,s=!0){n.pathLength=1;const r=s?MR:NR;n[r.offset]=et.transform(-i);const o=et.transform(t),l=et.transform(e);n[r.array]=`${o} ${l}`}function H1(n,{attrX:t,attrY:e,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(V1(n,u,d,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:x,dimensions:y}=n;p.transform&&(y&&(x.transform=p.transform),delete p.transform),y&&(s!==void 0||r!==void 0||x.transform)&&(x.transformOrigin=DR(y,s!==void 0?s:.5,r!==void 0?r:.5)),t!==void 0&&(p.x=t),e!==void 0&&(p.y=e),i!==void 0&&(p.scale=i),o!==void 0&&LR(p,o,l,c,!1)}const Kk=()=>({...U1(),attrs:{}}),$1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function RR(n,t,e,i){const s=N.useMemo(()=>{const r=Kk();return H1(r,t,{enableHardwareAcceleration:!1},$1(i),n.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};Yk(r,n.style,n),s.style={...r,...s.style}}return s}function IR(n=!1){return(e,i,s,{latestValues:r},o)=>{const c=(z1(e)?RR:TR)(i,r,o,e),d={..._R(i,typeof e=="string",n),...c,ref:s},{children:h}=i,f=N.useMemo(()=>Vn(h)?h.get():h,[h]);return N.createElement(e,{...d,children:f})}}function Jk(n,{style:t,vars:e},i,s){Object.assign(n.style,t,s&&s.getProjectionStyles(i));for(const r in e)n.style.setProperty(r,e[r])}const Zk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tP(n,t,e,i){Jk(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(Zk.has(s)?s:F1(s),t.attrs[s])}function W1(n,t){const{style:e}=n,i={};for(const s in e)(Vn(e[s])||t.style&&Vn(t.style[s])||$k(s,n))&&(i[s]=e[s]);return i}function eP(n,t){const e=W1(n,t);for(const i in n)if(Vn(n[i])||Vn(t[i])){const s=_m.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;e[s]=n[i]}return e}function G1(n,t,e,i={},s={}){return typeof t=="function"&&(t=t(e!==void 0?e:n.custom,i,s)),typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"&&(t=t(e!==void 0?e:n.custom,i,s)),t}function jR(n){const t=N.useRef(null);return t.current===null&&(t.current=n()),t.current}const j0=n=>Array.isArray(n),FR=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),OR=n=>j0(n)?n[n.length-1]||0:n;function kg(n){const t=Vn(n)?n.get():n;return FR(t)?t.toValue():t}function BR({scrapeMotionValuesFromProps:n,createRenderState:t,onMount:e},i,s,r){const o={latestValues:zR(i,s,r,n),renderState:t()};return e&&(o.mount=l=>e(i,l,o)),o}const nP=n=>(t,e)=>{const i=N.useContext(Vy),s=N.useContext(j1),r=()=>BR(n,t,i,s);return e?r():jR(r)};function zR(n,t,e,i){const s={},r=i(n,{});for(const f in r)s[f]=kg(r[f]);let{initial:o,animate:l}=n;const c=$y(n),u=Vk(n);t&&u&&!c&&n.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=e?e.initial===!1:!1;d=d||o===!1;const h=d?l:o;return h&&typeof h!="boolean"&&!Hy(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const x=G1(n,p);if(!x)return;const{transitionEnd:y,transition:A,...g}=x;for(const w in g){let b=g[w];if(Array.isArray(b)){const E=d?b.length-1:0;b=b[E]}b!==null&&(s[w]=b)}for(const w in y)s[w]=y[w]}),s}const pe=n=>n;class HA{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const e=this.order.indexOf(t);e!==-1&&(this.order.splice(e,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function VR(n){let t=new HA,e=new HA,i=0,s=!1,r=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&s,f=h?t:e;return u&&o.add(c),f.add(c)&&h&&s&&(i=t.order.length),c},cancel:c=>{e.remove(c),o.delete(c)},process:c=>{if(s){r=!0;return}if(s=!0,[t,e]=[e,t],e.clear(),i=t.order.length,i)for(let u=0;u<i;u++){const d=t.order[u];d(c),o.has(d)&&(l.schedule(d),n())}s=!1,r&&(r=!1,l.process(c))}};return l}const ig=["prepare","read","update","preRender","render","postRender"],UR=40;function HR(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=ig.reduce((h,f)=>(h[f]=VR(()=>e=!0),h),{}),o=h=>r[h].process(s),l=()=>{const h=performance.now();e=!1,s.delta=i?1e3/60:Math.max(Math.min(h-s.timestamp,UR),1),s.timestamp=h,s.isProcessing=!0,ig.forEach(o),s.isProcessing=!1,e&&t&&(i=!1,n(l))},c=()=>{e=!0,i=!0,s.isProcessing||n(l)};return{schedule:ig.reduce((h,f)=>{const p=r[f];return h[f]=(x,y=!1,A=!1)=>(e||c(),p.schedule(x,y,A)),h},{}),cancel:h=>ig.forEach(f=>r[f].cancel(h)),state:s,steps:r}}const{schedule:$t,cancel:io,state:ln,steps:Lv}=HR(typeof requestAnimationFrame<"u"?requestAnimationFrame:pe,!0),$R={useVisualState:nP({scrapeMotionValuesFromProps:eP,createRenderState:Kk,onMount:(n,t,{renderState:e,latestValues:i})=>{$t.read(()=>{try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}),$t.render(()=>{H1(e,i,{enableHardwareAcceleration:!1},$1(t.tagName),n.transformTemplate),tP(t,e)})}})},WR={useVisualState:nP({scrapeMotionValuesFromProps:W1,createRenderState:U1})};function GR(n,{forwardMotionProps:t=!1},e,i){return{...z1(n)?$R:WR,preloadedFeatures:e,useRender:IR(t),createVisualElement:i,Component:n}}function Gr(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}const iP=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Gy(n,t="page"){return{point:{x:n[t+"X"],y:n[t+"Y"]}}}const qR=n=>t=>iP(t)&&n(t,Gy(t));function Xr(n,t,e,i){return Gr(n,t,qR(e),i)}const XR=(n,t)=>e=>t(n(e)),Aa=(...n)=>n.reduce(XR);function sP(n){let t=null;return()=>{const e=()=>{t=null};return t===null?(t=n,e):!1}}const $A=sP("dragHorizontal"),WA=sP("dragVertical");function rP(n){let t=!1;if(n==="y")t=WA();else if(n==="x")t=$A();else{const e=$A(),i=WA();e&&i?t=()=>{e(),i()}:(e&&e(),i&&i())}return t}function oP(){const n=rP(!0);return n?(n(),!1):!0}class Ra{constructor(t){this.isMounted=!1,this.node=t}update(){}}function GA(n,t){const e="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),s=(r,o)=>{if(r.pointerType==="touch"||oP())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",t),l[i]&&$t.update(()=>l[i](r,o))};return Xr(n.current,e,s,{passive:!n.getProps()[i]})}class YR extends Ra{mount(){this.unmount=Aa(GA(this.node,!0),GA(this.node,!1))}unmount(){}}class QR extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Aa(Gr(this.node.current,"focus",()=>this.onFocus()),Gr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const aP=(n,t)=>t?n===t?!0:aP(n,t.parentElement):!1;function Rv(n,t){if(!t)return;const e=new PointerEvent("pointer"+n);t(e,Gy(e))}class KR extends Ra{constructor(){super(...arguments),this.removeStartListeners=pe,this.removeEndListeners=pe,this.removeAccessibleListeners=pe,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),r=Xr(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();$t.update(()=>{!h&&!aP(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(i.onTap||i.onPointerUp)}),o=Xr(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Aa(r,o),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=r=>{if(r.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Rv("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&$t.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Gr(this.node.current,"keyup",o),Rv("down",(l,c)=>{this.startPress(l,c)})},e=Gr(this.node.current,"keydown",t),i=()=>{this.isPressing&&Rv("cancel",(r,o)=>this.cancelPress(r,o))},s=Gr(this.node.current,"blur",i);this.removeAccessibleListeners=Aa(e,s)}}startPress(t,e){this.isPressing=!0;const{onTapStart:i,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&$t.update(()=>i(t,e))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!oP()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&$t.update(()=>i(t,e))}mount(){const t=this.node.getProps(),e=Xr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=Gr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Aa(e,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Kx=new WeakMap,Iv=new WeakMap,JR=n=>{const t=Kx.get(n.target);t&&t(n)},ZR=n=>{n.forEach(JR)};function tI({root:n,...t}){const e=n||document;Iv.has(e)||Iv.set(e,{});const i=Iv.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(ZR,{root:n,...t})),i[s]}function eI(n,t,e){const i=tI(t);return Kx.set(n,e),i.observe(n),()=>{Kx.delete(n),i.unobserve(n)}}const nI={some:0,all:1};class iI extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:nI[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return eI(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(sI(t,e))&&this.startObserver()}unmount(){}}function sI({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const rI={inView:{Feature:iI},tap:{Feature:KR},focus:{Feature:QR},hover:{Feature:YR}};function lP(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}function oI(n){const t={};return n.values.forEach((e,i)=>t[i]=e.get()),t}function aI(n){const t={};return n.values.forEach((e,i)=>t[i]=e.getVelocity()),t}function qy(n,t,e){const i=n.getProps();return G1(i,t,e!==void 0?e:i.custom,oI(n),aI(n))}let q1=pe;const hc=n=>n*1e3,Yr=n=>n/1e3,lI={current:!1},cP=n=>Array.isArray(n)&&typeof n[0]=="number";function uP(n){return!!(!n||typeof n=="string"&&dP[n]||cP(n)||Array.isArray(n)&&n.every(uP))}const bh=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,dP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bh([0,.65,.55,1]),circOut:bh([.55,0,1,.45]),backIn:bh([.31,.01,.66,-.59]),backOut:bh([.33,1.53,.69,.99])};function hP(n){if(n)return cP(n)?bh(n):Array.isArray(n)?n.map(hP):dP[n]}function cI(n,t,e,{delay:i=0,duration:s,repeat:r=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:e};c&&(u.offset=c);const d=hP(l);return Array.isArray(d)&&(u.easing=d),n.animate(u,{delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}function uI(n,{repeat:t,repeatType:e="loop"}){const i=t&&e!=="loop"&&t%2===1?0:n.length-1;return n[i]}const fP=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,dI=1e-7,hI=12;function fI(n,t,e,i,s){let r,o,l=0;do o=t+(e-t)/2,r=fP(o,i,s)-n,r>0?e=o:t=o;while(Math.abs(r)>dI&&++l<hI);return o}function Nm(n,t,e,i){if(n===t&&e===i)return pe;const s=r=>fI(r,0,1,n,e);return r=>r===0||r===1?r:fP(s(r),t,i)}const pI=Nm(.42,0,1,1),mI=Nm(0,0,.58,1),pP=Nm(.42,0,.58,1),gI=n=>Array.isArray(n)&&typeof n[0]!="number",mP=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,gP=n=>t=>1-n(1-t),X1=n=>1-Math.sin(Math.acos(n)),yP=gP(X1),yI=mP(X1),vP=Nm(.33,1.53,.69,.99),Y1=gP(vP),vI=mP(Y1),xI=n=>(n*=2)<1?.5*Y1(n):.5*(2-Math.pow(2,-10*(n-1))),bI={linear:pe,easeIn:pI,easeInOut:pP,easeOut:mI,circIn:X1,circInOut:yI,circOut:yP,backIn:Y1,backInOut:vI,backOut:vP,anticipate:xI},qA=n=>{if(Array.isArray(n)){q1(n.length===4);const[t,e,i,s]=n;return Nm(t,e,i,s)}else if(typeof n=="string")return bI[n];return n},Q1=(n,t)=>e=>!!(Dm(e)&&wR.test(e)&&e.startsWith(n)||t&&Object.prototype.hasOwnProperty.call(e,t)),xP=(n,t,e)=>i=>{if(!Dm(i))return i;const[s,r,o,l]=i.match(Wy);return{[n]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},wI=n=>Ta(0,255,n),jv={...Ec,transform:n=>Math.round(wI(n))},Qa={test:Q1("rgb","red"),parse:xP("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+jv.transform(n)+", "+jv.transform(t)+", "+jv.transform(e)+", "+Jh(Kh.transform(i))+")"};function SI(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Jx={test:Q1("#"),parse:SI,transform:Qa.transform},Kc={test:Q1("hsl","hue"),parse:xP("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Qs.transform(Jh(t))+", "+Qs.transform(Jh(e))+", "+Jh(Kh.transform(i))+")"},yn={test:n=>Qa.test(n)||Jx.test(n)||Kc.test(n),parse:n=>Qa.test(n)?Qa.parse(n):Kc.test(n)?Kc.parse(n):Jx.parse(n),transform:n=>Dm(n)?n:n.hasOwnProperty("red")?Qa.transform(n):Kc.transform(n)},Zt=(n,t,e)=>-e*n+e*t+n;function Fv(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function AI({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,r=0,o=0;if(!t)s=r=o=e;else{const l=e<.5?e*(1+t):e+t-e*t,c=2*e-l;s=Fv(c,l,n+1/3),r=Fv(c,l,n),o=Fv(c,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}const Ov=(n,t,e)=>{const i=n*n;return Math.sqrt(Math.max(0,e*(t*t-i)+i))},CI=[Jx,Qa,Kc],EI=n=>CI.find(t=>t.test(n));function XA(n){const t=EI(n);let e=t.parse(n);return t===Kc&&(e=AI(e)),e}const bP=(n,t)=>{const e=XA(n),i=XA(t),s={...e};return r=>(s.red=Ov(e.red,i.red,r),s.green=Ov(e.green,i.green,r),s.blue=Ov(e.blue,i.blue,r),s.alpha=Zt(e.alpha,i.alpha,r),Qa.transform(s))};function TI(n){var t,e;return isNaN(n)&&Dm(n)&&(((t=n.match(Wy))===null||t===void 0?void 0:t.length)||0)+(((e=n.match(qk))===null||e===void 0?void 0:e.length)||0)>0}const wP={regex:xR,countKey:"Vars",token:"${v}",parse:pe},SP={regex:qk,countKey:"Colors",token:"${c}",parse:yn.parse},AP={regex:Wy,countKey:"Numbers",token:"${n}",parse:Ec.parse};function Bv(n,{regex:t,countKey:e,token:i,parse:s}){const r=n.tokenised.match(t);r&&(n["num"+e]=r.length,n.tokenised=n.tokenised.replace(t,i),n.values.push(...r.map(s)))}function F0(n){const t=n.toString(),e={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return e.value.includes("var(--")&&Bv(e,wP),Bv(e,SP),Bv(e,AP),e}function CP(n){return F0(n).values}function EP(n){const{values:t,numColors:e,numVars:i,tokenised:s}=F0(n),r=t.length;return o=>{let l=s;for(let c=0;c<r;c++)c<i?l=l.replace(wP.token,o[c]):c<i+e?l=l.replace(SP.token,yn.transform(o[c])):l=l.replace(AP.token,Jh(o[c]));return l}}const kI=n=>typeof n=="number"?0:n;function PI(n){const t=CP(n);return EP(n)(t.map(kI))}const ka={test:TI,parse:CP,createTransformer:EP,getAnimatableNone:PI},TP=(n,t)=>e=>`${e>0?t:n}`;function kP(n,t){return typeof n=="number"?e=>Zt(n,t,e):yn.test(n)?bP(n,t):n.startsWith("var(")?TP(n,t):_P(n,t)}const PP=(n,t)=>{const e=[...n],i=e.length,s=n.map((r,o)=>kP(r,t[o]));return r=>{for(let o=0;o<i;o++)e[o]=s[o](r);return e}},_I=(n,t)=>{const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=kP(n[s],t[s]));return s=>{for(const r in i)e[r]=i[r](s);return e}},_P=(n,t)=>{const e=ka.createTransformer(t),i=F0(n),s=F0(t);return i.numVars===s.numVars&&i.numColors===s.numColors&&i.numNumbers>=s.numNumbers?Aa(PP(i.values,s.values),e):TP(n,t)},Af=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i},YA=(n,t)=>e=>Zt(n,t,e);function DI(n){return typeof n=="number"?YA:typeof n=="string"?yn.test(n)?bP:_P:Array.isArray(n)?PP:typeof n=="object"?_I:YA}function MI(n,t,e){const i=[],s=e||DI(n[0]),r=n.length-1;for(let o=0;o<r;o++){let l=s(n[o],n[o+1]);if(t){const c=Array.isArray(t)?t[o]||pe:t;l=Aa(c,l)}i.push(l)}return i}function DP(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const r=n.length;if(q1(r===t.length),r===1)return()=>t[0];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=MI(t,i,s),l=o.length,c=u=>{let d=0;if(l>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const h=Af(n[d],n[d+1],u);return o[d](h)};return e?u=>c(Ta(n[0],n[r-1],u)):c}function NI(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=Af(0,t,i);n.push(Zt(e,1,s))}}function LI(n){const t=[0];return NI(t,n.length-1),t}function RI(n,t){return n.map(e=>e*t)}function II(n,t){return n.map(()=>t||pP).splice(0,n.length-1)}function O0({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=gI(i)?i.map(qA):qA(i),r={done:!1,value:t[0]},o=RI(e&&e.length===t.length?e:LI(t),n),l=DP(o,t,{ease:Array.isArray(s)?s:II(t,s)});return{calculatedDuration:n,next:c=>(r.value=l(c),r.done=c>=n,r)}}function MP(n,t){return t?n*(1e3/t):0}const jI=5;function NP(n,t,e){const i=Math.max(t-jI,0);return MP(e-n(i),t-i)}const zv=.001,FI=.01,OI=10,BI=.05,zI=1;function VI({duration:n=800,bounce:t=.25,velocity:e=0,mass:i=1}){let s,r,o=1-t;o=Ta(BI,zI,o),n=Ta(FI,OI,Yr(n)),o<1?(s=u=>{const d=u*o,h=d*n,f=d-e,p=Zx(u,o),x=Math.exp(-h);return zv-f/p*x},r=u=>{const h=u*o*n,f=h*e+e,p=Math.pow(o,2)*Math.pow(u,2)*n,x=Math.exp(-h),y=Zx(Math.pow(u,2),o);return(-s(u)+zv>0?-1:1)*((f-p)*x)/y}):(s=u=>{const d=Math.exp(-u*n),h=(u-e)*n+1;return-zv+d*h},r=u=>{const d=Math.exp(-u*n),h=(e-u)*(n*n);return d*h});const l=5/n,c=HI(s,r,l);if(n=hc(n),isNaN(c))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(c,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const UI=12;function HI(n,t,e){let i=e;for(let s=1;s<UI;s++)i=i-n(i)/t(i);return i}function Zx(n,t){return n*Math.sqrt(1-t*t)}const $I=["duration","bounce"],WI=["stiffness","damping","mass"];function QA(n,t){return t.some(e=>n[e]!==void 0)}function GI(n){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!QA(n,WI)&&QA(n,$I)){const e=VI(n);t={...t,...e,mass:1},t.isResolvedFromDuration=!0}return t}function LP({keyframes:n,restDelta:t,restSpeed:e,...i}){const s=n[0],r=n[n.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=GI({...i,velocity:-Yr(i.velocity||0)}),p=h||0,x=c/(2*Math.sqrt(l*u)),y=r-s,A=Yr(Math.sqrt(l/u)),g=Math.abs(y)<5;e||(e=g?.01:2),t||(t=g?.005:.5);let w;if(x<1){const b=Zx(A,x);w=E=>{const T=Math.exp(-x*A*E);return r-T*((p+x*A*y)/b*Math.sin(b*E)+y*Math.cos(b*E))}}else if(x===1)w=b=>r-Math.exp(-A*b)*(y+(p+A*y)*b);else{const b=A*Math.sqrt(x*x-1);w=E=>{const T=Math.exp(-x*A*E),P=Math.min(b*E,300);return r-T*((p+x*A*y)*Math.sinh(P)+b*y*Math.cosh(P))/b}}return{calculatedDuration:f&&d||null,next:b=>{const E=w(b);if(f)o.done=b>=d;else{let T=p;b!==0&&(x<1?T=NP(w,b,E):T=0);const P=Math.abs(T)<=e,k=Math.abs(r-E)<=t;o.done=P&&k}return o.value=o.done?r:E,o}}}function KA({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=n[0],f={done:!1,value:h},p=_=>l!==void 0&&_<l||c!==void 0&&_>c,x=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let y=e*t;const A=h+y,g=o===void 0?A:o(A);g!==A&&(y=g-h);const w=_=>-y*Math.exp(-_/i),b=_=>g+w(_),E=_=>{const D=w(_),M=b(_);f.done=Math.abs(D)<=u,f.value=f.done?g:M};let T,P;const k=_=>{p(f.value)&&(T=_,P=LP({keyframes:[f.value,x(f.value)],velocity:NP(b,_,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:_=>{let D=!1;return!P&&T===void 0&&(D=!0,E(_),k(_)),T!==void 0&&_>T?P.next(_-T):(!D&&E(_),f)}}}const qI=n=>{const t=({timestamp:e})=>n(e);return{start:()=>$t.update(t,!0),stop:()=>io(t),now:()=>ln.isProcessing?ln.timestamp:performance.now()}},JA=2e4;function ZA(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<JA;)t+=e,i=n.next(t);return t>=JA?1/0:t}const XI={decay:KA,inertia:KA,tween:O0,keyframes:O0,spring:LP};function B0({autoplay:n=!0,delay:t=0,driver:e=qI,keyframes:i,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let p=1,x=!1,y,A;const g=()=>{A=new Promise(K=>{y=K})};g();let w;const b=XI[s]||O0;let E;b!==O0&&typeof i[0]!="number"&&(E=DP([0,100],i,{clamp:!1}),i=[0,100]);const T=b({...f,keyframes:i});let P;l==="mirror"&&(P=b({...f,keyframes:[...i].reverse(),velocity:-(f.velocity||0)}));let k="idle",_=null,D=null,M=null;T.calculatedDuration===null&&r&&(T.calculatedDuration=ZA(T));const{calculatedDuration:R}=T;let V=1/0,G=1/0;R!==null&&(V=R+o,G=V*(r+1)-o);let I=0;const F=K=>{if(D===null)return;p>0&&(D=Math.min(D,K)),p<0&&(D=Math.min(K-G/p,D)),_!==null?I=_:I=Math.round(K-D)*p;const Z=I-t*(p>=0?1:-1),ft=p>=0?Z<0:Z>G;I=Math.max(Z,0),k==="finished"&&_===null&&(I=G);let ie=I,wt=T;if(r){const Ia=Math.min(I,G)/V;let vs=Math.floor(Ia),dn=Ia%1;!dn&&Ia>=1&&(dn=1),dn===1&&vs--,vs=Math.min(vs,r+1),!!(vs%2)&&(l==="reverse"?(dn=1-dn,o&&(dn-=o/V)):l==="mirror"&&(wt=P)),ie=Ta(0,1,dn)*V}const St=ft?{done:!1,value:i[0]}:wt.next(ie);E&&(St.value=E(St.value));let{done:At}=St;!ft&&R!==null&&(At=p>=0?I>=G:I<=0);const th=_===null&&(k==="finished"||k==="running"&&At);return h&&h(St.value),th&&j(),St},O=()=>{w&&w.stop(),w=void 0},z=()=>{k="idle",O(),y(),g(),D=M=null},j=()=>{k="finished",d&&d(),O(),y()},q=()=>{if(x)return;w||(w=e(F));const K=w.now();c&&c(),_!==null?D=K-_:(!D||k==="finished")&&(D=K),k==="finished"&&g(),M=D,_=null,k="running",w.start()};n&&q();const Q={then(K,Z){return A.then(K,Z)},get time(){return Yr(I)},set time(K){K=hc(K),I=K,_!==null||!w||p===0?_=K:D=w.now()-K/p},get duration(){const K=T.calculatedDuration===null?ZA(T):T.calculatedDuration;return Yr(K)},get speed(){return p},set speed(K){K===p||!w||(p=K,Q.time=Yr(I))},get state(){return k},play:q,pause:()=>{k="paused",_=I},stop:()=>{x=!0,k!=="idle"&&(k="idle",u&&u(),z())},cancel:()=>{M!==null&&F(M),z()},complete:()=>{k="finished"},sample:K=>(D=0,F(K))};return Q}function YI(n){let t;return()=>(t===void 0&&(t=n()),t)}const QI=YI(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),KI=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sg=10,JI=2e4,ZI=(n,t)=>t.type==="spring"||n==="backgroundColor"||!uP(t.ease);function tj(n,t,{onUpdate:e,onComplete:i,...s}){if(!(QI()&&KI.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(b=>{l=b})};d();let{keyframes:h,duration:f=300,ease:p,times:x}=s;if(ZI(t,s)){const b=B0({...s,repeat:0,delay:0});let E={done:!1,value:h[0]};const T=[];let P=0;for(;!E.done&&P<JI;)E=b.sample(P),T.push(E.value),P+=sg;x=void 0,h=T,f=P-sg,p="linear"}const y=cI(n.owner.current,t,h,{...s,duration:f,ease:p,times:x}),A=()=>{u=!1,y.cancel()},g=()=>{u=!0,$t.update(A),l(),d()};return y.onfinish=()=>{u||(n.set(uI(h,s)),i&&i(),g())},{then(b,E){return c.then(b,E)},attachTimeline(b){return y.timeline=b,y.onfinish=null,pe},get time(){return Yr(y.currentTime||0)},set time(b){y.currentTime=hc(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return Yr(f)},play:()=>{o||(y.play(),io(A))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const E=B0({...s,autoplay:!1});n.setWithVelocity(E.sample(b-sg).value,E.sample(b).value,sg)}g()},complete:()=>{u||y.finish()},cancel:g}}function ej({keyframes:n,delay:t,onUpdate:e,onComplete:i}){const s=()=>(e&&e(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:pe,pause:pe,stop:pe,then:r=>(r(),Promise.resolve()),cancel:pe,complete:pe});return t?B0({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const nj={type:"spring",stiffness:500,damping:25,restSpeed:10},ij=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),sj={type:"keyframes",duration:.8},rj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oj=(n,{keyframes:t})=>t.length>2?sj:Cc.has(n)?n.startsWith("scale")?ij(t[1]):nj:rj,tb=(n,t)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ka.test(t)||t==="0")&&!t.startsWith("url(")),aj=new Set(["brightness","contrast","saturate","opacity"]);function lj(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(Wy)||[];if(!i)return n;const s=e.replace(i,"");let r=aj.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+s+")"}const cj=/([a-z-]*)\(.*?\)/g,eb={...ka,getAnimatableNone:n=>{const t=n.match(cj);return t?t.map(lj).join(" "):n}},uj={...Xk,color:yn,backgroundColor:yn,outlineColor:yn,fill:yn,stroke:yn,borderColor:yn,borderTopColor:yn,borderRightColor:yn,borderBottomColor:yn,borderLeftColor:yn,filter:eb,WebkitFilter:eb},K1=n=>uj[n];function RP(n,t){let e=K1(n);return e!==eb&&(e=ka),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const IP=n=>/^0[^.\s]+$/.test(n);function dj(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||IP(n)}function hj(n,t,e,i){const s=tb(t,e);let r;Array.isArray(e)?r=[...e]:r=[null,e];const o=i.from!==void 0?i.from:n.get();let l;const c=[];for(let u=0;u<r.length;u++)r[u]===null&&(r[u]=u===0?o:r[u-1]),dj(r[u])&&c.push(u),typeof r[u]=="string"&&r[u]!=="none"&&r[u]!=="0"&&(l=r[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];r[d]=RP(t,l)}return r}function fj({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function J1(n,t){return n[t]||n.default||n}const pj={skipAnimations:!1},Z1=(n,t,e,i={})=>s=>{const r=J1(i,n)||{},o=r.delay||i.delay||0;let{elapsed:l=0}=i;l=l-hc(o);const c=hj(t,n,e,r),u=c[0],d=c[c.length-1],h=tb(n,u),f=tb(n,d);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...r,delay:-l,onUpdate:x=>{t.set(x),r.onUpdate&&r.onUpdate(x)},onComplete:()=>{s(),r.onComplete&&r.onComplete()}};if(fj(r)||(p={...p,...oj(n,p)}),p.duration&&(p.duration=hc(p.duration)),p.repeatDelay&&(p.repeatDelay=hc(p.repeatDelay)),!h||!f||lI.current||r.type===!1||pj.skipAnimations)return ej(p);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=tj(t,n,p);if(x)return x}return B0(p)};function z0(n){return!!(Vn(n)&&n.add)}const jP=n=>/^\-?\d*\.?\d+$/.test(n);function tS(n,t){n.indexOf(t)===-1&&n.push(t)}function eS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}class nS{constructor(){this.subscriptions=[]}add(t){return tS(this.subscriptions,t),()=>eS(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mj=n=>!isNaN(parseFloat(n));class gj{constructor(t,e={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,s=!0)=>{this.prev=this.current,this.current=i;const{delta:r,timestamp:o}=ln;this.lastUpdated!==o&&(this.timeDelta=r,this.lastUpdated=o,$t.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>$t.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=mj(this.current),this.owner=e.owner}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new nS);const i=this.events[t].add(e);return t==="change"?()=>{i(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,i){this.set(e),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?MP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gd(n,t){return new gj(n,t)}const FP=n=>t=>t.test(n),yj={test:n=>n==="auto",parse:n=>n},OP=[Ec,et,Qs,co,AR,SR,yj],ch=n=>OP.find(FP(n)),vj=[...OP,yn,ka],xj=n=>vj.find(FP(n));function bj(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Gd(e))}function wj(n,t){const e=qy(n,t);let{transitionEnd:i={},transition:s={},...r}=e?n.makeTargetAnimatable(e,!1):{};r={...r,...i};for(const o in r){const l=OR(r[o]);bj(n,o,l)}}function Sj(n,t,e){var i,s;const r=Object.keys(t).filter(l=>!n.hasValue(l)),o=r.length;if(o)for(let l=0;l<o;l++){const c=r[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(i=e[c])!==null&&i!==void 0?i:n.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(jP(d)||IP(d))?d=parseFloat(d):!xj(d)&&ka.test(u)&&(d=RP(c,u)),n.addValue(c,Gd(d,{owner:n})),e[c]===void 0&&(e[c]=d),d!==null&&n.setBaseTarget(c,d))}}function Aj(n,t){return t?(t[n]||t.default||t).from:void 0}function Cj(n,t,e){const i={};for(const s in n){const r=Aj(s,t);if(r!==void 0)i[s]=r;else{const o=e.getValue(s);o&&(i[s]=o.get())}}return i}function Ej({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function Tj(n,t){const e=n.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}else return e!==t}function BP(n,t,{delay:e=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...l}=n.makeTargetAnimatable(t);const c=n.getValue("willChange");i&&(r=i);const u=[],d=s&&n.animationState&&n.animationState.getState()[s];for(const h in l){const f=n.getValue(h),p=l[h];if(!f||p===void 0||d&&Ej(d,h))continue;const x={delay:e,elapsed:0,...J1(r||{},h)};if(window.HandoffAppearAnimations){const g=n.getProps()[zk];if(g){const w=window.HandoffAppearAnimations(g,h,f,$t);w!==null&&(x.elapsed=w,x.isHandoff=!0)}}let y=!x.isHandoff&&!Tj(f,p);if(x.type==="spring"&&(f.getVelocity()||x.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(Z1(h,f,p,n.shouldReduceMotion&&Cc.has(h)?{type:!1}:x));const A=f.animation;z0(c)&&(c.add(h),A.then(()=>c.remove(h))),u.push(A)}return o&&Promise.all(u).then(()=>{o&&wj(n,o)}),u}function nb(n,t,e={}){const i=qy(n,t,e.custom);let{transition:s=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(s=e.transitionOverride);const r=i?()=>Promise.all(BP(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return kj(n,t,u+c,d,h,e)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[r,o]:[o,r];return c().then(()=>u())}else return Promise.all([r(),o(e.delay)])}function kj(n,t,e=0,i=0,s=1,r){const o=[],l=(n.variantChildren.size-1)*i,c=s===1?(u=0)=>u*i:(u=0)=>l-u*i;return Array.from(n.variantChildren).sort(Pj).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(nb(u,t,{...r,delay:e+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Pj(n,t){return n.sortNodePosition(t)}function _j(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>nb(n,r,e));i=Promise.all(s)}else if(typeof t=="string")i=nb(n,t,e);else{const s=typeof t=="function"?qy(n,t,e.custom):t;i=Promise.all(BP(n,s,e))}return i.then(()=>n.notify("AnimationComplete",t))}const Dj=[...O1].reverse(),Mj=O1.length;function Nj(n){return t=>Promise.all(t.map(({animation:e,options:i})=>_j(n,e,i)))}function Lj(n){let t=Nj(n);const e=Ij();let i=!0;const s=(c,u)=>{const d=qy(n,u);if(d){const{transition:h,transitionEnd:f,...p}=d;c={...c,...p,...f}}return c};function r(c){t=c(n)}function o(c,u){const d=n.getProps(),h=n.getVariantContext(!0)||{},f=[],p=new Set;let x={},y=1/0;for(let g=0;g<Mj;g++){const w=Dj[g],b=e[w],E=d[w]!==void 0?d[w]:h[w],T=wf(E),P=w===u?b.isActive:null;P===!1&&(y=g);let k=E===h[w]&&E!==d[w]&&T;if(k&&i&&n.manuallyAnimateOnMount&&(k=!1),b.protectedKeys={...x},!b.isActive&&P===null||!E&&!b.prevProp||Hy(E)||typeof E=="boolean")continue;let D=Rj(b.prevProp,E)||w===u&&b.isActive&&!k&&T||g>y&&T,M=!1;const R=Array.isArray(E)?E:[E];let V=R.reduce(s,{});P===!1&&(V={});const{prevResolvedValues:G={}}=b,I={...G,...V},F=O=>{D=!0,p.has(O)&&(M=!0,p.delete(O)),b.needsAnimating[O]=!0};for(const O in I){const z=V[O],j=G[O];if(x.hasOwnProperty(O))continue;let q=!1;j0(z)&&j0(j)?q=!lP(z,j):q=z!==j,q?z!==void 0?F(O):p.add(O):z!==void 0&&p.has(O)?F(O):b.protectedKeys[O]=!0}b.prevProp=E,b.prevResolvedValues=V,b.isActive&&(x={...x,...V}),i&&n.blockInitialAnimation&&(D=!1),D&&(!k||M)&&f.push(...R.map(O=>({animation:O,options:{type:w,...c}})))}if(p.size){const g={};p.forEach(w=>{const b=n.getBaseTarget(w);b!==void 0&&(g[w]=b)}),f.push({animation:g})}let A=!!f.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?t(f):Promise.resolve()}function l(c,u,d){var h;if(e[c].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(p=>{var x;return(x=p.animationState)===null||x===void 0?void 0:x.setActive(c,u)}),e[c].isActive=u;const f=o(d,c);for(const p in e)e[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:r,getState:()=>e}}function Rj(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!lP(t,n):!1}function ja(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ij(){return{animate:ja(!0),whileInView:ja(),whileHover:ja(),whileTap:ja(),whileDrag:ja(),whileFocus:ja(),exit:ja()}}class jj extends Ra{constructor(t){super(t),t.animationState||(t.animationState=Lj(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Hy(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){}}let Fj=0;class Oj extends Ra{constructor(){super(...arguments),this.id=Fj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e,custom:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const r=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});e&&!t&&r.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Bj={animation:{Feature:jj},exit:{Feature:Oj}},tC=(n,t)=>Math.abs(n-t);function zj(n,t){const e=tC(n.x,t.x),i=tC(n.y,t.y);return Math.sqrt(e**2+i**2)}class zP{constructor(t,e,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Uv(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=zj(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:x}=h,{timestamp:y}=ln;this.history.push({...x,timestamp:y});const{onStart:A,onMove:g}=this.handlers;f||(A&&A(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Vv(f,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:x,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Uv(h.type==="pointercancel"?this.lastMoveEventInfo:Vv(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,A),x&&x(h,A)},!iP(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.contextWindow=s||window;const o=Gy(t),l=Vv(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=ln;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=e;d&&d(t,Uv(l,this.history)),this.removeListeners=Aa(Xr(this.contextWindow,"pointermove",this.handlePointerMove),Xr(this.contextWindow,"pointerup",this.handlePointerUp),Xr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function Vv(n,t){return t?{point:t(n.point)}:n}function eC(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Uv({point:n},t){return{point:n,delta:eC(n,VP(t)),offset:eC(n,Vj(t)),velocity:Uj(t,.1)}}function Vj(n){return n[0]}function VP(n){return n[n.length-1]}function Uj(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=VP(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>hc(t)));)e--;if(!i)return{x:0,y:0};const r=Yr(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function vi(n){return n.max-n.min}function ib(n,t=0,e=.01){return Math.abs(n-t)<=e}function nC(n,t,e,i=.5){n.origin=i,n.originPoint=Zt(t.min,t.max,n.origin),n.scale=vi(e)/vi(t),(ib(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Zt(e.min,e.max,n.origin)-n.originPoint,(ib(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Zh(n,t,e,i){nC(n.x,t.x,e.x,i?i.originX:void 0),nC(n.y,t.y,e.y,i?i.originY:void 0)}function iC(n,t,e){n.min=e.min+t.min,n.max=n.min+vi(t)}function Hj(n,t,e){iC(n.x,t.x,e.x),iC(n.y,t.y,e.y)}function sC(n,t,e){n.min=t.min-e.min,n.max=n.min+vi(t)}function tf(n,t,e){sC(n.x,t.x,e.x),sC(n.y,t.y,e.y)}function $j(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Zt(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Zt(e,n,i.max):Math.min(n,e)),n}function rC(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function Wj(n,{top:t,left:e,bottom:i,right:s}){return{x:rC(n.x,e,s),y:rC(n.y,t,i)}}function oC(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function Gj(n,t){return{x:oC(n.x,t.x),y:oC(n.y,t.y)}}function qj(n,t){let e=.5;const i=vi(n),s=vi(t);return s>i?e=Af(t.min,t.max-i,n.min):i>s&&(e=Af(n.min,n.max-s,t.min)),Ta(0,1,e)}function Xj(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const sb=.35;function Yj(n=sb){return n===!1?n=0:n===!0&&(n=sb),{x:aC(n,"left","right"),y:aC(n,"top","bottom")}}function aC(n,t,e){return{min:lC(n,t),max:lC(n,e)}}function lC(n,t){return typeof n=="number"?n:n[t]||0}const cC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jc=()=>({x:cC(),y:cC()}),uC=()=>({min:0,max:0}),ve=()=>({x:uC(),y:uC()});function Ci(n){return[n("x"),n("y")]}function UP({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function Qj({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function Kj(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function Hv(n){return n===void 0||n===1}function rb({scale:n,scaleX:t,scaleY:e}){return!Hv(n)||!Hv(t)||!Hv(e)}function Ba(n){return rb(n)||HP(n)||n.z||n.rotate||n.rotateX||n.rotateY}function HP(n){return dC(n.x)||dC(n.y)}function dC(n){return n&&n!=="0%"}function V0(n,t,e){const i=n-e,s=t*i;return e+s}function hC(n,t,e,i,s){return s!==void 0&&(n=V0(n,s,i)),V0(n,e,i)+t}function ob(n,t=0,e=1,i,s){n.min=hC(n.min,t,e,i,s),n.max=hC(n.max,t,e,i,s)}function $P(n,{x:t,y:e}){ob(n.x,t.translate,t.scale,t.originPoint),ob(n.y,e.translate,e.scale,e.originPoint)}function Jj(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,o;for(let l=0;l<s;l++){r=e[l],o=r.projectionDelta;const c=r.instance;c&&c.style&&c.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Zc(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,$P(n,o)),i&&Ba(r.latestValues)&&Zc(n,r.latestValues))}t.x=fC(t.x),t.y=fC(t.y)}function fC(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function po(n,t){n.min=n.min+t,n.max=n.max+t}function pC(n,t,[e,i,s]){const r=t[s]!==void 0?t[s]:.5,o=Zt(n.min,n.max,r);ob(n,t[e],t[i],o,t.scale)}const Zj=["x","scaleX","originX"],tF=["y","scaleY","originY"];function Zc(n,t){pC(n.x,t,Zj),pC(n.y,t,tF)}function WP(n,t){return UP(Kj(n.getBoundingClientRect(),t))}function eF(n,t,e){const i=WP(n,e),{scroll:s}=t;return s&&(po(i.x,s.offset.x),po(i.y,s.offset.y)),i}const GP=({current:n})=>n?n.ownerDocument.defaultView:null,nF=new WeakMap;class iF{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ve(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Gy(d,"page").point)},r=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:x}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=rP(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ci(A=>{let g=this.getAxisMotionValue(A).get()||0;if(Qs.test(g)){const{projection:w}=this.visualElement;if(w&&w.layout){const b=w.layout.layoutBox[A];b&&(g=vi(b)*(parseFloat(g)/100))}}this.originPoint[A]=g}),x&&$t.update(()=>x(d,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:x,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:A}=h;if(p&&this.currentDirection===null){this.currentDirection=sF(A),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,A),this.updateAxis("y",h.point,A),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Ci(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new zP(t,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:GP(this.visualElement)})}stop(t,e){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&$t.update(()=>r(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!rg(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=$j(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;e&&Qc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Wj(s.layoutBox,e):this.constraints=!1,this.elastic=Yj(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ci(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Xj(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Qc(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=eF(i,s.root,this.visualElement.getTransformPagePoint());let o=Gj(s.layout.layoutBox,r);if(e){const l=e(Qj(o));this.hasMutatedConstraints=!!l,l&&(o=UP(l))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ci(d=>{if(!rg(d,e,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,x={type:"inertia",velocity:i?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(l)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return i.start(Z1(t,i,0,e))}stopAnimation(){Ci(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ci(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ci(e=>{const{drag:i}=this.getProps();if(!rg(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[e];r.set(t[e]-Zt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Qc(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ci(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();s[o]=qj({min:c,max:c},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ci(o=>{if(!rg(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Zt(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;nF.set(this.visualElement,this);const t=this.visualElement.current,e=Xr(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Qc(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),i();const o=Gr(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ci(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=sb,dragMomentum:l=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:l}}}function rg(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function sF(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class rF extends Ra{constructor(t){super(t),this.removeGroupControls=pe,this.removeListeners=pe,this.controls=new iF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pe}unmount(){this.removeGroupControls(),this.removeListeners()}}const mC=n=>(t,e)=>{n&&$t.update(()=>n(t,e))};class oF extends Ra{constructor(){super(...arguments),this.removePointerDownListener=pe}onPointerDown(t){this.session=new zP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:mC(t),onStart:mC(e),onMove:i,onEnd:(r,o)=>{delete this.session,s&&$t.update(()=>s(r,o))}}}mount(){this.removePointerDownListener=Xr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function aF(){const n=N.useContext(j1);if(n===null)return[!0,null];const{isPresent:t,onExitComplete:e,register:i}=n,s=N.useId();return N.useEffect(()=>i(s),[]),!t&&e?[!1,()=>e&&e(s)]:[!0]}const Pg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gC(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const uh={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(et.test(n))n=parseFloat(n);else return n;const e=gC(n,t.target.x),i=gC(n,t.target.y);return`${e}% ${i}%`}},lF={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=ka.parse(n);if(s.length>5)return i;const r=ka.createTransformer(n),o=typeof s[0]!="number"?1:0,l=e.x.scale*t.x,c=e.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Zt(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),r(s)}};class cF extends wy.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;mR(uF),r&&(e.group&&e.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Pg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||t.layoutDependency!==e||e===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||$t.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function qP(n){const[t,e]=aF(),i=N.useContext(Uk);return wy.createElement(cF,{...n,layoutGroup:i,switchLayoutGroup:N.useContext(Hk),isPresent:t,safeToRemove:e})}const uF={borderRadius:{...uh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uh,borderTopRightRadius:uh,borderBottomLeftRadius:uh,borderBottomRightRadius:uh,boxShadow:lF},XP=["TopLeft","TopRight","BottomLeft","BottomRight"],dF=XP.length,yC=n=>typeof n=="string"?parseFloat(n):n,vC=n=>typeof n=="number"||et.test(n);function hF(n,t,e,i,s,r){s?(n.opacity=Zt(0,e.opacity!==void 0?e.opacity:1,fF(i)),n.opacityExit=Zt(t.opacity!==void 0?t.opacity:1,0,pF(i))):r&&(n.opacity=Zt(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,i));for(let o=0;o<dF;o++){const l=`border${XP[o]}Radius`;let c=xC(t,l),u=xC(e,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||vC(c)===vC(u)?(n[l]=Math.max(Zt(yC(c),yC(u),i),0),(Qs.test(u)||Qs.test(c))&&(n[l]+="%")):n[l]=u}(t.rotate||e.rotate)&&(n.rotate=Zt(t.rotate||0,e.rotate||0,i))}function xC(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const fF=YP(0,.5,yP),pF=YP(.5,.95,pe);function YP(n,t,e){return i=>i<n?0:i>t?1:e(Af(n,t,i))}function bC(n,t){n.min=t.min,n.max=t.max}function wi(n,t){bC(n.x,t.x),bC(n.y,t.y)}function wC(n,t,e,i,s){return n-=t,n=V0(n,1/e,i),s!==void 0&&(n=V0(n,1/s,i)),n}function mF(n,t=0,e=1,i=.5,s,r=n,o=n){if(Qs.test(t)&&(t=parseFloat(t),t=Zt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Zt(r.min,r.max,i);n===r&&(l-=t),n.min=wC(n.min,t,e,l,s),n.max=wC(n.max,t,e,l,s)}function SC(n,t,[e,i,s],r,o){mF(n,t[e],t[i],t[s],t.scale,r,o)}const gF=["x","scaleX","originX"],yF=["y","scaleY","originY"];function AC(n,t,e,i){SC(n.x,t,gF,e?e.x:void 0,i?i.x:void 0),SC(n.y,t,yF,e?e.y:void 0,i?i.y:void 0)}function CC(n){return n.translate===0&&n.scale===1}function QP(n){return CC(n.x)&&CC(n.y)}function vF(n,t){return n.x.min===t.x.min&&n.x.max===t.x.max&&n.y.min===t.y.min&&n.y.max===t.y.max}function KP(n,t){return Math.round(n.x.min)===Math.round(t.x.min)&&Math.round(n.x.max)===Math.round(t.x.max)&&Math.round(n.y.min)===Math.round(t.y.min)&&Math.round(n.y.max)===Math.round(t.y.max)}function EC(n){return vi(n.x)/vi(n.y)}class xF{constructor(){this.members=[]}add(t){tS(this.members,t),t.scheduleRender()}remove(t){if(eS(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function TC(n,t,e){let i="";const s=n.x.translate/t.x,r=n.y.translate/t.y;if((s||r)&&(i=`translate3d(${s}px, ${r}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{rotate:c,rotateX:u,rotateY:d}=e;c&&(i+=`rotate(${c}deg) `),u&&(i+=`rotateX(${u}deg) `),d&&(i+=`rotateY(${d}deg) `)}const o=n.x.scale*t.x,l=n.y.scale*t.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const bF=(n,t)=>n.depth-t.depth;class wF{constructor(){this.children=[],this.isDirty=!1}add(t){tS(this.children,t),this.isDirty=!0}remove(t){eS(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(bF),this.isDirty=!1,this.children.forEach(t)}}function SF(n,t){const e=performance.now(),i=({timestamp:s})=>{const r=s-e;r>=t&&(io(i),n(r-t))};return $t.read(i,!0),()=>io(i)}function AF(n){window.MotionDebug&&window.MotionDebug.record(n)}function CF(n){return n instanceof SVGElement&&n.tagName!=="svg"}function EF(n,t,e){const i=Vn(n)?n:Gd(n);return i.start(Z1("",i,t,e)),i.animation}const kC=["","X","Y","Z"],TF={visibility:"hidden"},PC=1e3;let kF=0;const za={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function JP({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=kF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,za.totalNodes=za.resolvedTargetDeltas=za.recalculatedProjection=0,this.nodes.forEach(DF),this.nodes.forEach(IF),this.nodes.forEach(jF),this.nodes.forEach(MF),AF(za)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new wF)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new nS),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CF(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),n){let h;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=SF(f,250),Pg.hasAnimatedSinceResize&&(Pg.hasAnimatedSinceResize=!1,this.nodes.forEach(DC))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||VF,{onLayoutAnimationStart:A,onLayoutAnimationComplete:g}=d.getProps(),w=!this.targetLayout||!KP(this.targetLayout,x)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const E={...J1(y,"layout"),onPlay:A,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||DC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_C);return}this.isUpdating||this.nodes.forEach(LF),this.isUpdating=!1,this.nodes.forEach(RF),this.nodes.forEach(PF),this.nodes.forEach(_F),this.clearAllSnapshots();const l=performance.now();ln.delta=Ta(0,1e3/60,l-ln.timestamp),ln.timestamp=l,ln.isProcessing=!0,Lv.update.process(ln),Lv.preRender.process(ln),Lv.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(NF),this.sharedNodes.forEach(OF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ve(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:e(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!QP(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||Ba(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),UF(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ve();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(po(l.x,c.offset.x),po(l.y,c.offset.y)),l}removeElementScroll(o){const l=ve();wi(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){wi(l,o);const{scroll:f}=this.root;f&&(po(l.x,-f.offset.x),po(l.y,-f.offset.y))}po(l.x,d.offset.x),po(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=ve();wi(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Zc(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ba(d.latestValues)&&Zc(c,d.latestValues)}return Ba(this.latestValues)&&Zc(c,this.latestValues),c}removeTransform(o){const l=ve();wi(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ba(u.latestValues))continue;rb(u.latestValues)&&u.updateSnapshot();const d=ve(),h=u.measurePageBox();wi(d,h),AC(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ba(this.latestValues)&&AC(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=ln.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ve(),this.relativeTargetOrigin=ve(),tf(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ve(),this.targetWithTransforms=ve()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wi(this.target,this.layout.layoutBox),$P(this.target,this.targetDelta)):wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ve(),this.relativeTargetOrigin=ve(),tf(this.relativeTargetOrigin,this.target,p.target),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}za.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rb(this.parent.latestValues)||HP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;wi(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Jj(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:x}=l;if(!x){this.projectionTransform&&(this.projectionDelta=Jc(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Jc(),this.projectionDeltaWithTransform=Jc());const y=this.projectionTransform;Zh(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=TC(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),za.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Jc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ve(),p=c?c.source:void 0,x=this.layout?this.layout.source:void 0,y=p!==x,A=this.getStack(),g=!A||A.members.length<=1,w=!!(y&&!g&&this.options.crossfade===!0&&!this.path.some(zF));this.animationProgress=0;let b;this.mixTargetDelta=E=>{const T=E/1e3;MC(h.x,o.x,T),MC(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tf(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BF(this.relativeTarget,this.relativeTargetOrigin,f,T),b&&vF(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ve()),wi(b,this.relativeTarget)),y&&(this.animationValues=d,hF(d,u,this.latestValues,T,w,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{Pg.hasAnimatedSinceResize=!0,this.currentAnimation=EF(0,PC,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&ZP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ve();const h=vi(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=vi(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}wi(l,c),Zc(l,d),Zh(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new xF),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<kC.length;d++){const h="rotate"+kC[d];c[h]&&(u[h]=c[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return TF;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=kg(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=kg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ba(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=TC(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y:x}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in R0){if(f[y]===void 0)continue;const{correct:A,applyTo:g}=R0[y],w=u.transform==="none"?f[y]:A(f[y],h);if(g){const b=g.length;for(let E=0;E<b;E++)u[g[E]]=w}else u[y]=w}return this.options.layoutId&&(u.pointerEvents=h===this?kg(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(_C),this.root.sharedNodes.clear()}}}function PF(n){n.updateLayout()}function _F(n){var t;const e=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=e.source!==n.layout.source;r==="size"?Ci(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=vi(f);f.min=i[h].min,f.max=f.min+p}):ZP(r,e.layoutBox,i)&&Ci(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=vi(i[h]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+p)});const l=Jc();Zh(l,i,e.layoutBox);const c=Jc();o?Zh(c,n.applyTransform(s,!0),e.measuredBox):Zh(c,i,e.layoutBox);const u=!QP(l);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const x=ve();tf(x,e.layoutBox,f.layoutBox);const y=ve();tf(y,i,p.layoutBox),KP(x,y)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=y,n.relativeTargetOrigin=x,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function DF(n){za.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function MF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function NF(n){n.clearSnapshot()}function _C(n){n.clearMeasurements()}function LF(n){n.isLayoutDirty=!1}function RF(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function DC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function IF(n){n.resolveTargetDelta()}function jF(n){n.calcProjection()}function FF(n){n.resetRotation()}function OF(n){n.removeLeadSnapshot()}function MC(n,t,e){n.translate=Zt(t.translate,0,e),n.scale=Zt(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function NC(n,t,e,i){n.min=Zt(t.min,e.min,i),n.max=Zt(t.max,e.max,i)}function BF(n,t,e,i){NC(n.x,t.x,e.x,i),NC(n.y,t.y,e.y,i)}function zF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const VF={duration:.45,ease:[.4,0,.1,1]},LC=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),RC=LC("applewebkit/")&&!LC("chrome/")?Math.round:pe;function IC(n){n.min=RC(n.min),n.max=RC(n.max)}function UF(n){IC(n.x),IC(n.y)}function ZP(n,t,e){return n==="position"||n==="preserve-aspect"&&!ib(EC(t),EC(e),.2)}const HF=JP({attachResizeListener:(n,t)=>Gr(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$v={current:void 0},t2=JP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!$v.current){const n=new HF({});n.mount(window),n.setOptions({layoutScroll:!0}),$v.current=n}return $v.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),$F={pan:{Feature:oF},drag:{Feature:rF,ProjectionNode:t2,MeasureLayout:qP}},WF=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function GF(n){const t=WF.exec(n);if(!t)return[,];const[,e,i]=t;return[e,i]}function ab(n,t,e=1){const[i,s]=GF(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return jP(o)?parseFloat(o):o}else return Qx(s)?ab(s,t,e+1):s}function qF(n,{...t},e){const i=n.current;if(!(i instanceof Element))return{target:t,transitionEnd:e};e&&(e={...e}),n.values.forEach(s=>{const r=s.get();if(!Qx(r))return;const o=ab(r,i);o&&s.set(o)});for(const s in t){const r=t[s];if(!Qx(r))continue;const o=ab(r,i);o&&(t[s]=o,e||(e={}),e[s]===void 0&&(e[s]=r))}return{target:t,transitionEnd:e}}const XF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),e2=n=>XF.has(n),YF=n=>Object.keys(n).some(e2),jC=n=>n===Ec||n===et,FC=(n,t)=>parseFloat(n.split(", ")[t]),OC=(n,t)=>(e,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/);if(s)return FC(s[1],t);{const r=i.match(/^matrix\((.+)\)$/);return r?FC(r[1],n):0}},QF=new Set(["x","y","z"]),KF=_m.filter(n=>!QF.has(n));function JF(n){const t=[];return KF.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t.length&&n.render(),t}const qd={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:OC(4,13),y:OC(5,14)};qd.translateX=qd.x;qd.translateY=qd.y;const ZF=(n,t,e)=>{const i=t.measureViewportBox(),s=t.current,r=getComputedStyle(s),{display:o}=r,l={};o==="none"&&t.setStaticValue("display",n.display||"block"),e.forEach(u=>{l[u]=qd[u](i,r)}),t.render();const c=t.measureViewportBox();return e.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),n[u]=qd[u](c,r)}),n},tO=(n,t,e={},i={})=>{t={...t},i={...i};const s=Object.keys(t).filter(e2);let r=[],o=!1;const l=[];if(s.forEach(c=>{const u=n.getValue(c);if(!n.hasValue(c))return;let d=e[c],h=ch(d);const f=t[c];let p;if(j0(f)){const x=f.length,y=f[0]===null?1:0;d=f[y],h=ch(d);for(let A=y;A<x&&f[A]!==null;A++)p?q1(ch(f[A])===p):p=ch(f[A])}else p=ch(f);if(h!==p)if(jC(h)&&jC(p)){const x=u.get();typeof x=="string"&&u.set(parseFloat(x)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&p===et&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(d===0||f===0)?d===0?u.set(p.transform(d)):t[c]=h.transform(f):(o||(r=JF(n),o=!0),l.push(c),i[c]=i[c]!==void 0?i[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=ZF(t,n,l);return r.length&&r.forEach(([d,h])=>{n.getValue(d).set(h)}),n.render(),Uy&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:i}}else return{target:t,transitionEnd:i}};function eO(n,t,e,i){return YF(t)?tO(n,t,e,i):{target:t,transitionEnd:i}}const nO=(n,t,e,i)=>{const s=qF(n,t,i);return t=s.target,i=s.transitionEnd,eO(n,t,e,i)},lb={current:null},n2={current:!1};function iO(){if(n2.current=!0,!!Uy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>lb.current=n.matches;n.addListener(t),t()}else lb.current=!1}function sO(n,t,e){const{willChange:i}=t;for(const s in t){const r=t[s],o=e[s];if(Vn(r))n.addValue(s,r),z0(i)&&i.add(s);else if(Vn(o))n.addValue(s,Gd(r,{owner:n})),z0(i)&&i.remove(s);else if(o!==r)if(n.hasValue(s)){const l=n.getValue(s);!l.hasAnimated&&l.set(r)}else{const l=n.getStaticValue(s);n.addValue(s,Gd(l!==void 0?l:r,{owner:n}))}}for(const s in e)t[s]===void 0&&n.removeValue(s);return t}const BC=new WeakMap,i2=Object.keys(Sf),rO=i2.length,zC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],oO=B1.length;class aO{constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>$t.render(this.render,!1,!0);const{latestValues:l,renderState:c}=r;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=$y(e),this.isVariantNode=Vk(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(e,{});for(const h in d){const f=d[h];l[h]!==void 0&&Vn(f)&&(f.set(l[h],!1),z0(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,e){return{}}mount(t){this.current=t,BC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),n2.current||iO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BC.delete(this.current),this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,e){const i=Cc.has(t),s=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&$t.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),r()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...e},i,s,r){let o,l;for(let c=0;c<rO;c++){const u=i2[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:p}=Sf[u];f&&(o=f),d(e)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:p}=e;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Qc(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ve()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}makeTargetAnimatable(t,e=!0){return this.makeTargetAnimatableFromInstance(t,this.props,e)}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<zC.length;i++){const s=zC[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r=t["on"+s];r&&(this.propEventSubscriptions[s]=this.on(s,r))}this.prevMotionValues=sO(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const e={};for(let i=0;i<oO;i++){const s=B1[i],r=this.props[s];(wf(r)||r===!1)&&(e[s]=r)}return e}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){e!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,e)),this.values.set(t,e),this.latestValues[t]=e.get()}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Gd(e,{owner:this}),this.addValue(t,i)),i}readValue(t){var e;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(e=this.getBaseTargetFromProps(this.props,t))!==null&&e!==void 0?e:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:i}=this.props,s=typeof i=="string"||typeof i=="object"?(e=G1(this.props,i))===null||e===void 0?void 0:e[t]:void 0;if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Vn(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new nS),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class s2 extends aO{sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:e,...i},{transformValues:s},r){let o=Cj(i,t||{},this);if(s&&(e&&(e=s(e)),i&&(i=s(i)),o&&(o=s(o))),r){Sj(this,i,o);const l=nO(this,i,o,e);e=l.transitionEnd,i=l.target}return{transition:t,transitionEnd:e,...i}}}function lO(n){return window.getComputedStyle(n)}class cO extends s2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,e){if(Cc.has(e)){const i=K1(e);return i&&i.default||0}else{const i=lO(t),s=(Gk(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return WP(t,e)}build(t,e,i,s){V1(t,e,i,s.transformTemplate)}scrapeMotionValuesFromProps(t,e){return W1(t,e)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Vn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(t,e,i,s){Jk(t,e,i,s)}}class uO extends s2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Cc.has(e)){const i=K1(e);return i&&i.default||0}return e=Zk.has(e)?e:F1(e),t.getAttribute(e)}measureInstanceViewportBox(){return ve()}scrapeMotionValuesFromProps(t,e){return eP(t,e)}build(t,e,i,s){H1(t,e,i,this.isSVGTag,s.transformTemplate)}renderInstance(t,e,i,s){tP(t,e,i,s)}mount(t){this.isSVGTag=$1(t.tagName),super.mount(t)}}const dO=(n,t)=>z1(n)?new uO(t,{enableHardwareAcceleration:!1}):new cO(t,{enableHardwareAcceleration:!0}),hO={layout:{ProjectionNode:t2,MeasureLayout:qP}},fO={...Bj,...rI,...$F,...hO},J=fR((n,t)=>GR(n,t,fO,dO)),pO=`
  html, body {
    overflow-x: hidden;
  }

  .create-quiz-container {
    min-height: 100vh;
    padding: 40px;
    background: linear-gradient(135deg, #000000, #1a1a1a);
    color: white;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .create-quiz-wrapper {
    max-width: 900px;
    margin: 0 auto;
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border-radius: 15px;
    padding: 40px;
    border: 2px solid #0099ff;
    box-shadow: 0 10px 40px rgba(0, 153, 255, 0.2);
  }

  .header {
    text-align: center;
    margin-bottom: 40px;
    padding-bottom: 20px;
    border-bottom: 2px solid #0099ff;
  }

  .header h1 {
    font-size: 2em;
    margin: 0 0 10px;
    background: linear-gradient(135deg, #00d4ff, #0099ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .form-group {
    margin-bottom: 25px;
  }

  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #00d4ff;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid #0099ff;
    border-radius: 5px;
    color: white;
    font-family: "Poppins", sans-serif;
    font-size: 1em;
    transition: all 0.3s ease;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    background: rgba(0, 153, 255, 0.1);
    border-color: #00d4ff;
    box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .button-group {
    display: flex;
    gap: 15px;
    margin-top: 30px;
    justify-content: flex-end;
  }

  .btn-submit {
    padding: 12px 25px;
    background: linear-gradient(135deg, #0099ff, #00d4ff);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-submit:hover {
    box-shadow: 0 5px 20px rgba(0, 153, 255, 0.4);
    transform: translateY(-2px);
  }

  .btn-back {
    padding: 12px 25px;
    background: #333;
    color: #aaa;
    border: 1px solid #555;
    border-radius: 8px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-back:hover {
    background: #444;
    color: white;
  }

  @media (max-width: 600px) {
    .form-row {
      grid-template-columns: 1fr;
    }
  }

  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .modal-content {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid #0099ff;
    border-radius: 15px;
    padding: 30px;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(0, 153, 255, 0.3);
  }

  .modal-content h2 {
    margin: 0 0 15px;
    color: #00d4ff;
    font-size: 1.5em;
  }

  .modal-content p {
    color: #ccc;
    margin: 10px 0;
    line-height: 1.6;
  }

  .modal-buttons {
    display: flex;
    gap: 15px;
    margin-top: 25px;
    justify-content: flex-end;
  }

  .modal-btn-cancel {
    padding: 10px 20px;
    background: #333;
    color: #aaa;
    border: 1px solid #555;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    transition: all 0.3s ease;
  }

  .modal-btn-cancel:hover {
    background: #444;
    color: white;
  }

  .modal-btn-confirm {
    padding: 10px 20px;
    background: linear-gradient(135deg, #00ff99, #00cc77);
    color: #000;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .modal-btn-confirm:hover {
    box-shadow: 0 5px 20px rgba(0, 255, 153, 0.4);
    transform: translateY(-2px);
  }

  .quiz-details {
    background: rgba(0, 153, 255, 0.1);
    border-left: 3px solid #00d4ff;
    padding: 15px;
    border-radius: 5px;
    margin: 15px 0;
  }

  .quiz-details p {
    margin: 8px 0;
    font-size: 0.95em;
  }

  .quiz-details strong {
    color: #00d4ff;
  }
`;function mO(){const n=Xi(),[t,e]=N.useState(""),[i,s]=N.useState(""),[r,o]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState(5),[h,f]=N.useState(null),[p,x]=N.useState(!1),[y,A]=N.useState(!1),[g,w]=N.useState(null),[b,E]=N.useState(""),[T,P]=N.useState(""),[k,_]=N.useState(!1),[D,M]=N.useState(1),R=()=>{const F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let O="";for(let z=0;z<6;z++)O+=F.charAt(Math.floor(Math.random()*F.length));return O},V=async F=>{if(F.preventDefault(),!t||!r||!l){alert("Please fill all required fields!");return}const O=i||R(),z={quizId:t,subject:r,password:O,timer:parseInt(l),numQuestions:parseInt(u),questions:[],status:k?"published":"created",published:k,startTime:b||null,endTime:T||null,maxAttempts:parseInt(D),createdAt:new Date().toISOString()};w(z),A(!0)},G=async()=>{x(!0);try{const F=JSON.parse(localStorage.getItem("quizzes")||"[]");F.push(g),localStorage.setItem("quizzes",JSON.stringify(F)),A(!1),alert(` Quiz "${g.subject}" created successfully!`),e(""),s(""),o(""),c(""),d(5),M(1),f(null),w(null),setTimeout(()=>n("/dashboard"),1500)}catch(F){alert("Error creating quiz: "+F.message)}finally{x(!1)}},I=()=>{const F={...g,status:"cancelled"},O=JSON.parse(localStorage.getItem("quizzes")||"[]");O.push(F),localStorage.setItem("quizzes",JSON.stringify(O)),A(!1),alert(" Quiz creation cancelled!"),setTimeout(()=>n("/dashboard"),1e3)};return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:pO}),y&&g&&m.jsx(J.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:m.jsxs(J.div,{className:"modal-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[m.jsx("h2",{children:" Confirm Quiz Creation"}),m.jsx("p",{children:"Please review the quiz details before confirming:"}),m.jsxs("div",{className:"quiz-details",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Quiz ID:"})," ",g.quizId]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Subject:"})," ",g.subject]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Time Limit:"})," ",g.timer," minutes"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Questions:"})," ",g.numQuestions]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Max Attempts:"})," ",g.maxAttempts]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Start:"})," ",g.startTime?new Date(g.startTime).toLocaleString():"Not scheduled"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"End:"})," ",g.endTime?new Date(g.endTime).toLocaleString():"Not scheduled"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Publish Now:"})," ",g.published?"Yes":"No"]})]}),m.jsxs("div",{style:{background:"linear-gradient(135deg, #2ecc71, #27ae60)",border:"2px solid #00ff99",borderRadius:"8px",padding:"15px",marginBottom:"15px",textAlign:"center"},children:[m.jsx("p",{style:{margin:"0 0 8px",color:"#000",fontWeight:"bold",fontSize:"0.9em"},children:" STUDENT PASSWORD"}),m.jsx("p",{style:{margin:"0",color:"#000",fontSize:"1.3em",fontWeight:"bold",fontFamily:"monospace",letterSpacing:"2px"},children:g.password}),m.jsx("p",{style:{margin:"8px 0 0",color:"#000",fontSize:"0.85em"},children:"Share this password with students to access the quiz"})]}),m.jsx("p",{style:{color:"#ffaa00",fontSize:"0.95em"},children:"After confirming, you can add questions to this quiz in your dashboard."}),m.jsxs("div",{className:"modal-buttons",children:[m.jsx(J.button,{className:"modal-btn-cancel",onClick:I,whileHover:{scale:1.05},whileTap:{scale:.95},children:" Cancel"}),m.jsx(J.button,{className:"modal-btn-confirm",onClick:G,disabled:p,whileHover:{scale:1.05},whileTap:{scale:.95},children:p?"Creating...":" Confirm"})]})]})}),m.jsx("div",{className:"create-quiz-container",children:m.jsxs(J.div,{className:"create-quiz-wrapper",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[m.jsxs("div",{className:"header",children:[m.jsx("h1",{children:" Create New Quiz"}),m.jsx("p",{style:{margin:"0",color:"#aaa",fontSize:"1.1em"},children:"Set up your quiz"})]}),m.jsxs("form",{onSubmit:V,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Quiz ID *"}),m.jsx("input",{type:"text",value:t,onChange:F=>e(F.target.value),placeholder:"e.g., QUIZ001",required:!0}),m.jsx("small",{style:{color:"#888",marginTop:"5px",display:"block"},children:"Unique identifier for this quiz"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Quiz Subject/Title *"}),m.jsx("input",{type:"text",value:r,onChange:F=>o(F.target.value),placeholder:"e.g., General Knowledge",required:!0})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Password (optional - auto-generated if empty)"}),m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-end"},children:[m.jsx("input",{type:"password",value:i,onChange:F=>s(F.target.value),placeholder:"Leave empty for auto-generation",style:{flex:1}}),m.jsx("button",{type:"button",onClick:()=>s(R()),style:{padding:"12px 16px",background:"#9d00ff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" Generate"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Time Limit (minutes) *"}),m.jsx("input",{type:"number",value:l,onChange:F=>c(F.target.value),placeholder:"e.g., 30",min:"1",max:"120",required:!0})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Number of Questions"}),m.jsx("input",{type:"number",value:u,onChange:F=>d(parseInt(F.target.value)),min:"1",max:"100"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Maximum Attempts Per Student"}),m.jsx("input",{type:"number",value:D,onChange:F=>M(parseInt(F.target.value)),min:"1",max:"10",placeholder:"e.g., 3"}),m.jsx("small",{style:{color:"#888",marginTop:"5px",display:"block"},children:"How many times can each student attempt this quiz? (1 = Single attempt only)"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Upload PDF (Optional)"}),m.jsx("input",{type:"file",accept:"application/pdf",onChange:F=>f(F.target.files[0])}),h&&m.jsxs("small",{style:{color:"#00ff99",marginTop:"5px",display:"block"},children:[" ",h.name]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Start Time (optional)"}),m.jsx("input",{type:"datetime-local",value:b,onChange:F=>E(F.target.value)})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"End Time (optional)"}),m.jsx("input",{type:"datetime-local",value:T,onChange:F=>P(F.target.value)})]})]}),m.jsx("div",{className:"form-group",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:k,onChange:F=>_(F.target.checked),style:{marginRight:8}})," Publish immediately"]})}),m.jsxs("div",{className:"button-group",children:[m.jsx(J.button,{type:"button",className:"btn-back",onClick:()=>window.history.back(),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Back"}),m.jsx(J.button,{type:"submit",className:"btn-submit",disabled:p,whileHover:{scale:1.05},whileTap:{scale:.95},children:p?"Creating...":" Create Quiz"})]})]})]})})]})}const gO=`
  html, body {
    overflow-x: hidden;
  }

  .add-questions-container {
    min-height: 100vh;
    padding: 40px;
    background: linear-gradient(135deg, #000000, #1a1a1a);
    color: white;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .add-questions-wrapper {
    max-width: 900px;
    margin: 0 auto;
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border-radius: 15px;
    padding: 40px;
    border: 2px solid #0099ff;
    box-shadow: 0 10px 40px rgba(0, 153, 255, 0.2);
  }

  .aq-header {
    text-align: center;
    margin-bottom: 40px;
    padding-bottom: 20px;
    border-bottom: 2px solid #0099ff;
  }

  .aq-header h1 {
    font-size: 2em;
    margin: 0 0 10px;
    background: linear-gradient(135deg, #00d4ff, #0099ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .quiz-info {
    background: rgba(0, 153, 255, 0.1);
    border-left: 3px solid #00d4ff;
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 30px;
  }

  .quiz-info p {
    margin: 8px 0;
    color: #ccc;
  }

  .quiz-info strong {
    color: #00d4ff;
  }

  .question-form {
    background: rgba(0, 153, 255, 0.05);
    border: 1px solid #0099ff;
    padding: 25px;
    border-radius: 10px;
    margin-bottom: 25px;
  }

  .question-form h3 {
    margin: 0 0 20px;
    color: #00ff99;
  }

  .form-group {
    margin-bottom: 20px;
  }

  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #00d4ff;
  }

  .form-group input,
  .form-group textarea,
  .form-group select {
    width: 100%;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid #0099ff;
    border-radius: 5px;
    color: white;
    font-family: "Poppins", sans-serif;
    font-size: 1em;
    transition: all 0.3s ease;
  }

  .form-group input:focus,
  .form-group textarea:focus,
  .form-group select:focus {
    outline: none;
    background: rgba(0, 153, 255, 0.1);
    border-color: #00d4ff;
  }

  .option-group {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }

  .option-group input {
    flex: 1;
  }

  .option-group input[type="radio"] {
    width: auto;
    margin-right: 10px;
  }

  .button-group {
    display: flex;
    gap: 15px;
    margin-top: 25px;
    justify-content: flex-end;
  }

  .btn-primary {
    padding: 12px 25px;
    background: linear-gradient(135deg, #0099ff, #00d4ff);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-primary:hover {
    box-shadow: 0 5px 20px rgba(0, 153, 255, 0.4);
    transform: translateY(-2px);
  }

  .btn-secondary {
    padding: 12px 25px;
    background: #333;
    color: #aaa;
    border: 1px solid #555;
    border-radius: 8px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-secondary:hover {
    background: #444;
    color: white;
  }

  .questions-list {
    margin-top: 40px;
    max-height: 600px;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 10px;
  }

  .questions-list::-webkit-scrollbar {
    width: 8px;
  }

  .questions-list::-webkit-scrollbar-track {
    background: rgba(0, 153, 255, 0.1);
    border-radius: 5px;
  }

  .questions-list::-webkit-scrollbar-thumb {
    background: #0099ff;
    border-radius: 5px;
  }

  .questions-list::-webkit-scrollbar-thumb:hover {
    background: #00d4ff;
  }

  .questions-list h3 {
    color: #00d4ff;
    margin-bottom: 20px;
    margin-top: 0;
  }

  .question-item {
    background: rgba(0, 153, 255, 0.05);
    border-left: 3px solid #00ff99;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 5px;
  }

  .question-item p {
    margin: 8px 0;
    color: #ccc;
  }
`;function yO(){var A;const n=Xi(),{index:t}=zy(),e=parseInt(t),i=JSON.parse(localStorage.getItem("quizzes")||"[]"),s=i[e],[r,o]=N.useState(""),[l,c]=N.useState(["","","",""]),[u,d]=N.useState(0),[h,f]=N.useState(1);if(!s)return m.jsx("div",{style:{textAlign:"center",padding:"40px",color:"white"},children:"Quiz not found!"});const p=()=>{var E;if(!r||l.some(T=>!T)){alert("Please fill all fields!");return}const g={id:(((E=s.questions)==null?void 0:E.length)||0)+1,text:r,options:l,correctAnswer:parseInt(u),points:parseInt(h)},w={...s};w.questions||(w.questions=[]),w.questions.push(g);const b=[...i];b[e]=w,localStorage.setItem("quizzes",JSON.stringify(b)),o(""),c(["","","",""]),d(0),f(1),alert("Question added successfully!")},x=g=>{const w={...s};w.questions=w.questions.filter(E=>E.id!==g);const b=[...i];b[e]=w,localStorage.setItem("quizzes",JSON.stringify(b)),window.location.reload()},y=(g,w)=>{const b=[...l];b[g]=w,c(b)};return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:gO}),m.jsx("div",{className:"add-questions-container",children:m.jsxs(J.div,{className:"add-questions-wrapper",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[m.jsxs("div",{className:"aq-header",children:[m.jsx("h1",{children:" Add Questions"}),m.jsx("p",{style:{margin:"0",color:"#aaa",fontSize:"1.1em"},children:"Build your quiz"})]}),m.jsxs("div",{className:"quiz-info",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Quiz:"})," ",s.subject]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Quiz ID:"})," ",s.quizId]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Total Questions Required:"})," ",s.numQuestions," | ",m.jsx("strong",{children:"Added:"})," ",((A=s.questions)==null?void 0:A.length)||0]})]}),m.jsxs("div",{className:"question-form",children:[m.jsx("h3",{children:" Add New Question"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Question Text *"}),m.jsx("textarea",{value:r,onChange:g=>o(g.target.value),placeholder:"Enter question...",rows:"3",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Options *"}),l.map((g,w)=>m.jsxs("div",{className:"option-group",children:[m.jsx("input",{type:"radio",name:"correct",value:w,checked:u===w,onChange:b=>d(parseInt(b.target.value)),title:"Mark as correct answer"}),m.jsx("input",{type:"text",value:g,onChange:b=>y(w,b.target.value),placeholder:`Option ${w+1}`})]},w)),m.jsx("small",{style:{color:"#888"},children:"Select the radio button for the correct answer"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Points for this question *"}),m.jsx("input",{type:"number",value:h,onChange:g=>f(g.target.value),min:"1",max:"100",required:!0})]}),m.jsxs("div",{className:"button-group",children:[m.jsx(J.button,{className:"btn-secondary",onClick:()=>n("/dashboard"),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Back"}),m.jsx(J.button,{style:{padding:"12px 25px",background:"linear-gradient(135deg, #9d00ff, #ff00ff)",color:"white",border:"none",borderRadius:"8px",fontSize:"1em",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>n(`/ai-generate/${t}`),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Generate with AI"}),m.jsx(J.button,{className:"btn-primary",onClick:p,whileHover:{scale:1.05},whileTap:{scale:.95},children:" Add Question"})]})]}),s.questions&&s.questions.length>0&&m.jsxs("div",{className:"questions-list",children:[m.jsxs("h3",{children:[" Questions Added (",s.questions.length,")"]}),s.questions.map(g=>m.jsxs("div",{className:"question-item",children:[m.jsxs("p",{children:[m.jsxs("strong",{children:["Q",g.id,":"]})," ",g.text]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Correct Answer:"})," ",g.options[g.correctAnswer]," (",g.points," points)"]}),m.jsx(J.button,{style:{padding:"6px 12px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},onClick:()=>x(g.id),whileHover:{scale:1.05},whileTap:{scale:.95},children:"Remove"})]},g.id))]})]})})]})}const vn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),cb=[.001,0,0,.001,0,0],Wv=1.35,ci={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},yo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Cf="pdfjs_internal_editor_",rt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ht={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},vO={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ub={TRIANGLES:1,LATTICE:2},Se={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},_g={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Dc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Xy={ERRORS:0,WARNINGS:1,INFOS:5},Ef={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},dh={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},xO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yy=Xy.WARNINGS;function bO(n){Number.isInteger(n)&&(Yy=n)}function wO(){return Yy}function Qy(n){Yy>=Xy.INFOS&&console.info(`Info: ${n}`)}function nt(n){Yy>=Xy.WARNINGS&&console.warn(`Warning: ${n}`)}function bt(n){throw new Error(n)}function xt(n,t){n||bt(t)}function SO(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function r2(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=PO(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return SO(i)?i:null}function o2(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&r2(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function it(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Tc=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class VC extends Tc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Gv extends Tc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class db extends Tc{constructor(t){super(t,"InvalidPDFException")}}class U0 extends Tc{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class AO extends Tc{constructor(t){super(t,"FormatError")}}class Pa extends Tc{constructor(t){super(t,"AbortException")}}function CO(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&bt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Ky(n){typeof n!="string"&&bt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function EO(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function TO(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function kO(){try{return new Function(""),!0}catch{return!1}}class _e{static get isLittleEndian(){return it(this,"isLittleEndian",TO())}static get isEvalSupported(){return it(this,"isEvalSupported",kO())}static get isOffscreenCanvasSupported(){return it(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return it(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return it(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return it(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return it(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return it(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const qv=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Qr,Dg,hb;class H{static makeHexColor(t,e,i){return`#${qv[t]}${qv[e]}${qv[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const s=t[i],r=t[i+1];t[i]=s*e[0]+r*e[2]+e[4],t[i+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5];for(let d=0;d<6;d+=2){const h=t[i+d],f=t[i+d+1];t[i+d]=h*s+f*o+c,t[i+d+1]=h*r+f*l+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,i){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5],d=t[0],h=t[1],f=t[2],p=t[3];let x=s*d+c,y=x,A=s*f+c,g=A,w=l*h+u,b=w,E=l*p+u,T=E;if(r!==0||o!==0){const P=r*d,k=r*f,_=o*h,D=o*p;x+=_,g+=_,A+=D,y+=D,w+=P,T+=P,E+=k,b+=k}i[0]=Math.min(i[0],x,A,y,g),i[1]=Math.min(i[1],w,E,b,T),i[2]=Math.max(i[2],x,A,y,g),i[3]=Math.max(i[3],w,E,b,T)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],r=t[2],o=t[3],l=i**2+s**2,c=i*r+s*o,u=r**2+o**2,d=(l+u)/2,h=Math.sqrt(d**2-(l*u-c**2));e[0]=Math.sqrt(d+h||1),e[1]=Math.sqrt(d-h||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,r){r[0]=Math.min(r[0],t,i),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,i),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,i,s,r,o,l,c,u){u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c),C(this,Qr,hb).call(this,t,i,r,l,e,s,o,c,3*(-t+3*(i-r)+l),6*(t-2*i+r),3*(i-t),u),C(this,Qr,hb).call(this,t,i,r,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),u)}}Qr=new WeakSet,Dg=function(t,e,i,s,r,o,l,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,x=h*(h*(h*t+3*u*e)+3*f*i)+p*s,y=h*(h*(h*r+3*u*o)+3*f*l)+p*c;d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],y),d[2]=Math.max(d[2],x),d[3]=Math.max(d[3],y)},hb=function(t,e,i,s,r,o,l,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&C(this,Qr,Dg).call(this,t,e,i,s,r,o,l,c,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const x=Math.sqrt(p),y=2*u;C(this,Qr,Dg).call(this,t,e,i,s,r,o,l,c,(-d+x)/y,f),C(this,Qr,Dg).call(this,t,e,i,s,r,o,l,c,(-d-x)/y,f)},S(H,Qr);function PO(n){return decodeURIComponent(escape(n))}let Xv=null,UC=null;function _O(n){return Xv||(Xv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,UC=new Map([["","t"]])),n.replaceAll(Xv,(t,e,i)=>e?e.normalize("NFKC"):UC.get(i))}function a2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),CO(n)}const tu="pdfjs_internal_id_";function DO(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...r]=e;if(!n(i)&&!Number.isInteger(i)||!t(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Ge(n,t,e){return Math.min(Math.max(n,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});class Tf{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Tf.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class l2{static setupStorage(t,e,i,s,r){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var h,f;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),l&&Tf.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const d=[[s,-1,o]];for(;d.length>0;){const[p,x,y]=d.at(-1);if(x+1===p.children.length){d.pop();continue}const A=p.children[++d.at(-1)[1]];if(A===null)continue;const{name:g}=A;if(g==="#text"){const b=document.createTextNode(A.value);u.push(b),y.append(b);continue}const w=(h=A==null?void 0:A.attributes)!=null&&h.xmlns?document.createElementNS(A.attributes.xmlns,g):document.createElement(g);if(y.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:e,intent:r,linkService:i}),((f=A.children)==null?void 0:f.length)>0)d.push([A,-1,w]);else if(A.value){const b=document.createTextNode(A.value);l&&Tf.shouldBuildText(g)&&u.push(b),w.append(b)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const tr="http://www.w3.org/2000/svg",$a=class $a{};L($a,"CSS",96),L($a,"PDF",72),L($a,"PDF_TO_CSS_UNITS",$a.CSS/$a.PDF);let _a=$a;async function Lm(n,t="text"){if(wh(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Rm{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let d,h,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let x,y,A,g;d===0?(x=Math.abs(u-t[1])*i+r,y=Math.abs(c-t[0])*i+o,A=(t[3]-t[1])*i,g=(t[2]-t[0])*i):(x=Math.abs(c-t[0])*i+r,y=Math.abs(u-t[1])*i+o,A=(t[2]-t[0])*i,g=(t[3]-t[1])*i),this.transform=[d*i,h*i,f*i,p*i,x-d*i*c-f*i*u,y-h*i*c-p*i*u],this.width=A,this.height=g}get rawDims(){const t=this.viewBox;return it(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Rm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const i=[t,e];return H.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];H.applyTransform(e,this.transform);const i=[t[2],t[3]];return H.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return H.applyInverseTransform(i,this.transform),i}}class iS extends Tc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Jy(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function sS(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function MO(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function NO(n,t="document.pdf"){if(typeof n!="string")return t;if(Jy(n))return nt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(r.test(o))return s(o);if(i.searchParams.size>0){const l=Array.from(i.searchParams.values()).reverse();for(const u of l)if(r.test(u))return s(u);const c=Array.from(i.searchParams.keys()).reverse();for(const u of c)if(r.test(u))return s(u)}if(i.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(c)return s(c[0])}return t}class HC{constructor(){L(this,"started",Object.create(null));L(this,"times",[])}time(t){t in this.started&&nt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||nt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function wh(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function qi(n){n.preventDefault()}function ce(n){n.preventDefault(),n.stopPropagation()}function LO(n){console.log("Deprecated API usage: "+n)}var Df;class H0{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;a(this,Df)||v(this,Df,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Df).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let d=parseInt(e[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,l+=h):u==="+"&&(o-=d,l-=h),new Date(Date.UTC(i,s,r,o,l,c))}}Df=new WeakMap,S(H0,Df);function RO(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new Rm({viewBox:r,userUnit:1,scale:t,rotation:e})}function Im(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(nt(`Not a valid color format: "${n}"`),[0,0,0])}function IO(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,Im(i))}t.remove()}function Kt(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function bs(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function vc(n,t,e=!1,i=!0){if(t instanceof Rm){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,l=_e.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${r}px`,d=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}i&&n.setAttribute("data-main-rotation",t.rotation)}class Ks{constructor(){const{pixelRatio:t}=Ks;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,r=-1){let o=1/0,l=1/0,c=1/0;i=Ks.capPixels(i,r),i>0&&(o=Math.sqrt(i/(t*e))),s!==-1&&(l=s/t,c=s/e);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const fb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class jO{static get isDarkMode(){var t;return it(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class FO{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),it(this,"commentForegroundColor",Im(i))}}function OO(n,t,e,i){i=Math.min(Math.max(i??1,0),1);const s=255*(1-i);return n=Math.round(n*i+s),t=Math.round(t*i+s),e=Math.round(e*i+s),[n,t,e]}function $C(n,t){const e=n[0]/255,i=n[1]/255,s=n[2]/255,r=Math.max(e,i,s),o=Math.min(e,i,s),l=(r+o)/2;if(r===o)t[0]=t[1]=0;else{const c=r-o;switch(t[1]=l<.5?c/(r+o):c/(2-r-o),r){case e:t[0]=((i-s)/c+(i<s?6:0))*60;break;case i:t[0]=((s-e)/c+2)*60;break;case s:t[0]=((e-i)/c+4)*60;break}}t[2]=l}function pb(n,t){const e=n[0],i=n[1],s=n[2],r=(1-Math.abs(2*s-1))*i,o=r*(1-Math.abs(e/60%2-1)),l=s-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+l,t[1]=o+l,t[2]=l;break;case 1:t[0]=o+l,t[1]=r+l,t[2]=l;break;case 2:t[0]=l,t[1]=r+l,t[2]=o+l;break;case 3:t[0]=l,t[1]=o+l,t[2]=r+l;break;case 4:t[0]=o+l,t[1]=l,t[2]=r+l;break;case 5:case 6:t[0]=r+l,t[1]=l,t[2]=o+l;break}}function WC(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function GC(n,t,e){pb(n,e),e.map(WC);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];pb(t,e),e.map(WC);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const qC=new Map;function BO(n,t){const e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=qC.get(e);if(i)return i;const s=new Float32Array(9),r=s.subarray(0,3),o=s.subarray(3,6);$C(n,o);const l=s.subarray(6,9);$C(t,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),GC(o,l,r)<u){let d,h;c?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const p=o[2]=(d+h)/2;c===GC(o,l,r)<u?d=p:h=p}o[2]=c?h:d}return pb(o,r),i=H.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),qC.set(e,i),i}function c2({html:n,dir:t,className:e},i){const s=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=t||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];r.append(document.createTextNode(u)),l<c-1&&r.append(document.createElement("br"))}s.append(r)}else l2.render({xfaHtml:n,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",e),i.append(s)}function u2(n){const t=new Path2D;if(!n)return t;for(let e=0,i=n.length;e<i;)switch(n[e++]){case dh.moveTo:t.moveTo(n[e++],n[e++]);break;case dh.lineTo:t.lineTo(n[e++],n[e++]);break;case dh.curveTo:t.bezierCurveTo(n[e++],n[e++],n[e++],n[e++],n[e++],n[e++]);break;case dh.quadraticCurveTo:t.quadraticCurveTo(n[e++],n[e++],n[e++],n[e++]);break;case dh.closePath:t.closePath();break;default:nt(`Unrecognized drawing path operator: ${n[e-1]}`);break}return t}var ar,Zi,fu,vo,Ka,Xd,d2,h2;const pt=class pt{constructor(){S(this,Xd)}get pagesNumber(){return a(pt,vo)}set pagesNumber(t){a(pt,vo)!==t&&(v(pt,vo,t),t===0&&(v(pt,Zi,null),v(pt,ar,null)))}addListener(t){a(pt,Ka).push(t)}removeListener(t){const e=a(pt,Ka).indexOf(t);e>=0&&a(pt,Ka).splice(e,1)}movePages(t,e,i){C(this,Xd,h2).call(this,!0);const s=a(pt,Zi),r=a(pt,ar);a(pt,fu).set(r);const o=e.length,l=new Uint32Array(o);let c=0;for(let p=0;p<o;p++){const x=e[p]-1;l[p]=s[x],x<i&&(c+=1)}const u=a(pt,vo);let d=i-c;const h=u-o;d=Ge(d,0,h);for(let p=0,x=0;p<u;p++)t.has(p+1)||(s[x++]=s[p]);s.copyWithin(d+o,d,h),s.set(l,d);let f=!1;for(let p=0,x=u;p<x;p++){const y=s[p];f||(f=y!==p+1),r[y-1]=p+1}C(this,Xd,d2).call(this),f||(this.pagesNumber=0)}hasBeenAltered(){return a(pt,Zi)!==null}getPageMappingForSaving(){return{pageIndices:a(pt,ar)?a(pt,ar).map(t=>t-1):null}}getPrevPageNumber(t){return a(pt,fu)[a(pt,Zi)[t-1]-1]}getPageNumber(t){var e;return((e=a(pt,ar))==null?void 0:e[t-1])??t}getPageId(t){var e;return((e=a(pt,Zi))==null?void 0:e[t-1])??t}static get instance(){return it(this,"instance",new pt)}getMapping(){return a(pt,Zi).subarray(0,this.pagesNumber)}};ar=new WeakMap,Zi=new WeakMap,fu=new WeakMap,vo=new WeakMap,Ka=new WeakMap,Xd=new WeakSet,d2=function(){for(const t of a(pt,Ka))t()},h2=function(t){if(a(pt,Zi))return;const e=a(pt,vo),i=new Uint32Array(3*e),s=v(pt,Zi,i.subarray(0,e)),r=v(pt,ar,i.subarray(e,2*e));if(t)for(let o=0;o<e;o++)s[o]=r[o]=o+1;v(pt,fu,i.subarray(2*e))},S(pt,ar,null),S(pt,Zi,null),S(pt,fu,null),S(pt,vo,0),S(pt,Ka,[]);let kf=pt;var xo,bo,Ei,Ti,Mf,wo,pu,mu,Nf,ey,f2,Ye,p2,m2,Mc,Sh;const sr=class sr{constructor(t){S(this,Ye);S(this,xo,null);S(this,bo,null);S(this,Ei);S(this,Ti,null);S(this,Mf,null);S(this,wo,null);S(this,pu,null);S(this,mu,null);v(this,Ei,t),a(sr,Nf)||v(sr,Nf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=v(this,xo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Ei)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",qi,{signal:e}),t.addEventListener("pointerdown",C(sr,ey,f2),{signal:e}));const i=v(this,Ti,document.createElement("div"));i.className="buttons",t.append(i);const s=a(this,Ei).toolbarPosition;if(s){const{style:r}=t,o=a(this,Ei)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return a(this,xo)}hide(){var t;a(this,xo).classList.add("hidden"),(t=a(this,bo))==null||t.hideDropdown()}show(){var t,e;a(this,xo).classList.remove("hidden"),(t=a(this,Mf))==null||t.shown(),(e=a(this,wo))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=a(this,Ei),i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",a(sr,Nf)[t]),C(this,Ye,Mc).call(this,i)&&i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),a(this,Ti).append(i)}async addAltText(t){const e=await t.render();C(this,Ye,Mc).call(this,e),a(this,Ti).append(e,a(this,Ye,Sh)),v(this,Mf,t)}addComment(t,e=null){if(a(this,wo))return;const i=t.renderForToolbar();if(!i)return;C(this,Ye,Mc).call(this,i);const s=v(this,pu,a(this,Ye,Sh));e?(a(this,Ti).insertBefore(i,e),a(this,Ti).insertBefore(s,e)):a(this,Ti).append(i,s),v(this,wo,t),t.toolbar=this}addColorPicker(t){if(a(this,bo))return;v(this,bo,t);const e=t.renderButton();C(this,Ye,Mc).call(this,e),a(this,Ti).append(e,a(this,Ye,Sh))}async addEditSignatureButton(t){const e=v(this,mu,await t.renderEditButton(a(this,Ei)));C(this,Ye,Mc).call(this,e),a(this,Ti).append(e,a(this,Ye,Sh))}removeButton(t){var e,i;switch(t){case"comment":(e=a(this,wo))==null||e.removeToolbarCommentButton(),v(this,wo,null),(i=a(this,pu))==null||i.remove(),v(this,pu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,i){if(!e&&t==="comment")return;const s=a(this,Ti).querySelector(i);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){a(this,mu)&&(a(this,mu).title=t)}remove(){var t;a(this,xo).remove(),(t=a(this,bo))==null||t.destroy(),v(this,bo,null)}};xo=new WeakMap,bo=new WeakMap,Ei=new WeakMap,Ti=new WeakMap,Mf=new WeakMap,wo=new WeakMap,pu=new WeakMap,mu=new WeakMap,Nf=new WeakMap,ey=new WeakSet,f2=function(t){t.stopPropagation()},Ye=new WeakSet,p2=function(t){a(this,Ei)._focusEventsAllowed=!1,ce(t)},m2=function(t){a(this,Ei)._focusEventsAllowed=!0,ce(t)},Mc=function(t){const e=a(this,Ei)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",C(this,Ye,p2).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,Ye,m2).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",qi,{signal:e}),!0)},Sh=function(){const t=document.createElement("div");return t.className="divider",t},S(sr,ey),S(sr,Nf,null);let mb=sr;var Lf,Ja,lr,so,g2,y2,gb;class zO{constructor(t){S(this,so);S(this,Lf,null);S(this,Ja,null);S(this,lr);v(this,lr,t)}show(t,e,i){const[s,r]=C(this,so,y2).call(this,e,i),{style:o}=a(this,Ja)||v(this,Ja,C(this,so,g2).call(this));t.append(a(this,Ja)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Ja).remove()}}Lf=new WeakMap,Ja=new WeakMap,lr=new WeakMap,so=new WeakSet,g2=function(){const t=v(this,Ja,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=a(this,lr)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",qi,{signal:e});const i=v(this,Lf,document.createElement("div"));return i.className="buttons",t.append(i),a(this,lr).hasCommentManager()&&C(this,so,gb).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,lr).commentSelection("floating_button")}),C(this,so,gb).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,lr).highlightSelection("floating_button")}),t},y2=function(t,e){let i=0,s=0;for(const r of t){const o=r.y+r.height;if(o<i)continue;const l=r.x+(e?r.width:0);if(o>i){s=l,i=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,i]},gb=function(t,e,i,s){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const l=a(this,lr)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",qi,{signal:l}),r.addEventListener("click",s,{signal:l})),a(this,Lf).append(r)};function v2(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var Za,tl,gu,el;const _t=class _t{static initializeAndAddPointerId(t){(a(_t,tl)||v(_t,tl,new Set)).add(t)}static setPointer(t,e){a(_t,Za)||v(_t,Za,e),a(_t,el)??v(_t,el,t)}static setTimeStamp(t){v(_t,gu,t)}static isSamePointerId(t){return a(_t,Za)===t}static isSamePointerIdOrRemove(t){var e;return a(_t,Za)===t?!0:((e=a(_t,tl))==null||e.delete(t),!1)}static isSamePointerType(t){return a(_t,el)===t}static isInitializedAndDifferentPointerType(t){return a(_t,el)!==null&&!_t.isSamePointerType(t)}static isSameTimeStamp(t){return a(_t,gu)===t}static isUsingMultiplePointers(){var t;return((t=a(_t,tl))==null?void 0:t.size)>=1}static clearPointerType(){v(_t,el,null)}static clearPointerIds(){v(_t,Za,NaN),v(_t,tl,null)}static clearTimeStamp(){v(_t,gu,NaN)}};Za=new WeakMap,tl=new WeakMap,gu=new WeakMap,el=new WeakMap,S(_t,Za,NaN),S(_t,tl,null),S(_t,gu,NaN),S(_t,el,null);let en=_t;var ny;class VO{constructor(){S(this,ny,0)}get id(){return`${Cf}${we(this,ny)._++}`}}ny=new WeakMap;var yu,Rf,nn,vu,Mg;const hS=class hS{constructor(){S(this,vu);S(this,yu,a2());S(this,Rf,0);S(this,nn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return it(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return C(this,vu,Mg).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return C(this,vu,Mg).call(this,t,t)}async getFromBlob(t,e){const i=await e;return C(this,vu,Mg).call(this,t,i)}async getFromId(t){a(this,nn)||v(this,nn,new Map);const e=a(this,nn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,nn)||v(this,nn,new Map);let i=a(this,nn).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${a(this,yu)}_${we(this,Rf)._++}`,refCounter:1,isSvg:!1},a(this,nn).set(t,i),a(this,nn).set(i.id,i),i}getSvgUrl(t){const e=a(this,nn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;a(this,nn)||v(this,nn,new Map);const e=a(this,nn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,yu)}_`)}};yu=new WeakMap,Rf=new WeakMap,nn=new WeakMap,vu=new WeakSet,Mg=async function(t,e){a(this,nn)||v(this,nn,new Map);let i=a(this,nn).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,yu)}_${we(this,Rf)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await Lm(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=hS._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,d)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,u()},o.onload=async()=>{const h=i.svgUrl=o.result;l.src=await r?`${h}#svgView(preserveAspectRatio(none))`:h},l.onerror=o.onerror=d});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){nt(s),i=null}return a(this,nn).set(t,i),i&&a(this,nn).set(i.id,i),i};let yb=hS;var ue,So,If,Yt;class UO{constructor(t=128){S(this,ue,[]);S(this,So,!1);S(this,If);S(this,Yt,-1);v(this,If,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,So))return;const c={cmd:t,undo:e,post:i,type:r};if(a(this,Yt)===-1){a(this,ue).length>0&&(a(this,ue).length=0),v(this,Yt,0),a(this,ue).push(c);return}if(o&&a(this,ue)[a(this,Yt)].type===r){l&&(c.undo=a(this,ue)[a(this,Yt)].undo),a(this,ue)[a(this,Yt)]=c;return}const u=a(this,Yt)+1;u===a(this,If)?a(this,ue).splice(0,1):(v(this,Yt,u),u<a(this,ue).length&&a(this,ue).splice(u)),a(this,ue).push(c)}undo(){if(a(this,Yt)===-1)return;v(this,So,!0);const{undo:t,post:e}=a(this,ue)[a(this,Yt)];t(),e==null||e(),v(this,So,!1),v(this,Yt,a(this,Yt)-1)}redo(){if(a(this,Yt)<a(this,ue).length-1){v(this,Yt,a(this,Yt)+1),v(this,So,!0);const{cmd:t,post:e}=a(this,ue)[a(this,Yt)];t(),e==null||e(),v(this,So,!1)}}hasSomethingToUndo(){return a(this,Yt)!==-1}hasSomethingToRedo(){return a(this,Yt)<a(this,ue).length-1}cleanType(t){if(a(this,Yt)!==-1){for(let e=a(this,Yt);e>=0;e--)if(a(this,ue)[e].type!==t){a(this,ue).splice(e+1,a(this,Yt)-e),v(this,Yt,e);return}a(this,ue).length=0,v(this,Yt,-1)}}destroy(){v(this,ue,null)}}ue=new WeakMap,So=new WeakMap,If=new WeakMap,Yt=new WeakMap;var iy,x2;class jm{constructor(t){S(this,iy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=_e.platform;for(const[i,s,r={}]of t)for(const o of i){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(C(this,iy,x2).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=i;l&&!l(t,e)||(s.bind(t,...o,e)(),r||ce(e))}}iy=new WeakSet,x2=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const sy=class sy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return IO(t),it(this,"_colors",t)}convert(t){const e=Im(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return sy._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?H.makeHexColor(...e):t}};L(sy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let vb=sy;var xu,$n,bu,Qt,de,wu,ki,Su,Pi,sn,Ao,Co,Au,Eo,Cs,_i,nl,jf,Ff,Cu,Of,Es,To,Eu,ko,Ts,ry,Po,Tu,Bf,_o,il,ku,Do,zf,ye,Et,cr,Mo,No,Vf,Pu,Uf,Lo,ks,ur,Hf,$f,Di,U,Ng,xb,b2,w2,Ah,S2,A2,C2,bb,E2,T2,k2,P2,hn,er,_2,D2,wb,M2,Ch,Sb;const nu=class nu{constructor(t,e,i,s,r,o,l,c,u,d,h,f,p,x,y,A){S(this,U);S(this,xu,new AbortController);S(this,$n,null);S(this,bu,null);S(this,Qt,new Map);S(this,de,new Map);S(this,wu,null);S(this,ki,null);S(this,Su,null);S(this,Pi,new UO);S(this,sn,null);S(this,Ao,null);S(this,Co,null);S(this,Au,0);S(this,Eo,new Set);S(this,Cs,null);S(this,_i,null);S(this,nl,new Set);L(this,"_editorUndoBar",null);S(this,jf,!1);S(this,Ff,!1);S(this,Cu,!1);S(this,Of,null);S(this,Es,null);S(this,To,null);S(this,Eu,null);S(this,ko,!1);S(this,Ts,null);S(this,ry,new VO);S(this,Po,!1);S(this,Tu,!1);S(this,Bf,!1);S(this,_o,null);S(this,il,null);S(this,ku,null);S(this,Do,null);S(this,zf,null);S(this,ye,rt.NONE);S(this,Et,new Set);S(this,cr,null);S(this,Mo,null);S(this,No,null);S(this,Vf,null);S(this,Pu,null);S(this,Uf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,Lo,[0,0]);S(this,ks,null);S(this,ur,null);S(this,Hf,null);S(this,$f,null);S(this,Di,null);const g=this._signal=a(this,xu).signal;v(this,ur,t),v(this,Hf,e),v(this,$f,i),v(this,wu,s),v(this,sn,r),v(this,Mo,o),v(this,Pu,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:g}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),l._on("setpreference",this.onSetPreference.bind(this),{signal:g}),l._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:g}),l._on("pagesedited",this.onPagesEdited.bind(this),{signal:g}),window.addEventListener("pointerdown",()=>{v(this,Tu,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{v(this,Tu,!1)},{capture:!0,signal:g}),C(this,U,S2).call(this),C(this,U,P2).call(this),C(this,U,bb).call(this),v(this,ki,c.annotationStorage),v(this,Of,c.filterFactory),v(this,No,u),v(this,Eu,d||null),v(this,jf,h),v(this,Ff,f),v(this,Cu,p),v(this,zf,x||null),this.viewParameters={realScale:_a.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=A!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const t=nu.prototype,e=o=>a(o,ur).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return it(this,"_keyboardManager",new jm([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,ur).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,ur).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i,s,r,o,l,c,u;(t=a(this,Di))==null||t.resolve(),v(this,Di,null),(e=a(this,xu))==null||e.abort(),v(this,xu,null),this._signal=null;for(const d of a(this,de).values())d.destroy();a(this,de).clear(),a(this,Qt).clear(),a(this,nl).clear(),(i=a(this,Do))==null||i.clear(),v(this,$n,null),a(this,Et).clear(),a(this,Pi).destroy(),(s=a(this,wu))==null||s.destroy(),(r=a(this,sn))==null||r.destroy(),(o=a(this,Mo))==null||o.destroy(),(l=a(this,Ts))==null||l.hide(),v(this,Ts,null),(c=a(this,ku))==null||c.destroy(),v(this,ku,null),v(this,bu,null),a(this,Es)&&(clearTimeout(a(this,Es)),v(this,Es,null)),a(this,ks)&&(clearTimeout(a(this,ks)),v(this,ks,null)),(u=this._editorUndoBar)==null||u.destroy(),v(this,Pu,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,zf)}get useNewAltTextFlow(){return a(this,Ff)}get useNewAltTextWhenAddingImage(){return a(this,Cu)}get hcmFilter(){return it(this,"hcmFilter",a(this,No)?a(this,Of).addHCMFilter(a(this,No).foreground,a(this,No).background):"none")}get direction(){return it(this,"direction",getComputedStyle(a(this,ur)).direction)}get _highlightColors(){return it(this,"_highlightColors",a(this,Eu)?new Map(a(this,Eu).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return it(this,"highlightColors",null);const e=new Map,i=!!a(this,No);for(const[s,r]of t){const o=s.endsWith("_HCM");if(i&&o){e.set(s.replace("_HCM",""),r);continue}!i&&!o&&e.set(s,r)}return it(this,"highlightColors",e)}get highlightColorNames(){return it(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),v(this,Co,t)}setMainHighlightColorPicker(t){v(this,ku,t)}editAltText(t,e=!1){var i;(i=a(this,wu))==null||i.editAltText(this,t,e)}hasCommentManager(){return!!a(this,sn)}editComment(t,e,i,s){var r;(r=a(this,sn))==null||r.showDialog(this,t,e,i,s)}selectComment(t,e){const i=a(this,de).get(t),s=i==null?void 0:i.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=a(this,sn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=a(this,sn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=a(this,sn))==null||e.removeComments([t.uid])}deleteComment(t,e){const i=()=>{t.comment=e},s=()=>{var r;(r=this._editorUndoBar)==null||r.show(i,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:s,undo:i,mustExec:!0})}toggleComment(t,e,i=void 0){var s;(s=a(this,sn))==null||s.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){var i;return t&&((i=a(this,sn))==null?void 0:i.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=a(this,sn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(a(this,de).has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),s=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await i}getSignature(t){var e;(e=a(this,Mo))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,Mo)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":v(this,Cu,e);break}}onPagesEdited({pagesMapper:t}){for(const s of a(this,Qt).values())s.updatePageIndex(t.getPrevPageNumber(s.pageIndex+1)-1);const e=a(this,de),i=v(this,de,new Map);for(const[s,r]of e){const o=t.getPrevPageNumber(s+1)-1;if(o===-1){r.destroy();continue}i.set(o,r),r.updatePageIndex(o)}}onPageChanging({pageNumber:t}){v(this,Au,t-1)}focusMainContainer(){a(this,ur).focus()}findParent(t,e){for(const i of a(this,de).values()){const{x:s,y:r,width:o,height:l}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+l)return i}return null}disableUserSelect(t=!1){a(this,Hf).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,nl).add(t)}removeShouldRescale(t){a(this,nl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*_a.PDF_TO_CSS_UNITS;for(const i of a(this,nl))i.onScaleChanging();(e=a(this,Co))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l}=i,c=i.toString(),d=C(this,U,Ng).call(this,i).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;i.empty();const f=C(this,U,xb).call(this,d),p=a(this,ye)===rt.NONE,x=()=>{const y=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l,text:c});p&&this.showAllEditors("highlight",!0,!0),e&&(y==null||y.editComment())};if(p){this.switchToMode(rt.HIGHLIGHT,x);return}x()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!a(this,ki))return null;const e=`${Cf}${t}`,i=a(this,ki).getRawValue(e);return i&&a(this,ki).remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&a(this,ki)&&!a(this,ki).has(t.id)&&a(this,ki).setValue(t.id,t)}a11yAlert(t,e=null){const i=a(this,$f);i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,ko)&&(v(this,ko,!1),C(this,U,Ah).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Et))if(e.div.contains(t)){v(this,il,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,il))return;const[t,e]=a(this,il);v(this,il,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,U,bb).call(this),this.setEditingState(!0)}removeEditListeners(){C(this,U,E2).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,_i))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,_i))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,$n))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,Et)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,_i))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){nt(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)C(this,U,wb).call(this,c);C(this,U,Sb).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){nt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,ye)!==rt.NONE&&!this.isEditorHandlingKeyboard&&nu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,ko)&&(v(this,ko,!1),C(this,U,Ah).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(C(this,U,A2).call(this),C(this,U,T2).call(this),C(this,U,hn).call(this,{isEditing:a(this,ye)!==rt.NONE,isEmpty:C(this,U,Ch).call(this),hasSomethingToUndo:a(this,Pi).hasSomethingToUndo(),hasSomethingToRedo:a(this,Pi).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,U,C2).call(this),C(this,U,k2).call(this),C(this,U,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,_i)){v(this,_i,t);for(const e of a(this,_i))C(this,U,er).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,ry).id}get currentLayer(){return a(this,de).get(a(this,Au))}getLayer(t){return a(this,de).get(t)}get currentPageIndex(){return a(this,Au)}addLayer(t){a(this,de).set(t.pageIndex,t),a(this,Po)?t.enable():t.disable()}removeLayer(t){a(this,de).delete(t.pageIndex)}async updateMode(t,e=null,i=!1,s=!1,r=!1,o=!1){var l,c,u,d,h,f;if(a(this,ye)!==t&&!(a(this,Di)&&(await a(this,Di).promise,!a(this,Di)))){if(v(this,Di,Promise.withResolvers()),(l=a(this,Co))==null||l.commitOrRemove(),a(this,ye)===rt.POPUP&&((c=a(this,sn))==null||c.hideSidebar()),(u=a(this,sn))==null||u.destroyPopup(),v(this,ye,t),t===rt.NONE){this.setEditingState(!1),C(this,U,D2).call(this);for(const p of a(this,Qt).values())p.hideStandaloneCommentButton();(d=this._editorUndoBar)==null||d.hide(),this.toggleComment(null),a(this,Di).resolve();return}for(const p of a(this,Qt).values())p.addStandaloneCommentButton();t===rt.SIGNATURE&&await((h=a(this,Mo))==null?void 0:h.loadSignatures()),i&&en.clearPointerType(),this.setEditingState(!0),await C(this,U,_2).call(this),this.unselectAll();for(const p of a(this,de).values())p.updateMode(t);if(t===rt.POPUP){a(this,bu)||v(this,bu,await a(this,Pu).getAnnotationsByType(new Set(a(this,_i).map(y=>y._editorType))));const p=new Set,x=[];for(const y of a(this,Qt).values()){const{annotationElementId:A,hasComment:g,deleted:w}=y;A&&p.add(A),g&&!w&&x.push(y.getData())}for(const y of a(this,bu)){const{id:A,popupRef:g,contentsObj:w}=y;g&&(w!=null&&w.str)&&!p.has(A)&&!a(this,Eo).has(A)&&x.push(y)}(f=a(this,sn))==null||f.showSidebar(x)}if(!e){s&&this.addNewEditorFromKeyboard(),a(this,Di).resolve();return}for(const p of a(this,Qt).values())p.uid===e?(this.setSelected(p),o?p.editComment():r?p.enterInEditMode():p.focus()):p.unselect();a(this,Di).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,ye)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(a(this,_i)){switch(t){case ht.CREATE:this.currentLayer.addNewEditor(e);return;case ht.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Vf)||v(this,Vf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of a(this,Et))i.updateParams(t,e);else for(const i of a(this,_i))i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const o of a(this,Qt).values())o.editorType===t&&o.show(e);(((r=a(this,Vf))==null?void 0:r.get(ht.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,U,er).call(this,[[ht.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Bf)!==t){v(this,Bf,t);for(const e of a(this,de).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of a(this,Qt).values())e.pageIndex===t&&(yield e)}getEditor(t){return a(this,Qt).get(t)}addEditor(t){a(this,Qt).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(a(this,Es)&&clearTimeout(a(this,Es)),v(this,Es,setTimeout(()=>{this.focusMainContainer(),v(this,Es,null)},0))),a(this,Qt).delete(t.id),t.annotationElementId&&((e=a(this,Do))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,Eo).has(t.annotationElementId))&&((i=a(this,ki))==null||i.remove(t.id))}addDeletedAnnotationElement(t){a(this,Eo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Eo).has(t)}removeDeletedAnnotationElement(t){a(this,Eo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,$n)!==t&&(v(this,$n,t),t&&C(this,U,er).call(this,t.propertiesToUpdate))}updateUI(t){a(this,U,M2)===t&&C(this,U,er).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){C(this,U,er).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,Et).has(t)){a(this,Et).delete(t),t.unselect(),C(this,U,hn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Et).add(t),t.select(),C(this,U,er).call(this,t.propertiesToUpdate),C(this,U,hn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=a(this,Co))==null||e.commitOrRemove();for(const i of a(this,Et))i!==t&&i.unselect();a(this,Et).clear(),a(this,Et).add(t),t.select(),C(this,U,er).call(this,t.propertiesToUpdate),C(this,U,hn).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Et).has(t)}get firstSelectedEditor(){return a(this,Et).values().next().value}unselect(t){t.unselect(),a(this,Et).delete(t),C(this,U,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Et).size!==0}get isEnterHandled(){return a(this,Et).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Pi).undo(),C(this,U,hn).call(this,{hasSomethingToUndo:a(this,Pi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,U,Ch).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Pi).redo(),C(this,U,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Pi).hasSomethingToRedo(),isEmpty:C(this,U,Ch).call(this)})}addCommands(t){a(this,Pi).add(t),C(this,U,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,U,Ch).call(this)})}cleanUndoStack(t){a(this,Pi).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,Et)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},s=()=>{for(const o of e)C(this,U,wb).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=a(this,$n))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,$n)||this.hasSelection}selectAll(){for(const t of a(this,Et))t.commit();C(this,U,Sb).call(this,a(this,Qt).values())}unselectAll(){var t;if(!(a(this,$n)&&(a(this,$n).commitOrRemove(),a(this,ye)!==rt.NONE))&&!((t=a(this,Co))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,Et))e.unselect();a(this,Et).clear(),C(this,U,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Lo)[0]+=t,a(this,Lo)[1]+=e;const[s,r]=a(this,Lo),o=[...a(this,Et)],l=1e3;a(this,ks)&&clearTimeout(a(this,ks)),v(this,ks,setTimeout(()=>{v(this,ks,null),a(this,Lo)[0]=a(this,Lo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,Qt).has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of o)a(this,Qt).has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,Cs,new Map);for(const t of a(this,Et))a(this,Cs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Cs))return!1;this.disableUserSelect(!1);const t=a(this,Cs);v(this,Cs,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},l]of t)l.newX=s,l.newY=r,l.newPageIndex=o,e||(e=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const i=(s,r,o,l)=>{if(a(this,Qt).has(s.id)){const c=a(this,de).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of t)i(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of t)i(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Cs))for(const i of a(this,Cs).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Et).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,$n)===t}getActive(){return a(this,$n)}getMode(){return a(this,ye)}isEditingMode(){return a(this,ye)!==rt.NONE}get imageManager(){return it(this,"imageManager",new yb)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,d=e.rangeCount;u<d;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-s)/o,y:1-(u+h-i)/r,width:f/o,height:h/r});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-i)/r,y:1-(d+f-s)/o,width:h/r,height:f/o});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-s)/o,y:(u-i)/r,width:f/o,height:h/r});break;default:l=(u,d,h,f)=>({x:(u-i)/r,y:(d-s)/o,width:h/r,height:f/o});break}const c=[];for(let u=0,d=e.rangeCount;u<d;u++){const h=e.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:x,height:y}of h.getClientRects())x===0||y===0||c.push(l(f,p,x,y))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Su)||v(this,Su,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Su))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,Su))==null?void 0:s.get(t.data.id);if(!e)return;const i=a(this,ki).getRawValue(e);i&&(a(this,ye)===rt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var r;const s=(r=a(this,Do))==null?void 0:r.get(t);s&&(s.setCanvas(e,i),a(this,Do).delete(t))}addMissingCanvas(t,e){(a(this,Do)||v(this,Do,new Map)).set(t,e)}};xu=new WeakMap,$n=new WeakMap,bu=new WeakMap,Qt=new WeakMap,de=new WeakMap,wu=new WeakMap,ki=new WeakMap,Su=new WeakMap,Pi=new WeakMap,sn=new WeakMap,Ao=new WeakMap,Co=new WeakMap,Au=new WeakMap,Eo=new WeakMap,Cs=new WeakMap,_i=new WeakMap,nl=new WeakMap,jf=new WeakMap,Ff=new WeakMap,Cu=new WeakMap,Of=new WeakMap,Es=new WeakMap,To=new WeakMap,Eu=new WeakMap,ko=new WeakMap,Ts=new WeakMap,ry=new WeakMap,Po=new WeakMap,Tu=new WeakMap,Bf=new WeakMap,_o=new WeakMap,il=new WeakMap,ku=new WeakMap,Do=new WeakMap,zf=new WeakMap,ye=new WeakMap,Et=new WeakMap,cr=new WeakMap,Mo=new WeakMap,No=new WeakMap,Vf=new WeakMap,Pu=new WeakMap,Uf=new WeakMap,Lo=new WeakMap,ks=new WeakMap,ur=new WeakMap,Hf=new WeakMap,$f=new WeakMap,Di=new WeakMap,U=new WeakSet,Ng=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},xb=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,de).values())if(i.hasTextLayer(t))return i;return null},b2=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=C(this,U,Ng).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(a(this,Ts)||v(this,Ts,new zO(this)),a(this,Ts).show(i,s,this.direction==="ltr"))},w2=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,cr)&&((r=a(this,Ts))==null||r.hide(),v(this,cr,null),C(this,U,hn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,cr))return;const s=C(this,U,Ng).call(this,t).closest(".textLayer");if(!s){a(this,cr)&&((o=a(this,Ts))==null||o.hide(),v(this,cr,null),C(this,U,hn).call(this,{hasSelectedText:!1}));return}if((l=a(this,Ts))==null||l.hide(),v(this,cr,e),C(this,U,hn).call(this,{hasSelectedText:!0}),!(a(this,ye)!==rt.HIGHLIGHT&&a(this,ye)!==rt.NONE)&&(a(this,ye)===rt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,ko,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,ye)===rt.HIGHLIGHT?C(this,U,xb).call(this,s):null;if(c==null||c.toggleDrawing(),a(this,Tu)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&C(this,U,Ah).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),C(this,U,Ah).call(this,"main_toolbar")}},Ah=function(t=""){a(this,ye)===rt.HIGHLIGHT?this.highlightSelection(t):a(this,jf)&&C(this,U,b2).call(this)},S2=function(){document.addEventListener("selectionchange",C(this,U,w2).bind(this),{signal:this._signal})},A2=function(){if(a(this,To))return;v(this,To,new AbortController);const t=this.combinedSignal(a(this,To));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},C2=function(){var t;(t=a(this,To))==null||t.abort(),v(this,To,null)},bb=function(){if(a(this,_o))return;v(this,_o,new AbortController);const t=this.combinedSignal(a(this,_o));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},E2=function(){var t;(t=a(this,_o))==null||t.abort(),v(this,_o,null)},T2=function(){if(a(this,Ao))return;v(this,Ao,new AbortController);const t=this.combinedSignal(a(this,Ao));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},k2=function(){var t;(t=a(this,Ao))==null||t.abort(),v(this,Ao,null)},P2=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},hn=function(t){Object.entries(t).some(([i,s])=>a(this,Uf)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Uf),t)}),a(this,ye)===rt.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,U,er).call(this,[[ht.HIGHLIGHT_FREE,!0]]))},er=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},_2=async function(){if(!a(this,Po)){v(this,Po,!0);const t=[];for(const e of a(this,de).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,Qt).values())e.enable()}},D2=function(){if(this.unselectAll(),a(this,Po)){v(this,Po,!1);for(const t of a(this,de).values())t.disable();for(const t of a(this,Qt).values())t.disable()}},wb=function(t){const e=a(this,de).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},M2=function(){let t=null;for(t of a(this,Et));return t},Ch=function(){if(a(this,Qt).size===0)return!0;if(a(this,Qt).size===1)for(const t of a(this,Qt).values())return t.isEmpty();return!1},Sb=function(t){for(const e of a(this,Et))e.unselect();a(this,Et).clear();for(const e of t)e.isEmpty()||(a(this,Et).add(e),e.select());C(this,U,hn).call(this,{hasSelectedEditor:this.hasSelection})},L(nu,"TRANSLATE_SMALL",1),L(nu,"TRANSLATE_BIG",10);let xc=nu;var De,Ps,ts,_u,_s,Wn,Du,Ds,kn,dr,sl,Ms,Ro,fs,Eh,Lg;const fn=class fn{constructor(t){S(this,fs);S(this,De,null);S(this,Ps,!1);S(this,ts,null);S(this,_u,null);S(this,_s,null);S(this,Wn,null);S(this,Du,!1);S(this,Ds,null);S(this,kn,null);S(this,dr,null);S(this,sl,null);S(this,Ms,!1);v(this,kn,t),v(this,Ms,t._uiManager.useNewAltTextFlow),a(fn,Ro)||v(fn,Ro,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){fn._l10n??(fn._l10n=t)}async render(){const t=v(this,ts,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=v(this,_u,document.createElement("span"));t.append(e),a(this,Ms)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(fn,Ro).missing),e.setAttribute("data-l10n-id",a(fn,Ro)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,kn)._uiManager._signal;t.addEventListener("contextmenu",qi,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),a(this,kn)._uiManager.editAltText(a(this,kn)),a(this,Ms)&&a(this,kn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,fs,Eh)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(v(this,Du,!0),s(r))},{signal:i}),await C(this,fs,Lg).call(this),t}finish(){a(this,ts)&&(a(this,ts).focus({focusVisible:a(this,Du)}),v(this,Du,!1))}isEmpty(){return a(this,Ms)?a(this,De)===null:!a(this,De)&&!a(this,Ps)}hasData(){return a(this,Ms)?a(this,De)!==null||!!a(this,dr):this.isEmpty()}get guessedText(){return a(this,dr)}async setGuessedText(t){a(this,De)===null&&(v(this,dr,t),v(this,sl,await fn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),C(this,fs,Lg).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Ms)||a(this,De)){(e=a(this,Ds))==null||e.remove(),v(this,Ds,null);return}if(!a(this,Ds)){const i=v(this,Ds,document.createElement("div"));i.className="noAltTextBadge",a(this,kn).div.append(i)}a(this,Ds).classList.toggle("hidden",!t)}serialize(t){let e=a(this,De);return!t&&a(this,dr)===e&&(e=a(this,sl)),{altText:e,decorative:a(this,Ps),guessedText:a(this,dr),textWithDisclaimer:a(this,sl)}}get data(){return{altText:a(this,De),decorative:a(this,Ps)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(v(this,dr,i),v(this,sl,s)),!(a(this,De)===t&&a(this,Ps)===e)&&(r||(v(this,De,t),v(this,Ps,e)),C(this,fs,Lg).call(this))}toggle(t=!1){a(this,ts)&&(!t&&a(this,Wn)&&(clearTimeout(a(this,Wn)),v(this,Wn,null)),a(this,ts).disabled=!t)}shown(){a(this,kn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,fs,Eh)}})}destroy(){var t,e;(t=a(this,ts))==null||t.remove(),v(this,ts,null),v(this,_u,null),v(this,_s,null),(e=a(this,Ds))==null||e.remove(),v(this,Ds,null)}};De=new WeakMap,Ps=new WeakMap,ts=new WeakMap,_u=new WeakMap,_s=new WeakMap,Wn=new WeakMap,Du=new WeakMap,Ds=new WeakMap,kn=new WeakMap,dr=new WeakMap,sl=new WeakMap,Ms=new WeakMap,Ro=new WeakMap,fs=new WeakSet,Eh=function(){return a(this,De)&&"added"||a(this,De)===null&&this.guessedText&&"review"||"missing"},Lg=async function(){var s,r,o;const t=a(this,ts);if(!t)return;if(a(this,Ms)){if(t.classList.toggle("done",!!a(this,De)),t.setAttribute("data-l10n-id",a(fn,Ro)[a(this,fs,Eh)]),(s=a(this,_u))==null||s.setAttribute("data-l10n-id",a(fn,Ro)[`${a(this,fs,Eh)}-label`]),!a(this,De)){(r=a(this,_s))==null||r.remove();return}}else{if(!a(this,De)&&!a(this,Ps)){t.classList.remove("done"),(o=a(this,_s))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,_s);if(!e){v(this,_s,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,kn).id}`;const l=100,c=a(this,kn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,Wn)),v(this,Wn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{v(this,Wn,setTimeout(()=>{v(this,Wn,null),a(this,_s).classList.add("show"),a(this,kn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;a(this,Wn)&&(clearTimeout(a(this,Wn)),v(this,Wn,null)),(u=a(this,_s))==null||u.classList.remove("show")},{signal:c})}a(this,Ps)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,De)),e.parentNode||t.append(e);const i=a(this,kn).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},S(fn,Ro,null),L(fn,"_l10n",null);let $0=fn;var ze,Mi,rl,Ot,Wf,Io,Ni,jo,Fo,ol,Gf,Ab;class og{constructor(t){S(this,Gf);S(this,ze,null);S(this,Mi,null);S(this,rl,!1);S(this,Ot,null);S(this,Wf,null);S(this,Io,null);S(this,Ni,null);S(this,jo,null);S(this,Fo,!1);S(this,ol,null);v(this,Ot,t)}renderForToolbar(){const t=v(this,Mi,document.createElement("button"));return t.className="comment",C(this,Gf,Ab).call(this,t,!1)}renderForStandalone(){const t=v(this,ze,document.createElement("button"));t.className="annotationCommentButton";const e=a(this,Ot).commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(a(this,Ot)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=a(this,Ot).commentButtonColor;s&&(i.backgroundColor=s)}return C(this,Gf,Ab).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=a(this,ze)??a(this,Mi))==null||t.focus()},0)}onUpdatedColor(){if(!a(this,ze))return;const t=a(this,Ot).commentButtonColor;t&&(a(this,ze).style.backgroundColor=t),a(this,Ot)._uiManager.updatePopupColor(a(this,Ot))}get commentButtonWidth(){var t;return(((t=a(this,ze))==null?void 0:t.getBoundingClientRect().width)??0)/a(this,Ot).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,ol))return a(this,ol);if(!a(this,ze))return null;const{x:t,y:e,height:i}=a(this,ze).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,Ot).parent.boundingClientRect;return[(t-s)/o,(e+i-r)/l]}set commentPopupPositionInLayer(t){v(this,ol,t)}hasDefaultPopupPosition(){return a(this,ol)===null}removeStandaloneCommentButton(){var t;(t=a(this,ze))==null||t.remove(),v(this,ze,null)}removeToolbarCommentButton(){var t;(t=a(this,Mi))==null||t.remove(),v(this,Mi,null)}setCommentButtonStates({selected:t,hasPopup:e}){a(this,ze)&&(a(this,ze).classList.toggle("selected",t),a(this,ze).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let i,s;if(e)[i,s]=e;else{[i,s]=a(this,Ot).commentButtonPosition;const{width:d,height:h,x:f,y:p}=a(this,Ot);i=f+i*d,s=p+s*h}const r=a(this,Ot).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=r;a(this,Ot)._uiManager.editComment(a(this,Ot),o+i*c,l+s*u,{...t,parentDimensions:r})}finish(){a(this,Mi)&&(a(this,Mi).focus({focusVisible:a(this,rl)}),v(this,rl,!1))}isDeleted(){return a(this,Fo)||a(this,Ni)===""}isEmpty(){return a(this,Ni)===null}hasBeenEdited(){return this.isDeleted()||a(this,Ni)!==a(this,Wf)}serialize(){return this.data}get data(){return{text:a(this,Ni),richText:a(this,Io),date:a(this,jo),deleted:this.isDeleted()}}set data(t){if(t!==a(this,Ni)&&v(this,Io,null),t===null){v(this,Ni,""),v(this,Fo,!0);return}v(this,Ni,t),v(this,jo,new Date),v(this,Fo,!1)}restoreData({text:t,richText:e,date:i}){v(this,Ni,t),v(this,Io,e),v(this,jo,i),v(this,Fo,!1)}setInitialText(t,e=null){v(this,Wf,t),this.data=t,v(this,jo,null),v(this,Io,e)}shown(){}destroy(){var t,e;(t=a(this,Mi))==null||t.remove(),v(this,Mi,null),(e=a(this,ze))==null||e.remove(),v(this,ze,null),v(this,Ni,""),v(this,Io,null),v(this,jo,null),v(this,Ot,null),v(this,rl,!1),v(this,Fo,!1)}}ze=new WeakMap,Mi=new WeakMap,rl=new WeakMap,Ot=new WeakMap,Wf=new WeakMap,Io=new WeakMap,Ni=new WeakMap,jo=new WeakMap,Fo=new WeakMap,ol=new WeakMap,Gf=new WeakSet,Ab=function(t,e){if(!a(this,Ot)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[a(this,Ot)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=a(this,Ot)._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",qi,{signal:i}),e&&(t.addEventListener("focusin",r=>{a(this,Ot)._focusEventsAllowed=!1,ce(r)},{capture:!0,signal:i}),t.addEventListener("focusout",r=>{a(this,Ot)._focusEventsAllowed=!0,ce(r)},{capture:!0,signal:i})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),t===a(this,Mi)?this.edit():a(this,Ot).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(v(this,rl,!0),s(r))},{signal:i}),t.addEventListener("pointerenter",()=>{a(this,Ot).toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{a(this,Ot).toggleComment(!1,!1)},{signal:i}),t};var Mu,al,qf,Xf,Yf,Qf,Kf,hr,ll,fr,cl,pr,Da,N2,L2,R2;const fS=class fS{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){S(this,Da);S(this,Mu);S(this,al,!1);S(this,qf,null);S(this,Xf);S(this,Yf);S(this,Qf);S(this,Kf);S(this,hr,null);S(this,ll);S(this,fr,null);S(this,cl);S(this,pr,null);v(this,Mu,t),v(this,qf,i),v(this,Xf,e),v(this,Yf,s),v(this,Qf,r),v(this,Kf,o),v(this,cl,new AbortController),v(this,ll,AbortSignal.any([l,a(this,cl).signal])),t.addEventListener("touchstart",C(this,Da,N2).bind(this),{passive:!1,signal:a(this,ll)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ks.pixelRatio}destroy(){var t,e;(t=a(this,cl))==null||t.abort(),v(this,cl,null),(e=a(this,hr))==null||e.abort(),v(this,hr,null)}};Mu=new WeakMap,al=new WeakMap,qf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,Kf=new WeakMap,hr=new WeakMap,ll=new WeakMap,fr=new WeakMap,cl=new WeakMap,pr=new WeakMap,Da=new WeakSet,N2=function(t){var s,r,o;if((s=a(this,Xf))!=null&&s.call(this))return;if(t.touches.length===1){if(a(this,hr))return;const l=v(this,hr,new AbortController),c=AbortSignal.any([a(this,ll),l.signal]),u=a(this,Mu),d={capture:!0,signal:c,passive:!1},h=f=>{var p;f.pointerType==="touch"&&((p=a(this,hr))==null||p.abort(),v(this,hr,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ce(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!a(this,pr)){v(this,pr,new AbortController);const l=AbortSignal.any([a(this,ll),a(this,pr).signal]),c=a(this,Mu),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",C(this,Da,L2).bind(this),u);const d=C(this,Da,R2).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",ce,u),c.addEventListener("pointermove",ce,u),c.addEventListener("pointercancel",ce,u),c.addEventListener("pointerup",ce,u),(r=a(this,Yf))==null||r.call(this)}if(ce(t),t.touches.length!==2||(o=a(this,qf))!=null&&o.call(this)){v(this,fr,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),v(this,fr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},L2=function(t){var E;if(!a(this,fr)||t.touches.length!==2)return;ce(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:l}=i,c=a(this,fr),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,p=h-u,x=f-d,y=o-s,A=l-r,g=Math.hypot(y,A)||1,w=Math.hypot(p,x)||1;if(!a(this,al)&&Math.abs(w-g)<=fS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,al)){v(this,al,!0);return}const b=[(s+o)/2,(r+l)/2];(E=a(this,Qf))==null||E.call(this,b,w,g)},R2=function(t){var e;t.touches.length>=2||(a(this,pr)&&(a(this,pr).abort(),v(this,pr,null),(e=a(this,Kf))==null||e.call(this)),a(this,fr)&&(ce(t),v(this,fr,null),v(this,al,!1)))};let W0=fS;var ul,es,Gt,Tt,mr,Nu,Oo,Jf,Ve,dl,gr,Li,Bo,Zf,hl,Gn,tp,fl,yr,Ns,Lu,Ru,Ri,pl,ep,oy,tt,Cb,np,Eb,Rg,I2,j2,Tb,Ig,kb,F2,O2,B2,Pb,z2,_b,V2,U2,H2,Db,Th;const st=class st{constructor(t){S(this,tt);S(this,ul,null);S(this,es,null);S(this,Gt,null);S(this,Tt,null);S(this,mr,null);S(this,Nu,!1);S(this,Oo,null);S(this,Jf,"");S(this,Ve,null);S(this,dl,null);S(this,gr,null);S(this,Li,null);S(this,Bo,null);S(this,Zf,"");S(this,hl,!1);S(this,Gn,null);S(this,tp,!1);S(this,fl,!1);S(this,yr,!1);S(this,Ns,null);S(this,Lu,0);S(this,Ru,0);S(this,Ri,null);S(this,pl,null);L(this,"isSelected",!1);L(this,"_isCopy",!1);L(this,"_editToolbar",null);L(this,"_initialOptions",Object.create(null));L(this,"_initialData",null);L(this,"_isVisible",!0);L(this,"_uiManager",null);L(this,"_focusEventsAllowed",!0);S(this,ep,!1);S(this,oy,st._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=st.prototype._resizeWithKeyboard,e=xc.TRANSLATE_SMALL,i=xc.TRANSLATE_BIG;return it(this,"_resizerKeyboardManager",new jm([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],st.prototype._stopResizingWithKeyboard]]))}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return it(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new HO({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(st._l10n??(st._l10n=t),st._l10nResizer||(st._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),st._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);st._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,ep)}set _isDraggable(t){var e;v(this,ep,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,oy)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(C(this,tt,Th).call(this),(e=a(this,Li))==null||e.remove(),v(this,Li,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,hl)?v(this,hl,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}translate(t,e){C(this,tt,Cb).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,Gn)||v(this,Gn,[this.x,this.y,this.width,this.height]),C(this,tt,Cb).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,Gn)||v(this,Gn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:d}=i;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,Gn)&&(a(this,Gn)[0]!==this.x||a(this,Gn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,Gn)&&(a(this,Gn)[2]!==this.width||a(this,Gn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=st,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=i,c*=s,r*=i,o*=s,this._mustFixPosition)switch(t){case 0:r=Ge(r,0,i-l),o=Ge(o,0,s-c);break;case 90:r=Ge(r,0,i-c),o=Ge(o,l,s);break;case 180:r=Ge(r,l,i),o=Ge(o,c,s);break;case 270:r=Ge(r,c,i),o=Ge(o,0,s-l);break}this.x=r/=i,this.y=o/=s;const[u,d]=this.getBaseTranslation();r+=u,o+=d,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return C(i=st,np,Eb).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return C(i=st,np,Eb).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Gt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,fl))return this._editToolbar;this._editToolbar=new mb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=a(this,Gt))==null||e.destroy()}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Gt)||($0.initialize(st._l10n),v(this,Gt,new $0(this)),a(this,ul)&&(a(this,Gt).data=a(this,ul),v(this,ul,null))),a(this,Gt)}get altTextData(){var t;return(t=a(this,Gt))==null?void 0:t.data}set altTextData(t){a(this,Gt)&&(a(this,Gt).data=t)}get guessedAltText(){var t;return(t=a(this,Gt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Gt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Gt))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Gt)&&!a(this,Gt).isEmpty()}hasAltTextData(){var t;return((t=a(this,Gt))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=a(this,Tt))==null||t.focusButton()}addCommentButton(){return this.canAddComment?a(this,Tt)||v(this,Tt,new og(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(a(this,mr)){this._uiManager.isEditingMode()&&a(this,mr).classList.remove("hidden");return}this.hasComment&&(v(this,mr,a(this,Tt).renderForStandalone()),this.div.append(a(this,mr)))}}removeStandaloneCommentButton(){a(this,Tt).removeStandaloneCommentButton(),v(this,mr,null)}hideStandaloneCommentButton(){var t;(t=a(this,mr))==null||t.classList.add("hidden")}get comment(){if(!a(this,Tt))return null;const{data:{richText:t,text:e,date:i,deleted:s}}=a(this,Tt);return{text:e,richText:t,date:i,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){a(this,Tt)||v(this,Tt,new og(this)),typeof t=="object"&&t!==null?a(this,Tt).restoreData(t):a(this,Tt).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(a(this,Tt)||v(this,Tt,new og(this)),a(this,Tt).setInitialText(t,i),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=a(this,Tt))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=a(this,Tt))==null?void 0:t.isDeleted()}get hasComment(){return!!a(this,Tt)&&!a(this,Tt).isEmpty()&&!a(this,Tt).isDeleted()}async editComment(t){a(this,Tt)||v(this,Tt,new og(this)),a(this,Tt).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){a(this,Tt).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,c=s-100,u=l+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){a(this,Tt).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,Nu)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),C(this,tt,_b).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),v2(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,pl)||v(this,pl,new W0({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,tt,F2).bind(this),onPinching:C(this,tt,O2).bind(this),onPinchEnd:C(this,tt,B2).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=_e.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(v(this,hl,!0),this._isDraggable){C(this,tt,z2).call(this,t);return}C(this,tt,Pb).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Ns)&&clearTimeout(a(this,Ns)),v(this,Ns,setTimeout(()=>{var t;v(this,Ns,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/s,d=e/s,h=this.x*r,f=this.y*o,p=this.width*r,x=this.height*o;switch(i){case 0:return[h+u+l,o-f-d-x+c,h+u+p+l,o-f-d+c];case 90:return[h+d+l,o-f+u+c,h+d+x+l,o-f+u+p+c];case 180:return[h-u-p+l,o-f+d+c,h-u+l,o-f+d+x+c];case 270:return[h-d-x+l,o-f-u-p+c,h-d+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,o]=t,l=r-i,c=o-s;switch(this.rotation){case 0:return[i,e-o,l,c];case 90:return[i,e-s,c,l];case 180:return[r,e-s,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&st._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=a(this,Tt))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:s,deleted:r,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:u,modificationDate:i||d,popupRef:!r,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),v(this,fl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),v(this,fl,!1),!0):!1}isInEditMode(){return a(this,fl)}shouldGetKeyboardEvents(){return a(this,yr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&i>0}rebuild(){C(this,tt,_b).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var i;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((i=this._initialData)==null?void 0:i.popupRef)||""}}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,v(s,ul,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[l,c,u,d]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/r,s.y=c/o,s.width=u/r,s.height=d/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,i;if((t=a(this,Bo))==null||t.abort(),v(this,Bo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),a(this,Ns)&&(clearTimeout(a(this,Ns)),v(this,Ns,null)),C(this,tt,Th).call(this),this.removeEditToolbar(),a(this,Ri)){for(const s of a(this,Ri).values())clearTimeout(s);v(this,Ri,null)}this.parent=null,(e=a(this,pl))==null||e.destroy(),v(this,pl,null),(i=a(this,Li))==null||i.remove(),v(this,Li,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,tt,I2).call(this),a(this,Ve).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,s,r,o]=this.getPDFRect();return[st._round(i+(r-i)*t),st._round(s+(o-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Tt).commentPopupPositionInLayer}set commentPopupPosition(t){a(this,Tt).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return a(this,Tt).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Tt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=a(this,Tt))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),v(this,gr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Ve).children;if(!a(this,es)){v(this,es,Array.from(e));const o=C(this,tt,V2).bind(this),l=C(this,tt,U2).bind(this),c=this._uiManager._signal;for(const u of a(this,es)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",C(this,tt,H2).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",st._l10nResizer[d])}}const i=a(this,es)[0];let s=0;for(const o of e){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,es).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,Ve).append(a(this,Ve).firstElementChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,Ve).firstElementChild.before(a(this,Ve).lastElementChild);let o=0;for(const l of e){const u=a(this,es)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",st._l10nResizer[u])}}C(this,tt,Db).call(this,0),v(this,yr,!0),a(this,Ve).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,yr)&&C(this,tt,kb).call(this,a(this,Zf),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,tt,Th).call(this),this.div.focus()}select(){var t,e,i;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,Gt))==null||i.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,i,s,r;this.isSelected&&(this.isSelected=!1,(t=a(this,Ve))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Gt))==null||r.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,tp)}set isEditing(t){v(this,tp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Ri)||v(this,Ri,new Map);const{action:i}=t;let s=a(this,Ri).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,Ri).delete(i),a(this,Ri).size===0&&v(this,Ri,null)},st._telemetryTimeout),a(this,Ri).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),v(this,Nu,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,Nu,!0)}updateFakeAnnotationElement(t){if(!a(this,Li)&&!this.deleted){v(this,Li,t.addFakeAnnotation(this));return}if(this.deleted){a(this,Li).remove(),v(this,Li,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,Li).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ul=new WeakMap,es=new WeakMap,Gt=new WeakMap,Tt=new WeakMap,mr=new WeakMap,Nu=new WeakMap,Oo=new WeakMap,Jf=new WeakMap,Ve=new WeakMap,dl=new WeakMap,gr=new WeakMap,Li=new WeakMap,Bo=new WeakMap,Zf=new WeakMap,hl=new WeakMap,Gn=new WeakMap,tp=new WeakMap,fl=new WeakMap,yr=new WeakMap,Ns=new WeakMap,Lu=new WeakMap,Ru=new WeakMap,Ri=new WeakMap,pl=new WeakMap,ep=new WeakMap,oy=new WeakMap,tt=new WeakSet,Cb=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},np=new WeakSet,Eb=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Rg=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},I2=function(){if(a(this,Ve))return;v(this,Ve,document.createElement("div")),a(this,Ve).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");a(this,Ve).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",C(this,tt,j2).bind(this,i),{signal:e}),s.addEventListener("contextmenu",qi,{signal:e}),s.tabIndex=-1}this.div.prepend(a(this,Ve))},j2=function(t,e){var d;e.preventDefault();const{isMac:i}=_e.platform;if(e.button!==0||e.ctrlKey&&i)return;(d=a(this,Gt))==null||d.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,v(this,dl,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,tt,kb).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ce,{passive:!1,signal:o}),window.addEventListener("contextmenu",qi,{signal:o}),v(this,gr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var h;r.abort(),this.parent.togglePointerEvents(!0),(h=a(this,Gt))==null||h.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,C(this,tt,Ig).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Tb=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Ig=function(){if(!a(this,gr))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=a(this,gr);v(this,gr,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===i&&c===s||this.addCommands({cmd:C(this,tt,Tb).bind(this,r,o,l,c),undo:C(this,tt,Tb).bind(this,t,e,i,s),mustExec:!0})},kb=function(t,e){const[i,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=st.MIN_SIZE/i,d=st.MIN_SIZE/s,h=C(this,tt,Rg).call(this,this.rotation),f=(O,z)=>[h[0]*O+h[2]*z,h[1]*O+h[3]*z],p=C(this,tt,Rg).call(this,360-this.rotation),x=(O,z)=>[p[0]*O+p[2]*z,p[1]*O+p[3]*z];let y,A,g=!1,w=!1;switch(t){case"topLeft":g=!0,y=(O,z)=>[0,0],A=(O,z)=>[O,z];break;case"topMiddle":y=(O,z)=>[O/2,0],A=(O,z)=>[O/2,z];break;case"topRight":g=!0,y=(O,z)=>[O,0],A=(O,z)=>[0,z];break;case"middleRight":w=!0,y=(O,z)=>[O,z/2],A=(O,z)=>[0,z/2];break;case"bottomRight":g=!0,y=(O,z)=>[O,z],A=(O,z)=>[0,0];break;case"bottomMiddle":y=(O,z)=>[O/2,z],A=(O,z)=>[O/2,0];break;case"bottomLeft":g=!0,y=(O,z)=>[0,z],A=(O,z)=>[O,0];break;case"middleLeft":w=!0,y=(O,z)=>[0,z/2],A=(O,z)=>[O,z/2];break}const b=y(l,c),E=A(l,c);let T=f(...E);const P=st._round(r+T[0]),k=st._round(o+T[1]);let _=1,D=1,M,R;if(e.fromKeyboard)({deltaX:M,deltaY:R}=e);else{const{screenX:O,screenY:z}=e,[j,q]=a(this,dl);[M,R]=this.screenToPageTranslation(O-j,z-q),a(this,dl)[0]=O,a(this,dl)[1]=z}if([M,R]=x(M/i,R/s),g){const O=Math.hypot(l,c);_=D=Math.max(Math.min(Math.hypot(E[0]-b[0]-M,E[1]-b[1]-R)/O,1/l,1/c),u/l,d/c)}else w?_=Ge(Math.abs(E[0]-b[0]-M),u,1)/l:D=Ge(Math.abs(E[1]-b[1]-R),d,1)/c;const V=st._round(l*_),G=st._round(c*D);T=f(...A(V,G));const I=P-T[0],F=k-T[1];a(this,Gn)||v(this,Gn,[this.x,this.y,this.width,this.height]),this.width=V,this.height=G,this.x=I,this.y=F,this.setDims(),this.fixAndSetPosition(),this._onResizing()},F2=function(){var t;v(this,gr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Gt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},O2=function(t,e,i){let r=.7*(i/e)+1-.7;if(r===1)return;const o=C(this,tt,Rg).call(this,this.rotation),l=(P,k)=>[o[0]*P+o[2]*k,o[1]*P+o[3]*k],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,x=st.MIN_SIZE/c,y=st.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),x/f,y/p);const A=st._round(f*r),g=st._round(p*r);if(A===f&&g===p)return;a(this,Gn)||v(this,Gn,[d,h,f,p]);const w=l(f/2,p/2),b=st._round(d+w[0]),E=st._round(h+w[1]),T=l(A/2,g/2);this.x=b-T[0],this.y=E-T[1],this.width=A,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()},B2=function(){var t;(t=a(this,Gt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),C(this,tt,Ig).call(this)},Pb=function(t){const{isMac:e}=_e.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},z2=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=u=>{s.abort(),v(this,Oo,null),v(this,hl,!1),this._uiManager.endDragSession()||C(this,tt,Pb).call(this,u),i&&this._onStopDragging()};e&&(v(this,Lu,t.clientX),v(this,Ru,t.clientY),v(this,Oo,t.pointerId),v(this,Jf,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==a(this,Oo)){ce(u);return}const[p,x]=this.screenToPageTranslation(d-a(this,Lu),h-a(this,Ru));v(this,Lu,d),v(this,Ru,h),this._uiManager.dragSelectedEditors(p,x)},o),window.addEventListener("touchmove",ce,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,Jf)&&(a(this,pl)||u.isPrimary)&&l(u),ce(u)},o));const c=u=>{if(!a(this,Oo)||a(this,Oo)===u.pointerId){l(u);return}ce(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},_b=function(){if(a(this,Bo)||!this.div)return;v(this,Bo,new AbortController);const t=this._uiManager.combinedSignal(a(this,Bo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},V2=function(t){st._resizerKeyboardManager.exec(this,t)},U2=function(t){var e;a(this,yr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Ve)&&C(this,tt,Th).call(this)},H2=function(t){v(this,Zf,a(this,yr)?t:"")},Db=function(t){if(a(this,es))for(const e of a(this,es))e.tabIndex=t},Th=function(){v(this,yr,!1),C(this,tt,Db).call(this,-1),C(this,tt,Ig).call(this)},S(st,np),L(st,"_l10n",null),L(st,"_l10nResizer",null),L(st,"_borderLineWidth",-1),L(st,"_colorManager",new vb),L(st,"_zIndex",1),L(st,"_telemetryTimeout",1e3);let zt=st;class HO extends zt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const XC=3285377520,Si=4294901760,ws=65535;class $2{constructor(t){this.h1=t?t&4294967295:XC,this.h2=t?t&4294967295:XC}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let y=0,A=t.length;y<A;y++){const g=t.charCodeAt(y);g<=255?e[i++]=g:(e[i++]=g>>>8,e[i++]=g&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&ws,x=f&ws;for(let y=0;y<s;y++)y&1?(l=o[y],l=l*h&Si|l*p&ws,l=l<<15|l>>>17,l=l*f&Si|l*x&ws,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[y],c=c*h&Si|c*p&ws,c=c<<15|c>>>17,c=c*f&Si|c*x&ws,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*h&Si|l*p&ws,l=l<<15|l>>>17,l=l*f&Si|l*x&ws,s&1?u^=l:d^=l}this.h1=u,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Si|t*36045&ws,e=e*4283543511&Si|((e<<16|t>>>16)*2950163797&Si)>>>16,t^=e>>>1,t=t*444984403&Si|t*60499&ws,e=e*3301882366&Si|((e<<16|t>>>16)*3120437893&Si)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Mb=Object.freeze({map:null,hash:"",transfer:void 0});var ml,gl,vr,Ue,ay,W2;class rS{constructor(){S(this,ay);S(this,ml,!1);S(this,gl,null);S(this,vr,null);S(this,Ue,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,Ue).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,Ue).get(t)}remove(t){const e=a(this,Ue).get(t);if(e!==void 0&&(e instanceof zt&&a(this,vr).delete(e.annotationElementId),a(this,Ue).delete(t),a(this,Ue).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of a(this,Ue).values())if(i instanceof zt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,Ue).get(t);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,a(this,Ue).set(t,e);s&&C(this,ay,W2).call(this),e instanceof zt&&((a(this,vr)||v(this,vr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return a(this,Ue).has(t)}get size(){return a(this,Ue).size}resetModified(){a(this,ml)&&(v(this,ml,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G2(this)}get serializable(){if(a(this,Ue).size===0)return Mb;const t=new Map,e=new $2,i=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,Ue)){const c=l instanceof zt?l.serialize(!1,s):l;l.page&&(l.pageIndex=l.page._pageIndex,delete l.page),c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Mb}get editorStats(){let t=null;const e=new Map;let i=0,s=0;for(const r of a(this,Ue).values()){if(!(r instanceof zt)){r.popup&&(r.popup.deleted?s+=1:i+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(i+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:l}=o;e.has(l)||e.set(l,Object.getPrototypeOf(r).constructor),t||(t=Object.create(null));const c=t[l]||(t[l]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((s>0||i>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:i}),!t)return null;for(const[r,o]of e)t[r]=o.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){v(this,gl,null)}updateEditor(t,e){var s;const i=(s=a(this,vr))==null?void 0:s.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=a(this,vr))==null?void 0:e.get(t))||null}get modifiedIds(){if(a(this,gl))return a(this,gl);const t=[];if(a(this,vr))for(const e of a(this,vr).values())e.serialize()&&t.push(e.annotationElementId);return v(this,gl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,Ue).entries()}}ml=new WeakMap,gl=new WeakMap,vr=new WeakMap,Ue=new WeakMap,ay=new WeakSet,W2=function(){a(this,ml)||(v(this,ml,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ip;class G2 extends rS{constructor(e){super();S(this,ip);const{map:i,hash:s,transfer:r}=e.serializable,o=structuredClone(i,r?{transfer:r}:null);v(this,ip,{map:o,hash:s,transfer:r})}get print(){bt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,ip)}get modifiedIds(){return it(this,"modifiedIds",{ids:new Set,hash:""})}}ip=new WeakMap;var Iu;class $O{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){S(this,Iu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Iu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||a(this,Iu).has(t.loadedName))){if(xt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,Iu).add(s),i==null||i(t)}catch{nt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw nt(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return it(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return it(this,"isSyncFontLoadingSupported",vn||_e.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(xt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return it(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function s(E,T,P,k){const _=E.substring(0,T),D=E.substring(T+P);return _+k+D}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function d(E,T){if(++u>30){nt("Load test font never loaded."),T();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,E,T))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,h.length,h);const x=16,y=1482184792;let A=i(f,x);for(r=0,o=h.length-3;r<o;r+=4)A=A-y+i(h,r)|0;r<h.length&&(A=A-y+i(h+"XXX",r)|0),f=s(f,x,4,EO(A));const g=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${h}";src:${g}}`;this.insertRule(w);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const E of[t.loadedName,h]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,b.append(T)}this._document.body.append(b),d(h,()=>{b.remove(),e.complete()})}}Iu=new WeakMap;var Dt;class WO{constructor(t,e=null,i,s){S(this,Dt);this.compiledGlyphs=Object.create(null),v(this,Dt,t),this._inspectFont=e,i&&Object.assign(this,i),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(o){nt(`getPathGenerator - ignoring character: "${o}".`)}const r=u2(s==null?void 0:s.path);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}get black(){return a(this,Dt).black}get bold(){return a(this,Dt).bold}get disableFontFace(){return a(this,Dt).disableFontFace??!1}set disableFontFace(t){it(this,"disableFontFace",!!t)}get fontExtraProperties(){return a(this,Dt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,Dt).isInvalidPDFjsFont}get isType3Font(){return a(this,Dt).isType3Font}get italic(){return a(this,Dt).italic}get missingFile(){return a(this,Dt).missingFile}get remeasure(){return a(this,Dt).remeasure}get vertical(){return a(this,Dt).vertical}get ascent(){return a(this,Dt).ascent}get defaultWidth(){return a(this,Dt).defaultWidth}get descent(){return a(this,Dt).descent}get bbox(){return a(this,Dt).bbox}set bbox(t){it(this,"bbox",t)}get fontMatrix(){return a(this,Dt).fontMatrix}get fallbackName(){return a(this,Dt).fallbackName}get loadedName(){return a(this,Dt).loadedName}get mimetype(){return a(this,Dt).mimetype}get name(){return a(this,Dt).name}get data(){return a(this,Dt).data}clearData(){a(this,Dt).clearData()}get cssFontInfo(){return a(this,Dt).cssFontInfo}get systemFontInfo(){return a(this,Dt).systemFontInfo}get defaultVMetrics(){return a(this,Dt).defaultVMetrics}}Dt=new WeakMap;var ju,Fu,sp,Ou,jg;const iu=class iu{constructor(t){S(this,Ou);S(this,ju);S(this,Fu);S(this,sp);v(this,ju,t),v(this,Fu,new DataView(a(this,ju))),v(this,sp,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let s=0;for(const u of iu.strings){const d=e.encode(t[u]);i[u]=d,s+=4+d.length}const r=new ArrayBuffer(s),o=new Uint8Array(r),l=new DataView(r);let c=0;for(const u of iu.strings){const d=i[u],h=d.length;l.setUint32(c,h),o.set(d,c+4),c+=4+h}return xt(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return C(this,Ou,jg).call(this,0)}get fontWeight(){return C(this,Ou,jg).call(this,1)}get italicAngle(){return C(this,Ou,jg).call(this,2)}};ju=new WeakMap,Fu=new WeakMap,sp=new WeakMap,Ou=new WeakSet,jg=function(t){xt(t<iu.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=a(this,Fu).getUint32(e)+4;const i=a(this,Fu).getUint32(e);return a(this,sp).decode(new Uint8Array(a(this,ju),e+4,i))},L(iu,"strings",["fontFamily","fontWeight","italicAngle"]);let G0=iu;var zo,Ls,yl,vl,kh;const su=class su{constructor(t){S(this,vl);S(this,zo);S(this,Ls);S(this,yl);v(this,zo,t),v(this,Ls,new DataView(a(this,zo))),v(this,yl,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let s=0;for(const f of su.strings){const p=e.encode(t[f]);i[f]=p,s+=4+p.length}s+=4;let r,o,l=1+s;t.style&&(r=e.encode(t.style.style),o=e.encode(t.style.weight),l+=4+r.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,t.guessFallback?1:0),d.setUint32(h,0),h+=4,s=0;for(const f of su.strings){const p=i[f],x=p.length;s+=4+x,d.setUint32(h,x),u.set(p,h+4),h+=4+x}return d.setUint32(h-s-4,s),t.style&&(d.setUint32(h,r.length),u.set(r,h+4),h+=4+r.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),xt(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return a(this,Ls).getUint8(0)!==0}get css(){return C(this,vl,kh).call(this,0)}get loadedName(){return C(this,vl,kh).call(this,1)}get baseFontName(){return C(this,vl,kh).call(this,2)}get src(){return C(this,vl,kh).call(this,3)}get style(){let t=1;t+=4+a(this,Ls).getUint32(t);const e=a(this,Ls).getUint32(t),i=a(this,yl).decode(new Uint8Array(a(this,zo),t+4,e));t+=4+e;const s=a(this,Ls).getUint32(t),r=a(this,yl).decode(new Uint8Array(a(this,zo),t+4,s));return{style:i,weight:r}}};zo=new WeakMap,Ls=new WeakMap,yl=new WeakMap,vl=new WeakSet,kh=function(t){xt(t<su.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=a(this,Ls).getUint32(e)+4;const i=a(this,Ls).getUint32(e);return a(this,yl).decode(new Uint8Array(a(this,zo),e+4,i))},L(su,"strings",["css","loadedName","baseFontName","src"]);let q0=su;var Bu,zu,Vu,Uu,qn,Rs,rp,Mt,ae,Qi,Fg,Ph;const ot=class ot{constructor({data:t,extra:e}){S(this,ae);S(this,Rs);S(this,rp);S(this,Mt);v(this,Rs,t),v(this,rp,new TextDecoder),v(this,Mt,new DataView(a(this,Rs))),e&&Object.assign(this,e)}get black(){return C(this,ae,Qi).call(this,0)}get bold(){return C(this,ae,Qi).call(this,1)}get disableFontFace(){return C(this,ae,Qi).call(this,2)}get fontExtraProperties(){return C(this,ae,Qi).call(this,3)}get isInvalidPDFjsFont(){return C(this,ae,Qi).call(this,4)}get isType3Font(){return C(this,ae,Qi).call(this,5)}get italic(){return C(this,ae,Qi).call(this,6)}get missingFile(){return C(this,ae,Qi).call(this,7)}get remeasure(){return C(this,ae,Qi).call(this,8)}get vertical(){return C(this,ae,Qi).call(this,9)}get ascent(){return C(this,ae,Fg).call(this,0)}get defaultWidth(){return C(this,ae,Fg).call(this,1)}get descent(){return C(this,ae,Fg).call(this,2)}get bbox(){let t=a(ot,zu);if(a(this,Mt).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<4;s++)i.push(a(this,Mt).getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=a(ot,Vu);if(a(this,Mt).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<6;s++)i.push(a(this,Mt).getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=a(ot,Uu);if(a(this,Mt).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<3;s++)i.push(a(this,Mt).getInt16(t,!0)),t+=2;return i}get fallbackName(){return C(this,ae,Ph).call(this,0)}get loadedName(){return C(this,ae,Ph).call(this,1)}get mimetype(){return C(this,ae,Ph).call(this,2)}get name(){return C(this,ae,Ph).call(this,3)}get data(){let t=a(ot,qn);const e=a(this,Mt).getUint32(t);t+=4+e;const i=a(this,Mt).getUint32(t);t+=4+i;const s=a(this,Mt).getUint32(t);t+=4+s;const r=a(this,Mt).getUint32(t);if(r!==0)return new Uint8Array(a(this,Rs),t+4,r)}clearData(){let t=a(ot,qn);const e=a(this,Mt).getUint32(t);t+=4+e;const i=a(this,Mt).getUint32(t);t+=4+i;const s=a(this,Mt).getUint32(t);t+=4+s;const r=a(this,Mt).getUint32(t);new Uint8Array(a(this,Rs),t+4,r).fill(0),a(this,Mt).setUint32(t,0)}get cssFontInfo(){let t=a(ot,qn);const e=a(this,Mt).getUint32(t);t+=4+e;const i=a(this,Mt).getUint32(t);t+=4+i;const s=a(this,Mt).getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(a(this,Rs),t+4,s)),new G0(r.buffer)}get systemFontInfo(){let t=a(ot,qn);const e=a(this,Mt).getUint32(t);t+=4+e;const i=a(this,Mt).getUint32(t);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(a(this,Rs),t+4,i)),new q0(s.buffer)}static write(t){const e=t.systemFontInfo?q0.write(t.systemFontInfo):null,i=t.cssFontInfo?G0.write(t.cssFontInfo):null,s=new TextEncoder,r={};let o=0;for(const y of ot.strings)r[y]=s.encode(t[y]),o+=4+r[y].length;const l=a(ot,qn)+4+o+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=ot.bools.length;let p=0,x=0;for(let y=0;y<f;y++){const A=t[ot.bools[y]];p|=(A===void 0?0:A?2:1)<<x,x+=2,(x===8||y===f-1)&&(d.setUint8(h++,p),p=0,x=0)}xt(h===a(ot,Bu),"FontInfo.write: Boolean properties offset mismatch");for(const y of ot.numbers)d.setFloat64(h,t[y]),h+=8;if(xt(h===a(ot,zu),"FontInfo.write: Number properties offset mismatch"),t.bbox){d.setUint8(h++,4);for(const y of t.bbox)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(xt(h===a(ot,Vu),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){d.setUint8(h++,6);for(const y of t.fontMatrix)d.setFloat64(h,y,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(xt(h===a(ot,Uu),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){d.setUint8(h++,1);for(const y of t.defaultVMetrics)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=3*2;xt(h===a(ot,qn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(a(ot,qn),0),h+=4;for(const y of ot.strings){const A=r[y],g=A.length;d.setUint32(h,g),u.set(A,h+4),h+=4+g}if(d.setUint32(a(ot,qn),h-a(ot,qn)-4),!e)d.setUint32(h,0),h+=4;else{const y=e.byteLength;d.setUint32(h,y),xt(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),h+4),h+=4+y}if(!i)d.setUint32(h,0),h+=4;else{const y=i.byteLength;d.setUint32(h,y),xt(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),h+4),h+=4+y}return t.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,t.data.length),u.set(t.data,h+4),h+=4+t.data.length),xt(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};Bu=new WeakMap,zu=new WeakMap,Vu=new WeakMap,Uu=new WeakMap,qn=new WeakMap,Rs=new WeakMap,rp=new WeakMap,Mt=new WeakMap,ae=new WeakSet,Qi=function(t){xt(t<ot.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,s=a(this,Mt).getUint8(e)>>i&3;return s===0?void 0:s===2},Fg=function(t){return xt(t<ot.numbers.length,"Invalid number index"),a(this,Mt).getFloat64(a(ot,Bu)+t*8)},Ph=function(t){xt(t<ot.strings.length,"Invalid string index");let e=a(ot,qn)+4;for(let r=0;r<t;r++)e+=a(this,Mt).getUint32(e)+4;const i=a(this,Mt).getUint32(e),s=new Uint8Array(i);return s.set(new Uint8Array(a(this,Rs),e+4,i)),a(this,rp).decode(s)},L(ot,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),L(ot,"numbers",["ascent","defaultWidth","descent"]),L(ot,"strings",["fallbackName","loadedName","mimetype","name"]),S(ot,Bu,Math.ceil(ot.bools.length*2/8)),S(ot,zu,a(ot,Bu)+ot.numbers.length*8),S(ot,Vu,a(ot,zu)+1+2*4),S(ot,Uu,a(ot,Vu)+1+8*6),S(ot,qn,a(ot,Uu)+1+2*3);let Nb=ot;var op,ap,lp,cp,up,dp,hp,fp;const Ft=class Ft{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,s=[],r=[],o=[],l=[],c=null,u=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],o=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,c=t[1],s=t[2],r=t[3],l=t[4]||[],i=t[6],u=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const d=Math.floor(s.length/2),h=Math.floor(r.length/3),f=o.length,p=l.length;let x=0;for(const T of l)x+=1,x=Math.ceil(x/4)*4,x+=4+T.coords.length*4,x+=4+T.colors.length*4,T.verticesPerRow!==void 0&&(x+=4);const y=20+d*8+h*3+f*8+(i?16:0)+(u?3:0)+x,A=new ArrayBuffer(y),g=new DataView(A),w=new Uint8Array(A);g.setUint8(a(Ft,op),e),g.setUint8(a(Ft,ap),i?1:0),g.setUint8(a(Ft,lp),u?1:0),g.setUint8(a(Ft,cp),c),g.setUint32(a(Ft,up),d,!0),g.setUint32(a(Ft,dp),h,!0),g.setUint32(a(Ft,hp),f,!0),g.setUint32(a(Ft,fp),p,!0);let b=20;new Float32Array(A,b,d*2).set(s),b+=d*8,w.set(r,b),b+=h*3;for(const[T,P]of o)g.setFloat32(b,T,!0),b+=4,g.setUint32(b,parseInt(P.slice(1),16),!0),b+=4;if(i)for(const T of i)g.setFloat32(b,T,!0),b+=4;u&&(w.set(u,b),b+=3);for(let T=0;T<l.length;T++){const P=l[T];g.setUint8(b,P.type),b+=1,b=Math.ceil(b/4)*4,g.setUint32(b,P.coords.length,!0),b+=4,new Int32Array(A,b,P.coords.length).set(P.coords),b+=P.coords.length*4,g.setUint32(b,P.colors.length,!0),b+=4,new Int32Array(A,b,P.colors.length).set(P.colors),b+=P.colors.length*4,P.verticesPerRow!==void 0&&(g.setUint32(b,P.verticesPerRow,!0),b+=4)}return A}getIR(){const t=this.view,e=this.data[a(Ft,op)],i=!!this.data[a(Ft,ap)],s=!!this.data[a(Ft,lp)],r=t.getUint32(a(Ft,up),!0),o=t.getUint32(a(Ft,dp),!0),l=t.getUint32(a(Ft,hp),!0),c=t.getUint32(a(Ft,fp),!0);let u=20;const d=new Float32Array(this.buffer,u,r*2);u+=r*8;const h=new Uint8Array(this.buffer,u,o*3);u+=o*3;const f=[];for(let A=0;A<l;++A){const g=t.getFloat32(u,!0);u+=4;const w=t.getUint32(u,!0);u+=4,f.push([g,`#${w.toString(16).padStart(6,"0")}`])}let p=null;if(i){p=[];for(let A=0;A<4;++A)p.push(t.getFloat32(u,!0)),u+=4}let x=null;s&&(x=new Uint8Array(this.buffer,u,3),u+=3);const y=[];for(let A=0;A<c;++A){const g=t.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const w=t.getUint32(u,!0);u+=4;const b=new Int32Array(this.buffer,u,w);u+=w*4;const E=t.getUint32(u,!0);u+=4;const T=new Int32Array(this.buffer,u,E);u+=E*4;const P={type:g,coords:b,colors:T};g===ub.LATTICE&&(P.verticesPerRow=t.getUint32(u,!0),u+=4),y.push(P)}if(e===1)return["RadialAxial","axial",p,f,Array.from(d.slice(0,2)),Array.from(d.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",p,f,[d[0],d[1]],[d[3],d[4]],d[2],d[5]];if(e===3){const A=this.data[a(Ft,cp)];let g=null;if(d.length>0){let w=d[0],b=d[0],E=d[1],T=d[1];for(let P=0;P<d.length;P+=2){const k=d[P],_=d[P+1];w=w>k?k:w,E=E>_?_:E,b=b<k?k:b,T=T<_?_:T}g=[w,E,b,T]}return["Mesh",A,d,h,y,g,p,x]}throw new Error(`Unsupported pattern kind: ${e}`)}};op=new WeakMap,ap=new WeakMap,lp=new WeakMap,cp=new WeakMap,up=new WeakMap,dp=new WeakMap,hp=new WeakMap,fp=new WeakMap,S(Ft,op,0),S(Ft,ap,1),S(Ft,lp,2),S(Ft,cp,3),S(Ft,up,4),S(Ft,dp,8),S(Ft,hp,12),S(Ft,fp,16);let Lb=Ft;var Hu;class GO{constructor(t){S(this,Hu);v(this,Hu,t)}static write(t){let e,i;return _e.isFloat16ArraySupported?(i=new ArrayBuffer(t.length*2),e=new Float16Array(i)):(i=new ArrayBuffer(t.length*4),e=new Float32Array(i)),e.set(t),i}get path(){return _e.isFloat16ArraySupported?new Float16Array(a(this,Hu)):new Float32Array(a(this,Hu))}}Hu=new WeakMap;function qO(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(vn)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function XO(n){if(vn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Ky(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ag(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Rb=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,YO=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",QO=DO.bind(null,Rb,YO);var xr,ly;class KO{constructor(){S(this,xr,new Map);S(this,ly,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,ly).then(()=>{for(const[s]of a(this,xr))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){nt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,xr).set(e,s)}removeEventListener(t,e){const i=a(this,xr).get(e);i==null||i(),a(this,xr).delete(e)}terminate(){for(const[,t]of a(this,xr))t==null||t();a(this,xr).clear()}}xr=new WeakMap,ly=new WeakMap;const lg={DATA:1,ERROR:2},me={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function YC(){}function En(n){if(n instanceof Pa||n instanceof db||n instanceof VC||n instanceof U0||n instanceof Gv)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Pa(n.message);case"InvalidPDFException":return new db(n.message);case"PasswordException":return new VC(n.message,n.code);case"ResponseException":return new U0(n.message,n.status,n.missing);case"UnknownErrorException":return new Gv(n.message,n.details)}return new Gv(n.message,n.toString())}var $u,$i,q2,X2,Y2,Og;class _h{constructor(t,e,i){S(this,$i);S(this,$u,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",C(this,$i,q2).bind(this),{signal:a(this,$u).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,c.postMessage({sourceName:o,targetName:l,stream:me.PULL,streamId:r,desiredSize:u.desiredSize}),d.promise},cancel:u=>{xt(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:me.CANCEL,streamId:r,reason:En(u)}),d.promise}},i)}destroy(){var t;(t=a(this,$u))==null||t.abort(),v(this,$u,null)}}$u=new WeakMap,$i=new WeakSet,q2=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){C(this,$i,Y2).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===lg.DATA)s.resolve(t.data);else if(t.callback===lg.ERROR)s.reject(En(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:lg.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:lg.ERROR,callbackId:t.callbackId,reason:En(o)})});return}if(t.streamId){C(this,$i,X2).call(this,t);return}e(t.data)},X2=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:me.ENQUEUE,streamId:e,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:me.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){xt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:me.ERROR,streamId:e,reason:En(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:me.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:me.START_COMPLETE,streamId:e,reason:En(u)})})},Y2=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case me.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(En(t.reason));break;case me.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(En(t.reason));break;case me.PULL:if(!l){r.postMessage({sourceName:i,targetName:s,stream:me.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||YC).then(function(){r.postMessage({sourceName:i,targetName:s,stream:me.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:me.PULL_COMPLETE,streamId:e,reason:En(u)})});break;case me.ENQUEUE:if(xt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case me.CLOSE:if(xt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,$i,Og).call(this,o,e);break;case me.ERROR:xt(o,"error should have stream controller"),o.controller.error(En(t.reason)),C(this,$i,Og).call(this,o,e);break;case me.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(En(t.reason)),C(this,$i,Og).call(this,o,e);break;case me.CANCEL:if(!l)break;const c=En(t.reason);Promise.try(l.onCancel||YC,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:me.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:me.CANCEL_COMPLETE,streamId:e,reason:En(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Og=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var pp;class Q2{constructor({enableHWA:t=!1}){S(this,pp,!1);v(this,pp,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,pp)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){bt("Abstract method `_createCanvas` called.")}}pp=new WeakMap;class JO extends Q2{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class K2{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class QC extends K2{async _fetch(t){const e=await Lm(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Ky(e)}}class J2{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var xl,Wu,br,wr,rn,bl,wl,$,tn,Dh,Nc,Bg,Lc,Z2,Ib,Rc,Mh,Nh,jb,Lh;class ZO extends J2{constructor({docId:e,ownerDocument:i=globalThis.document}){super();S(this,$);S(this,xl);S(this,Wu);S(this,br);S(this,wr);S(this,rn);S(this,bl);S(this,wl,0);v(this,wr,e),v(this,rn,i)}addFilter(e){if(!e)return"none";let i=a(this,$,tn).get(e);if(i)return i;const[s,r,o]=C(this,$,Bg).call(this,e),l=e.length===1?s:`${s}${r}${o}`;if(i=a(this,$,tn).get(l),i)return a(this,$,tn).set(e,i),i;const c=`g_${a(this,wr)}_transfer_map_${we(this,wl)._++}`,u=C(this,$,Lc).call(this,c);a(this,$,tn).set(e,u),a(this,$,tn).set(l,u);const d=C(this,$,Rc).call(this,c);return C(this,$,Nh).call(this,s,r,o,d),u}addHCMFilter(e,i){var x;const s=`${e}-${i}`,r="base";let o=a(this,$,Dh).get(r);if((o==null?void 0:o.key)===s||(o?((x=o.filter)==null||x.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,$,Dh).set(r,o)),!e||!i))return o.url;const l=C(this,$,Lh).call(this,e);e=H.makeHexColor(...l);const c=C(this,$,Lh).call(this,i);if(i=H.makeHexColor(...c),a(this,$,Nc).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const u=new Array(256);for(let y=0;y<=255;y++){const A=y/255;u[y]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=u.join(","),h=`g_${a(this,wr)}_hcm_filter`,f=o.filter=C(this,$,Rc).call(this,h);C(this,$,Nh).call(this,d,d,d,f),C(this,$,Ib).call(this,f);const p=(y,A)=>{const g=l[y]/255,w=c[y]/255,b=new Array(A+1);for(let E=0;E<=A;E++)b[E]=g+E/A*(w-g);return b.join(",")};return C(this,$,Nh).call(this,p(0,5),p(1,5),p(2,5),f),o.url=C(this,$,Lc).call(this,h),o.url}addAlphaFilter(e){let i=a(this,$,tn).get(e);if(i)return i;const[s]=C(this,$,Bg).call(this,[e]),r=`alpha_${s}`;if(i=a(this,$,tn).get(r),i)return a(this,$,tn).set(e,i),i;const o=`g_${a(this,wr)}_alpha_map_${we(this,wl)._++}`,l=C(this,$,Lc).call(this,o);a(this,$,tn).set(e,l),a(this,$,tn).set(r,l);const c=C(this,$,Rc).call(this,o);return C(this,$,jb).call(this,s,c),l}addLuminosityFilter(e){let i=a(this,$,tn).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=C(this,$,Bg).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=a(this,$,tn).get(r),i)return a(this,$,tn).set(e,i),i;const o=`g_${a(this,wr)}_luminosity_map_${we(this,wl)._++}`,l=C(this,$,Lc).call(this,o);a(this,$,tn).set(e,l),a(this,$,tn).set(r,l);const c=C(this,$,Rc).call(this,o);return C(this,$,Z2).call(this,c),e&&C(this,$,jb).call(this,s,c),l}addHighlightHCMFilter(e,i,s,r,o){var w;const l=`${i}-${s}-${r}-${o}`;let c=a(this,$,Dh).get(e);if((c==null?void 0:c.key)===l||(c?((w=c.filter)==null||w.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,$,Dh).set(e,c)),!i||!s))return c.url;const[u,d]=[i,s].map(C(this,$,Lh).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,x]=[r,o].map(C(this,$,Lh).bind(this));f<h&&([h,f,p,x]=[f,h,x,p]),a(this,$,Nc).style.color="";const y=(b,E,T)=>{const P=new Array(256),k=(f-h)/T,_=b/255,D=(E-b)/(255*T);let M=0;for(let R=0;R<=T;R++){const V=Math.round(h+R*k),G=_+R*D;for(let I=M;I<=V;I++)P[I]=G;M=V+1}for(let R=M;R<256;R++)P[R]=P[M-1];return P.join(",")},A=`g_${a(this,wr)}_hcm_${e}_filter`,g=c.filter=C(this,$,Rc).call(this,A);return C(this,$,Ib).call(this,g),C(this,$,Nh).call(this,y(p[0],x[0],5),y(p[1],x[1],5),y(p[2],x[2],5),g),c.url=C(this,$,Lc).call(this,A),c.url}destroy(e=!1){var i,s,r,o;e&&((i=a(this,bl))!=null&&i.size)||((s=a(this,br))==null||s.parentNode.parentNode.remove(),v(this,br,null),(r=a(this,Wu))==null||r.clear(),v(this,Wu,null),(o=a(this,bl))==null||o.clear(),v(this,bl,null),v(this,wl,0))}}xl=new WeakMap,Wu=new WeakMap,br=new WeakMap,wr=new WeakMap,rn=new WeakMap,bl=new WeakMap,wl=new WeakMap,$=new WeakSet,tn=function(){return a(this,Wu)||v(this,Wu,new Map)},Dh=function(){return a(this,bl)||v(this,bl,new Map)},Nc=function(){if(!a(this,br)){const e=a(this,rn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=a(this,rn).createElementNS(tr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),v(this,br,a(this,rn).createElementNS(tr,"defs")),e.append(s),s.append(a(this,br)),a(this,rn).body.append(e)}return a(this,br)},Bg=function(e){if(e.length===1){const u=e[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[i,s,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,l[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},Lc=function(e){if(a(this,xl)===void 0){v(this,xl,"");const i=a(this,rn).URL;i!==a(this,rn).baseURI&&(Jy(i)?nt('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,xl,o2(i,"")))}return`url(${a(this,xl)}#${e})`},Z2=function(e){const i=a(this,rn).createElementNS(tr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Ib=function(e){const i=a(this,rn).createElementNS(tr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Rc=function(e){const i=a(this,rn).createElementNS(tr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,$,Nc).append(i),i},Mh=function(e,i,s){const r=a(this,rn).createElementNS(tr,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},Nh=function(e,i,s,r){const o=a(this,rn).createElementNS(tr,"feComponentTransfer");r.append(o),C(this,$,Mh).call(this,o,"feFuncR",e),C(this,$,Mh).call(this,o,"feFuncG",i),C(this,$,Mh).call(this,o,"feFuncB",s)},jb=function(e,i){const s=a(this,rn).createElementNS(tr,"feComponentTransfer");i.append(s),C(this,$,Mh).call(this,s,"feFuncA",e)},Lh=function(e){return a(this,$,Nc).style.color=e,Im(getComputedStyle(a(this,$,Nc)).getPropertyValue("color"))};class t_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class KC extends t_{async _fetch(t){const e=await Lm(t,"arraybuffer");return new Uint8Array(e)}}class e_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class JC extends e_{async _fetch(t){const e=await Lm(t,"arraybuffer");return new Uint8Array(e)}}vn&&nt("Please use the `legacy` build in Node.js environments.");async function oS(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class tB extends J2{}class eB extends Q2{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class nB extends K2{async _fetch(t){return oS(t)}}class iB extends t_{async _fetch(t){return oS(t)}}class sB extends e_{async _fetch(t){return oS(t)}}const _c="__forcedDependency",{floor:ZC,ceil:tE}=Math;function cg(n,t,e,i,s,r){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],i),n[t*4+2]=Math.max(n[t*4+2],s),n[t*4+3]=Math.max(n[t*4+3],r)}const Fb=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Gu,Vo;class rB{constructor(t,e){S(this,Gu);S(this,Vo);v(this,Gu,t),v(this,Vo,e)}get length(){return a(this,Gu).length}isEmpty(t){return a(this,Gu)[t]===Fb}minX(t){return a(this,Vo)[t*4+0]/256}minY(t){return a(this,Vo)[t*4+1]/256}maxX(t){return(a(this,Vo)[t*4+2]+1)/256}maxY(t){return(a(this,Vo)[t*4+3]+1)/256}}Gu=new WeakMap,Vo=new WeakMap;const ug=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e};var Pn,_n,Sl,ns,Al,Sr,kt,Nt,Ar,Dn,mp,qu,Cl,El,Cr,on,Is,gp,Ob;class oB{constructor(t,e,i=!1){S(this,gp);S(this,Pn,{__proto__:null});S(this,_n,{__proto__:null,transform:[],moveText:[],sameLineText:[],[_c]:[]});S(this,Sl,new Map);S(this,ns,[]);S(this,Al,[]);S(this,Sr,[[1,0,0,1,0,0]]);S(this,kt,[-1/0,-1/0,1/0,1/0]);S(this,Nt,new Float64Array([1/0,1/0,-1/0,-1/0]));S(this,Ar,-1);S(this,Dn,new Set);S(this,mp,new Map);S(this,qu,new Map);S(this,Cl);S(this,El);S(this,Cr);S(this,on);S(this,Is);v(this,Cl,t.width),v(this,El,t.height),C(this,gp,Ob).call(this,e),i&&v(this,Is,new Map)}growOperationsCount(t){t>=a(this,on).length&&C(this,gp,Ob).call(this,t,a(this,on))}save(t){return v(this,Pn,{__proto__:a(this,Pn)}),v(this,_n,{__proto__:a(this,_n),transform:{__proto__:a(this,_n).transform},moveText:{__proto__:a(this,_n).moveText},sameLineText:{__proto__:a(this,_n).sameLineText},[_c]:{__proto__:a(this,_n)[_c]}}),v(this,kt,{__proto__:a(this,kt)}),a(this,ns).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(a(this,Pn));if(e===null)return this;v(this,Pn,e),v(this,_n,Object.getPrototypeOf(a(this,_n))),v(this,kt,Object.getPrototypeOf(a(this,kt)));const i=a(this,ns).pop();return i!==void 0&&((s=ug(a(this,Is),t))==null||s.dependencies.add(i),a(this,on)[t]=a(this,on)[i]),this}recordOpenMarker(t){return a(this,ns).push(t),this}getOpenMarker(){return a(this,ns).length===0?null:a(this,ns).at(-1)}recordCloseMarker(t){var i;const e=a(this,ns).pop();return e!==void 0&&((i=ug(a(this,Is),t))==null||i.dependencies.add(e),a(this,on)[t]=a(this,on)[e]),this}beginMarkedContent(t){return a(this,Al).push(t),this}endMarkedContent(t){var i;const e=a(this,Al).pop();return e!==void 0&&((i=ug(a(this,Is),t))==null||i.dependencies.add(e),a(this,on)[t]=a(this,on)[e]),this}pushBaseTransform(t){return a(this,Sr).push(H.multiplyByDOMMatrix(a(this,Sr).at(-1),t.getTransform())),this}popBaseTransform(){return a(this,Sr).length>1&&a(this,Sr).pop(),this}recordSimpleData(t,e){return a(this,Pn)[t]=e,this}recordIncrementalData(t,e){return a(this,_n)[t].push(e),this}resetIncrementalData(t,e){return a(this,_n)[t].length=0,this}recordNamedData(t,e){return a(this,Sl).set(t,e),this}recordSimpleDataFromNamed(t,e,i){a(this,Pn)[t]=a(this,Sl).get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(_c,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in a(this,Pn)&&this.recordFutureForcedDependency(e,a(this,Pn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of a(this,Dn))this.recordFutureForcedDependency(_c,t);return this}resetBBox(t){return a(this,Ar)!==t&&(v(this,Ar,t),a(this,Nt)[0]=1/0,a(this,Nt)[1]=1/0,a(this,Nt)[2]=-1/0,a(this,Nt)[3]=-1/0),this}recordClipBox(t,e,i,s,r,o){const l=H.multiplyByDOMMatrix(a(this,Sr).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];H.axialAlignedBoundingBox([i,r,s,o],l,c);const u=H.intersect(a(this,kt),c);return u?(a(this,kt)[0]=u[0],a(this,kt)[1]=u[1],a(this,kt)[2]=u[2],a(this,kt)[3]=u[3]):(a(this,kt)[0]=a(this,kt)[1]=1/0,a(this,kt)[2]=a(this,kt)[3]=-1/0),this}recordBBox(t,e,i,s,r,o){const l=a(this,kt);if(l[0]===1/0)return this;const c=H.multiplyByDOMMatrix(a(this,Sr).at(-1),e.getTransform());if(l[0]===-1/0)return H.axialAlignedBoundingBox([i,r,s,o],c,a(this,Nt)),this;const u=[1/0,1/0,-1/0,-1/0];return H.axialAlignedBoundingBox([i,r,s,o],c,u),a(this,Nt)[0]=Math.min(a(this,Nt)[0],Math.max(u[0],l[0])),a(this,Nt)[1]=Math.min(a(this,Nt)[1],Math.max(u[1],l[1])),a(this,Nt)[2]=Math.max(a(this,Nt)[2],Math.min(u[2],l[2])),a(this,Nt)[3]=Math.max(a(this,Nt)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(t,e,i,s=1,r=0,o=0,l){const c=i.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&a(this,qu).get(i),u!==!1&&(d=[0,0,0,0],H.axialAlignedBoundingBox(c,i.fontMatrix,d),(s!==1||r!==0||o!==0)&&H.scaleMinMax([s,0,0,-s,r,o],d),u)))return this.recordBBox(t,e,d[0],d[2],d[1],d[3]);if(!l)return this.recordFullPageBBox(t);const h=l();return c&&d&&u===void 0&&(u=d[0]<=r-h.actualBoundingBoxLeft&&d[2]>=r+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,a(this,qu).set(i,u),u)?this.recordBBox(t,e,d[0],d[2],d[1],d[3]):this.recordBBox(t,e,r-h.actualBoundingBoxLeft,r+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(t){return a(this,Nt)[0]=Math.max(0,a(this,kt)[0]),a(this,Nt)[1]=Math.max(0,a(this,kt)[1]),a(this,Nt)[2]=Math.min(a(this,Cl),a(this,kt)[2]),a(this,Nt)[3]=Math.min(a(this,El),a(this,kt)[3]),this}getSimpleIndex(t){return a(this,Pn)[t]}recordDependencies(t,e){const i=a(this,Dn),s=a(this,Pn),r=a(this,_n);for(const o of e)o in a(this,Pn)?i.add(s[o]):o in r&&r[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return a(this,Sl).has(e)&&a(this,Dn).add(a(this,Sl).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[_c]),a(this,Is)){const i=ug(a(this,Is),t),{dependencies:s}=i;a(this,Dn).forEach(s.add,s),a(this,ns).forEach(s.add,s),a(this,Al).forEach(s.add,s),s.delete(t),i.isRenderingOperation=!0}if(a(this,Ar)===t){const i=ZC(a(this,Nt)[0]*256/a(this,Cl)),s=ZC(a(this,Nt)[1]*256/a(this,El)),r=tE(a(this,Nt)[2]*256/a(this,Cl)),o=tE(a(this,Nt)[3]*256/a(this,El));cg(a(this,Cr),t,i,s,r,o);for(const l of a(this,Dn))l!==t&&cg(a(this,Cr),l,i,s,r,o);for(const l of a(this,ns))l!==t&&cg(a(this,Cr),l,i,s,r,o);for(const l of a(this,Al))l!==t&&cg(a(this,Cr),l,i,s,r,o);e||(a(this,Dn).clear(),v(this,Ar,-1))}return this}recordShowTextOperation(t,e=!1){const i=Array.from(a(this,Dn));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of i)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return a(this,Ar)===t&&(v(this,Ar,-1),a(this,kt)[0]=Math.max(a(this,kt)[0],a(this,Nt)[0]),a(this,kt)[1]=Math.max(a(this,kt)[1],a(this,Nt)[1]),a(this,kt)[2]=Math.min(a(this,kt)[2],a(this,Nt)[2]),a(this,kt)[3]=Math.min(a(this,kt)[3],a(this,Nt)[3]),e||a(this,Dn).clear()),this}_takePendingDependencies(){const t=a(this,Dn);return v(this,Dn,new Set),t}_extractOperation(t){const e=a(this,mp).get(t);return a(this,mp).delete(t),e}_pushPendingDependencies(t){for(const e of t)a(this,Dn).add(e)}take(){return a(this,qu).clear(),new rB(a(this,on),a(this,Cr))}takeDebugMetadata(){return a(this,Is)}}Pn=new WeakMap,_n=new WeakMap,Sl=new WeakMap,ns=new WeakMap,Al=new WeakMap,Sr=new WeakMap,kt=new WeakMap,Nt=new WeakMap,Ar=new WeakMap,Dn=new WeakMap,mp=new WeakMap,qu=new WeakMap,Cl=new WeakMap,El=new WeakMap,Cr=new WeakMap,on=new WeakMap,Is=new WeakMap,gp=new WeakSet,Ob=function(t,e){const i=new ArrayBuffer(t*4);v(this,Cr,new Uint8ClampedArray(i)),v(this,on,new Uint32Array(i)),e&&e.length>0?(a(this,on).set(e),a(this,on).fill(Fb,e.length)):a(this,on).fill(Fb)};var It,se,is,Xu,Yu;const pS=class pS{constructor(t,e,i){S(this,It);S(this,se);S(this,is);S(this,Xu,0);S(this,Yu,0);if(t instanceof pS&&a(t,is)===!!i)return t;v(this,It,t),v(this,se,e),v(this,is,!!i)}growOperationsCount(){throw new Error("Unreachable")}save(t){return we(this,Yu)._++,a(this,It).save(a(this,se)),this}restore(t){return a(this,Yu)>0&&(a(this,It).restore(a(this,se)),we(this,Yu)._--),this}recordOpenMarker(t){return we(this,Xu)._++,this}getOpenMarker(){return a(this,Xu)>0?a(this,se):a(this,It).getOpenMarker()}recordCloseMarker(t){return we(this,Xu)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return a(this,It).pushBaseTransform(t),this}popBaseTransform(){return a(this,It).popBaseTransform(),this}recordSimpleData(t,e){return a(this,It).recordSimpleData(t,a(this,se)),this}recordIncrementalData(t,e){return a(this,It).recordIncrementalData(t,a(this,se)),this}resetIncrementalData(t,e){return a(this,It).resetIncrementalData(t,a(this,se)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return a(this,It).recordSimpleDataFromNamed(t,e,a(this,se)),this}recordFutureForcedDependency(t,e){return a(this,It).recordFutureForcedDependency(t,a(this,se)),this}inheritSimpleDataAsFutureForcedDependencies(t){return a(this,It).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,It).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return a(this,is)||a(this,It).resetBBox(a(this,se)),this}recordClipBox(t,e,i,s,r,o){return a(this,is)||a(this,It).recordClipBox(a(this,se),e,i,s,r,o),this}recordBBox(t,e,i,s,r,o){return a(this,is)||a(this,It).recordBBox(a(this,se),e,i,s,r,o),this}recordCharacterBBox(t,e,i,s,r,o,l){return a(this,is)||a(this,It).recordCharacterBBox(a(this,se),e,i,s,r,o,l),this}recordFullPageBBox(t){return a(this,is)||a(this,It).recordFullPageBBox(a(this,se)),this}getSimpleIndex(t){return a(this,It).getSimpleIndex(t)}recordDependencies(t,e){return a(this,It).recordDependencies(a(this,se),e),this}recordNamedDependency(t,e){return a(this,It).recordNamedDependency(a(this,se),e),this}recordOperation(t){return a(this,It).recordOperation(a(this,se),!0),this}recordShowTextOperation(t){return a(this,It).recordShowTextOperation(a(this,se),!0),this}bboxToClipBoxDropOperation(t){return a(this,is)||a(this,It).bboxToClipBoxDropOperation(a(this,se),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};It=new WeakMap,se=new WeakMap,is=new WeakMap,Xu=new WeakMap,Yu=new WeakMap;let X0=pS;const Ai={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},qe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Bb(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class aS{isModifyingCurrentTransform(){return!1}getPattern(){bt("Abstract method `getPattern` called.")}}class aB extends aS{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let i,s=this._p0,r=this._p1;if(e&&(s=s.slice(),r=r.slice(),H.applyTransform(s,e),H.applyTransform(r,e)),this._type==="axial")i=t.createLinearGradient(s[0],s[1],r[0],r[1]);else if(this._type==="radial"){let o=this._r0,l=this._r1;if(e){const c=new Float32Array(2);H.singularValueDecompose2dScale(e,c),o*=c[0],l*=c[0]}i=t.createRadialGradient(s[0],s[1],o,r[0],r[1],l)}for(const o of this._colorStops)i.addColorStop(o[0],o[1]);return i}getPattern(t,e,i,s){let r;if(s===qe.STROKE||s===qe.FILL){if(this.isOriginBased()){let f=H.transform(i,e.baseTransform);this.matrix&&(f=H.transform(f,this.matrix));const p=.001,x=Math.hypot(f[0],f[1]),y=Math.hypot(f[2],f[3]),A=(f[0]*f[2]+f[1]*f[3])/(x*y);if(Math.abs(A)<p)if(this.isRadial()){if(Math.abs(x-y)<p)return this._createGradient(t,f)}else return this._createGradient(t,f)}const o=e.current.getClippedPathBoundingBox(s,Kt(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),i=H.transform(i,[1,0,0,1,o[0],o[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),Bb(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=t.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(i);r.setTransform(h)}else Bb(t,this._bbox),r=this._createGradient(t);return r}}function Yv(n,t,e,i,s,r,o,l){const c=t.coords,u=t.colors,d=n.data,h=n.width*4;let f;c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=o,o=l,l=f),c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,x=(c[e+1]+t.offsetY)*t.scaleY,y=(c[i]+t.offsetX)*t.scaleX,A=(c[i+1]+t.offsetY)*t.scaleY,g=(c[s]+t.offsetX)*t.scaleX,w=(c[s+1]+t.offsetY)*t.scaleY;if(x>=w)return;const b=u[r],E=u[r+1],T=u[r+2],P=u[o],k=u[o+1],_=u[o+2],D=u[l],M=u[l+1],R=u[l+2],V=Math.round(x),G=Math.round(w);let I,F,O,z,j,q,Q,K;for(let Z=V;Z<=G;Z++){if(Z<A){const At=Z<x?0:(x-Z)/(x-A);I=p-(p-y)*At,F=b-(b-P)*At,O=E-(E-k)*At,z=T-(T-_)*At}else{let At;Z>w?At=1:A===w?At=0:At=(A-Z)/(A-w),I=y-(y-g)*At,F=P-(P-D)*At,O=k-(k-M)*At,z=_-(_-R)*At}let ft;Z<x?ft=0:Z>w?ft=1:ft=(x-Z)/(x-w),j=p-(p-g)*ft,q=b-(b-D)*ft,Q=E-(E-M)*ft,K=T-(T-R)*ft;const ie=Math.round(Math.min(I,j)),wt=Math.round(Math.max(I,j));let St=h*Z+ie*4;for(let At=ie;At<=wt;At++)ft=(I-At)/(I-j),ft<0?ft=0:ft>1&&(ft=1),d[St++]=F-(F-q)*ft|0,d[St++]=O-(O-Q)*ft|0,d[St++]=z-(z-K)*ft|0,d[St++]=255}}function lB(n,t,e){const i=t.coords,s=t.colors;let r,o;switch(t.type){case ub.LATTICE:const l=t.verticesPerRow,c=Math.floor(i.length/l)-1,u=l-1;for(r=0;r<c;r++){let d=r*l;for(let h=0;h<u;h++,d++)Yv(n,e,i[d],i[d+1],i[d+l],s[d],s[d+1],s[d+l]),Yv(n,e,i[d+l+1],i[d+1],i[d+l],s[d+l+1],s[d+1],s[d+l])}break;case ub.TRIANGLES:for(r=0,o=i.length;r<o;r+=3)Yv(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class cB extends aS{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),p=u/h,x=d/f,y={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/x},A=h+2*2,g=f+2*2,w=i.getCanvas("mesh",A,g),b=w.context,E=b.createImageData(h,f);if(e){const P=E.data;for(let k=0,_=P.length;k<_;k+=4)P[k]=e[0],P[k+1]=e[1],P[k+2]=e[2],P[k+3]=255}for(const P of this._figures)lB(E,P,y);return b.putImageData(E,2,2),{canvas:w.canvas,offsetX:l-2*p,offsetY:c-2*x,scaleX:p,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){Bb(t,this._bbox);const r=new Float32Array(2);if(s===qe.SHADING)H.singularValueDecompose2dScale(Kt(t),r);else if(this.matrix){H.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;H.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else H.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===qe.SHADING?null:this._background,e.cachedCanvases);return s!==qe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class uB extends aS{getPattern(){return"hotpink"}}function dB(n){switch(n[0]){case"RadialAxial":return new aB(n);case"Mesh":return new cB(n);case"Dummy":return new uB}throw new Error(`Unknown IR type: ${n[0]}`)}const eE={COLORED:1,UNCOLORED:2},cy=class cy{constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t,e){var q,Q;const{bbox:i,operatorList:s,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),Qy("TilingType: "+o);const h=i[0],f=i[1],p=i[2],x=i[3],y=p-h,A=x-f,g=new Float32Array(2);H.singularValueDecompose2dScale(this.matrix,g);const[w,b]=g;H.singularValueDecompose2dScale(this.baseTransform,g);const E=w*g[0],T=b*g[1];let P=y,k=A,_=!1,D=!1;const M=Math.ceil(u*E),R=Math.ceil(d*T),V=Math.ceil(y*E),G=Math.ceil(A*T);M>=V?P=u:_=!0,R>=G?k=d:D=!0;const I=this.getSizeAndScale(P,this.ctx.canvas.width,E),F=this.getSizeAndScale(k,this.ctx.canvas.height,T),O=t.cachedCanvases.getCanvas("pattern",I.size,F.size),z=O.context,j=c.createCanvasGraphics(z,e);if(j.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(j,r,l),z.translate(-I.scale*h,-F.scale*f),j.transform(0,I.scale,0,0,F.scale,0,0),z.save(),(q=j.dependencyTracker)==null||q.save(),this.clipBbox(j,h,f,p,x),j.baseTransform=Kt(j.ctx),j.executeOperatorList(s),j.endDrawing(),(Q=j.dependencyTracker)==null||Q.restore(),z.restore(),_||D){const K=O.canvas;_&&(P=u),D&&(k=d);const Z=this.getSizeAndScale(P,this.ctx.canvas.width,E),ft=this.getSizeAndScale(k,this.ctx.canvas.height,T),ie=Z.size,wt=ft.size,St=t.cachedCanvases.getCanvas("pattern-workaround",ie,wt),At=St.context,th=_?Math.floor(y/u):0,Ia=D?Math.floor(A/d):0;for(let vs=0;vs<=th;vs++)for(let dn=0;dn<=Ia;dn++)At.drawImage(K,ie*vs,wt*dn,ie,wt,0,0,ie,wt);return{canvas:St.canvas,scaleX:Z.scale,scaleY:ft.scale,offsetX:h,offsetY:f}}return{canvas:O.canvas,scaleX:I.scale,scaleY:F.scale,offsetX:h,offsetY:f}}getSizeAndScale(t,e,i){const s=Math.max(cy.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const o=s-e,l=r-i;t.ctx.rect(e,i,o,l),H.axialAlignedBoundingBox([e,i,s,r],Kt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case eE.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case eE.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new AO(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s,r){let o=i;s!==qe.SHADING&&(o=H.transform(o,e.baseTransform),this.matrix&&(o=H.transform(o,this.matrix)));const l=this.createPatternCanvas(e,r);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=t.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};L(cy,"MAX_PATTERN_SIZE",3e3);let zb=cy;function hB({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=_e.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],d=i>>3,h=i&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let x=0;x<s;x++){for(const A=t+d;t<A;t++){const g=t<f?n[t]:255;e[p++]=g&128?u:c,e[p++]=g&64?u:c,e[p++]=g&32?u:c,e[p++]=g&16?u:c,e[p++]=g&8?u:c,e[p++]=g&4?u:c,e[p++]=g&2?u:c,e[p++]=g&1?u:c}if(h===0)continue;const y=t<f?n[t++]:255;for(let A=0;A<h;A++)e[p++]=y&1<<7-A?u:c}return{srcPos:t,destPos:p}}const nE=16,iE=100,fB=15,sE=10,In=16,Qv=new DOMMatrix,di=new Float32Array(2),eu=new Float32Array([1/0,1/0,-1/0,-1/0]);function pB(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,s,r,o,l){t.transform(e,i,s,r,o,l),this.__originalTransform(e,i,s,r,o,l)},n.setTransform=function(e,i,s,r,o,l){t.setTransform(e,i,s,r,o,l),this.__originalSetTransform(e,i,s,r,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,l){t.bezierCurveTo(e,i,s,r,o,l),this.__originalBezierCurveTo(e,i,s,r,o,l)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class mB{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function dg(n,t,e,i,s,r,o,l,c,u){const[d,h,f,p,x,y]=Kt(n);if(h===0&&f===0){const w=o*d+x,b=Math.round(w),E=l*p+y,T=Math.round(E),P=(o+c)*d+x,k=Math.abs(Math.round(P)-b)||1,_=(l+u)*p+y,D=Math.abs(Math.round(_)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),b,T),n.drawImage(t,e,i,s,r,0,0,k,D),n.setTransform(d,h,f,p,x,y),[k,D]}if(d===0&&p===0){const w=l*f+x,b=Math.round(w),E=o*h+y,T=Math.round(E),P=(l+u)*f+x,k=Math.abs(Math.round(P)-b)||1,_=(o+c)*h+y,D=Math.abs(Math.round(_)-T)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,b,T),n.drawImage(t,e,i,s,r,0,0,D,k),n.setTransform(d,h,f,p,x,y),[D,k]}n.drawImage(t,e,i,s,r,o,l,c,u);const A=Math.hypot(d,h),g=Math.hypot(f,p);return[A*c,g*u]}class rE{constructor(t,e,i){L(this,"alphaIsShape",!1);L(this,"fontSize",0);L(this,"fontSizeScale",1);L(this,"textMatrix",null);L(this,"textMatrixScale",1);L(this,"fontMatrix",cb);L(this,"leading",0);L(this,"x",0);L(this,"y",0);L(this,"lineX",0);L(this,"lineY",0);L(this,"charSpacing",0);L(this,"wordSpacing",0);L(this,"textHScale",1);L(this,"textRenderingMode",Se.FILL);L(this,"textRise",0);L(this,"fillColor","#000000");L(this,"strokeColor","#000000");L(this,"patternFill",!1);L(this,"patternStroke",!1);L(this,"fillAlpha",1);L(this,"strokeAlpha",1);L(this,"lineWidth",1);L(this,"activeSMask",null);L(this,"transferMaps","none");i==null||i(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=eu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=qe.FILL,e=null){const i=this.minMax.slice();if(t===qe.STROKE){e||bt("Stroke bounding box must include transform."),H.singularValueDecompose2dScale(e,di);const s=di[0]*this.lineWidth/2,r=di[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const t=H.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(eu,0)}getClippedPathBoundingBox(t=qe.FILL,e=null){return H.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function oE(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%In,r=(e-s)/In,o=s===0?r:r+1,l=n.createImageData(i,In);let c=0,u;const d=t.data,h=l.data;let f,p,x,y;if(t.kind===_g.GRAYSCALE_1BPP){const A=d.byteLength,g=new Uint32Array(h.buffer,0,h.byteLength>>2),w=g.length,b=i+7>>3,E=4294967295,T=_e.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(x=f<r?In:s,u=0,p=0;p<x;p++){const P=A-c;let k=0;const _=P>b?i:P*8-7,D=_&-8;let M=0,R=0;for(;k<D;k+=8)R=d[c++],g[u++]=R&128?E:T,g[u++]=R&64?E:T,g[u++]=R&32?E:T,g[u++]=R&16?E:T,g[u++]=R&8?E:T,g[u++]=R&4?E:T,g[u++]=R&2?E:T,g[u++]=R&1?E:T;for(;k<_;k++)M===0&&(R=d[c++],M=128),g[u++]=R&M?E:T,M>>=1}for(;u<w;)g[u++]=0;n.putImageData(l,0,f*In)}}else if(t.kind===_g.RGBA_32BPP){for(p=0,y=i*In*4,f=0;f<r;f++)h.set(d.subarray(c,c+y)),c+=y,n.putImageData(l,0,p),p+=In;f<o&&(y=i*s*4,h.set(d.subarray(c,c+y)),n.putImageData(l,0,p))}else if(t.kind===_g.RGB_24BPP)for(x=In,y=i*x,f=0;f<o;f++){for(f>=r&&(x=s,y=i*x),u=0,p=y;p--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(l,0,f*In)}else throw new Error(`bad image kind: ${t.kind}`)}function aE(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%In,r=(e-s)/In,o=s===0?r:r+1,l=n.createImageData(i,In);let c=0;const u=t.data,d=l.data;for(let h=0;h<o;h++){const f=h<r?In:s;({srcPos:c}=hB({src:u,srcPos:c,dest:d,width:i,height:f,nonBlackColor:0})),n.putImageData(l,0,h*In)}}function hh(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function hg(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function lE(n,t){if(t)return!0;H.singularValueDecompose2dScale(n,di);const e=Math.fround(Ks.pixelRatio*_a.PDF_TO_CSS_UNITS);return di[0]<=e&&di[1]<=e}const gB=["butt","round","square"],yB=["miter","round","bevel"],vB={},cE={};var ys,Vb,Ub,Hb;const mS=class mS{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,u,d){S(this,ys);this.ctx=t,this.current=new rE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new mB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(t,e,i=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Kt(this.compositeCtx))}this.ctx.save(),hg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Kt(this.ctx)}executeOperatorList(t,e,i,s,r){var g;const o=t.argsArray,l=t.fnArray;let c=e||0;const u=o.length;if(u===c)return c;const d=u-c>sE&&typeof i=="function",h=d?Date.now()+fB:0;let f=0;const p=this.commonObjs,x=this.objs;let y,A;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,i),c;if(!r||r(c))if(y=l[c],A=o[c]??null,y!==Ef.dependency)A===null?this[y](c):this[y](c,...A);else for(const w of A){(g=this.dependencyTracker)==null||g.recordNamedData(w,c);const b=w.startsWith("g_")?p:x;if(!b.has(w))return b.get(w,i),c}if(c++,c===u)return c;if(d&&++f>sE){if(Date.now()>h)return i(),c;f=0}}}endDrawing(){C(this,ys,Vb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,ys,Ub).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=s,u="prescale1",d,h;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(t,0,0,l,c,0,0,f,p),t=d.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t,e){var M,R;const i=this.ctx,{width:s,height:r}=e,o=this.current.fillColor,l=this.current.patternFill,c=Kt(i);let u,d,h,f;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;d=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(V),u||(u=new Map,this._cachedBitmapsMap.set(V,u));const G=u.get(d);if(G&&!l){const I=Math.round(Math.min(c[0],c[2])+c[4]),F=Math.round(Math.min(c[1],c[3])+c[5]);return(M=this.dependencyTracker)==null||M.recordDependencies(t,Ai.transformAndFill),{canvas:G,offsetX:I,offsetY:F}}h=G}h||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),aE(f.context,e));let p=H.transform(c,[1/s,0,0,-1/r,0,0]);p=H.transform(p,[1,0,0,1,0,-r]);const x=eu.slice();H.axialAlignedBoundingBox([0,0,s,r],p,x);const[y,A,g,w]=x,b=Math.round(g-y)||1,E=Math.round(w-A)||1,T=this.cachedCanvases.getCanvas("fillCanvas",b,E),P=T.context,k=y,_=A;P.translate(-k,-_),P.transform(...p),h||(h=this._scaleImage(f.canvas,bs(P)),h=h.img,u&&l&&u.set(d,h)),P.imageSmoothingEnabled=lE(Kt(P),e.interpolate),dg(P,h,0,0,h.width,h.height,0,0,s,r),P.globalCompositeOperation="source-in";const D=H.transform(bs(P),[1,0,0,1,-k,-_]);return P.fillStyle=l?o.getPattern(i,this,D,qe.FILL,t):o,P.fillRect(0,0,s,r),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,T.canvas)),(R=this.dependencyTracker)==null||R.recordDependencies(t,Ai.transformAndFill),{canvas:T.canvas,offsetX:Math.round(k),offsetY:Math.round(_)}}setLineWidth(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineCap",t),this.ctx.lineCap=gB[e]}setLineJoin(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineJoin",t),this.ctx.lineJoin=yB[e]}setMiterLimit(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var i,s,r,o,l;for(const[c,u]of e)switch(c){case"LW":this.setLineWidth(t,u);break;case"LC":this.setLineCap(t,u);break;case"LJ":this.setLineJoin(t,u);break;case"ML":this.setMiterLimit(t,u);break;case"D":this.setDash(t,u[0],u[1]);break;case"RI":this.setRenderingIntent(t,u);break;case"FL":this.setFlatness(t,u);break;case"Font":this.setFont(t,u[0],u[1]);break;case"CA":(i=this.dependencyTracker)==null||i.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=u;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,i);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),hh(this.suspendedCtx,o),pB(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,i,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,l,c,u,d,h){let f=t.canvas,p=c-d,x=u-h;if(o)if(p<0||x<0||p+i>f.width||x+s>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,s),g=A.context;g.drawImage(f,-p,-x),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,i,s),g.globalCompositeOperation="source-over",f=A.canvas,p=x=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(p,x,i,s),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,x,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const y=new Path2D;y.rect(c,u,i,s),e.clip(y),e.globalCompositeOperation="destination-in",e.drawImage(f,p,x,i,s,c,u,i,s),e.restore()}save(t){var i;this.inSMaskMode&&hh(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(i=this.dependencyTracker)==null||i.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&hh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,r,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",t),this.ctx.transform(e,i,s,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,s){let[r]=i;if(!s){r||(r=i[0]=new Path2D),this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===Ef.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(t,["transform"])}r instanceof Path2D||(r=i[0]=u2(r)),H.axialAlignedBoundingBox(s,Kt(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){var o;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,bs(s),qe.STROKE,t),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,Ai.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(qe.STROKE,Kt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){var u,d,h;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if((u=this.dependencyTracker)==null||u.save(t),s.save(),s.fillStyle=r.getPattern(s,this,bs(s),qe.FILL,t),f){const p=new Path2D;p.addPath(e,s.getTransform().invertSelf().multiplySelf(f)),e=p}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(d=this.dependencyTracker)==null||d.recordDependencies(t,Ai.fill),l&&(s.restore(),(h=this.dependencyTracker)==null||h.restore(t)),i&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var i;this.ctx.fill(e),(i=this.dependencyTracker)==null||i.recordDependencies(t,Ai.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=vB}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=cE}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,r=i.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:d}of e)d&&s.addPath(d,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(u,-u));i.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||cb,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&nt("Invalid font matrix for font "+e),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let d=i;i<nE?d=nE:i>iE&&(d=iE),this.current.fontSizeScale=i/d,this.ctx.font=`${u} ${c} ${d}px ${l}`}setTextRenderingMode(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,i,s,r,o){var g,w,b,E;const l=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&Se.FILL_STROKE_MASK,p=!!(d&Se.ADD_TO_PATH_FLAG),x=c.patternFill&&!u.missingFile,y=c.patternStroke&&!u.missingFile;let A;if((u.disableFontFace||p||x||y)&&!u.missingFile&&(A=u.getPathGenerator(this.commonObjs,e)),A&&(u.disableFontFace||x||y)){l.save(),l.translate(i,s),l.scale(h,-h),(g=this.dependencyTracker)==null||g.recordCharacterBBox(t,l,u);let T;if(f===Se.FILL||f===Se.FILL_STROKE)if(r){T=l.getTransform(),l.setTransform(...r);const P=C(this,ys,Hb).call(this,A,T,r);l.fill(P)}else l.fill(A);if(f===Se.STROKE||f===Se.FILL_STROKE)if(o){T||(T=l.getTransform()),l.setTransform(...o);const{a:P,b:k,c:_,d:D}=T,M=H.inverseTransform(o),R=H.transform([P,k,_,D,0,0],M);H.singularValueDecompose2dScale(R,di),l.lineWidth*=Math.max(di[0],di[1])/h,l.stroke(C(this,ys,Hb).call(this,A,T,o))}else l.lineWidth/=h,l.stroke(A);l.restore()}else(f===Se.FILL||f===Se.FILL_STROKE)&&(l.fillText(e,i,s),(w=this.dependencyTracker)==null||w.recordCharacterBBox(t,l,u,h,i,s,()=>l.measureText(e))),(f===Se.STROKE||f===Se.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(t,l,u,h,i,s,()=>l.measureText(e)).recordDependencies(t,Ai.stroke)),l.strokeText(e,i,s));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Kt(l),x:i,y:s,fontSize:h,path:A}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(t,l,u,h,i,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return it(this,"isFontSubpixelAAEnabled",i)}showText(t,e){var R,V,G,I;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ai.showText).resetBBox(t),this.current.textRenderingMode&Se.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;if(s.isType3Font){this.showType3Text(t,e),(R=this.dependencyTracker)==null||R.recordShowTextOperation(t);return}const r=i.fontSize;if(r===0){(V=this.dependencyTracker)==null||V.recordOperation(t);return}const o=this.ctx,l=i.fontSizeScale,c=i.charSpacing,u=i.wordSpacing,d=i.fontDirection,h=i.textHScale*d,f=e.length,p=s.vertical,x=p?1:-1,y=s.defaultVMetrics,A=r*i.fontMatrix[0],g=i.textRenderingMode===Se.FILL&&!s.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),d>0?o.scale(h,-1):o.scale(h,1);let w,b;const E=i.textRenderingMode&Se.FILL_STROKE_MASK,T=E===Se.FILL||E===Se.FILL_STROKE,P=E===Se.STROKE||E===Se.FILL_STROKE;if(T&&i.patternFill){o.save();const F=i.fillColor.getPattern(o,this,bs(o),qe.FILL,t);w=Kt(o),o.restore(),o.fillStyle=F}if(P&&i.patternStroke){o.save();const F=i.strokeColor.getPattern(o,this,bs(o),qe.STROKE,t);b=Kt(o),o.restore(),o.strokeStyle=F}let k=i.lineWidth;const _=i.textMatrixScale;if(_===0||k===0?P&&(k=this.getSinglePixelWidth()):k/=_,l!==1&&(o.scale(l,l),k/=l),o.lineWidth=k,s.isInvalidPDFjsFont){const F=[];let O=0;for(const j of e)F.push(j.unicode),O+=j.width;const z=F.join("");if(o.fillText(z,0,0),this.dependencyTracker!==null){const j=o.measureText(z);this.dependencyTracker.recordBBox(t,this.ctx,-j.actualBoundingBoxLeft,j.actualBoundingBoxRight,-j.actualBoundingBoxAscent,j.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=O*A*h,o.restore(),this.compose();return}let D=0,M;for(M=0;M<f;++M){const F=e[M];if(typeof F=="number"){D+=x*F*r/1e3;continue}let O=!1;const z=(F.isSpace?u:0)+c,j=F.fontChar,q=F.accent;let Q,K,Z=F.width;if(p){const wt=F.vmetric||y,St=-(F.vmetric?wt[1]:Z*.5)*A,At=wt[2]*A;Z=wt?-wt[0]:Z,Q=St/l,K=(D+At)/l}else Q=D/l,K=0;let ft;if(s.remeasure&&Z>0){ft=o.measureText(j);const wt=ft.width*1e3/r*l;if(Z<wt&&this.isFontSubpixelAAEnabled){const St=Z/wt;O=!0,o.save(),o.scale(St,1),Q/=St}else Z!==wt&&(Q+=(Z-wt)/2e3*r/l)}if(this.contentVisible&&(F.isInFont||s.missingFile)){if(g&&!q)o.fillText(j,Q,K),(G=this.dependencyTracker)==null||G.recordCharacterBBox(t,o,ft?{bbox:null}:s,r/l,Q,K,()=>ft??o.measureText(j));else if(this.paintChar(t,j,Q,K,w,b),q){const wt=Q+r*q.offset.x/l,St=K-r*q.offset.y/l;this.paintChar(t,q.fontChar,wt,St,w,b)}}const ie=p?Z*A-z*d:Z*A+z*d;D+=ie,O&&o.restore()}p?i.y-=D:i.x+=D*h,o.restore(),this.compose(),(I=this.dependencyTracker)==null||I.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,s=this.current,r=s.font,o=s.fontSize,l=s.fontDirection,c=r.vertical?1:-1,u=s.charSpacing,d=s.wordSpacing,h=s.textHScale*l,f=s.fontMatrix||cb,p=e.length,x=s.textRenderingMode===Se.INVISIBLE;let y,A,g,w;if(x||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(h,l);const b=this.dependencyTracker;for(this.dependencyTracker=b?new X0(b,t):null,y=0;y<p;++y){if(A=e[y],typeof A=="number"){w=c*A*o/1e3,this.ctx.translate(w,0),s.x+=w*h;continue}const E=(A.isSpace?d:0)+u,T=r.charProcOperatorList[A.operatorListId];T?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...f),this.executeOperatorList(T),this.restore()):nt(`Type3 character "${A.operatorListId}" is not available.`);const P=[A.width,0];H.applyTransform(P,f),g=P[0]*o+E,i.translate(g,0),s.x+=g*h}i.restore(),b&&(this.dependencyTracker=b)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,s,r,o,l){var u;const c=new Path2D;c.rect(s,r,o-s,l-r),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(t,this.ctx,s,o,r,l).recordClipBox(t,this.ctx,s,o,r,l),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const s=this.baseTransform||Kt(this.ctx),r={createCanvasGraphics:(o,l)=>new mS(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new X0(this.dependencyTracker,l,!0):null)};i=new zb(e,this.ctx,r,s)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=dB(this.getObject(t,e)),this.cachedPatterns.set(e,s)),i&&(s.matrix=i),s}shadingFill(t,e){var o;if(!this.contentVisible)return;const i=this.ctx;this.save(t);const s=this._getPattern(t,e);i.fillStyle=s.getPattern(i,this,bs(i),qe.SHADING,t);const r=bs(i);if(r){const{width:l,height:c}=i.canvas,u=eu.slice();H.axialAlignedBoundingBox([0,0,l,c],r,u);const[d,h,f,p]=u;this.ctx.fillRect(d,h,f-d,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ai.transform).recordDependencies(t,Ai.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){bt("Should not call beginInlineImage")}beginImageData(){bt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Kt(this.ctx),i)){H.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,o,l,c]=i,u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,r,l,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var b;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Qy("TODO: Support non-isolated groups."),e.knockout&&nt("Knockout groups not supported.");const s=Kt(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=eu.slice();H.axialAlignedBoundingBox(e.bbox,Kt(i),r);const o=[0,0,i.canvas.width,i.canvas.height];r=H.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-l,1),d=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),p=f.context;p.translate(-l,-c),p.transform(...s);let x=new Path2D;const[y,A,g,w]=e.bbox;if(x.rect(y,A,g-y,w-A),e.matrix){const E=new Path2D;E.addPath(x,new DOMMatrix(e.matrix)),x=E}p.clip(x),e.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:l,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(l,c),i.save()),hh(i,p),this.ctx=p,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){var r;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Kt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=eu.slice();H.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,i,s,r,o){if(C(this,ys,Vb).call(this),hg(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const l=i[2]-i[0],c=i[3]-i[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=l,i[3]=c,H.singularValueDecompose2dScale(Kt(this.ctx),di);const{viewportScale:u}=this,d=Math.ceil(l*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(di[0],0,0,-di[1],0,c*di[1]),hg(this.ctx)}else{hg(this.ctx),this.endPath(t);const u=new Path2D;u.rect(i[0],i[1],l,c),this.ctx.clip(u)}}this.current=new rE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),C(this,ys,Ub).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var l;if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const s=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,s=0,r=0,o,l){var h,f,p;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const u=Kt(c);c.transform(i,s,r,o,0,0);const d=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(t);for(let x=0,y=l.length;x<y;x+=2){const A=H.transform(u,[i,s,r,o,l[x],l[x+1]]);c.drawImage(d.canvas,A[4],A[5]),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,A[4],A[4]+d.canvas.width,A[5],A[5]+d.canvas.height)}c.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,l,c;if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,Ai.transformAndFill);for(const u of e){const{data:d,width:h,height:f,transform:p}=u,x=this.cachedCanvases.getCanvas("maskCanvas",h,f),y=x.context;y.save();const A=this.getObject(t,d,u);aE(y,A),y.globalCompositeOperation="source-in",y.fillStyle=r?s.getPattern(y,this,bs(i),qe.FILL,t):s,y.fillRect(0,0,h,f),y.restore(),i.save(),i.transform(...p),i.scale(1,-1),dg(i,x.canvas,0,0,h,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,i,0,h,0,f),i.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){nt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,s,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){nt("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let d=0,h=r.length;d<h;d+=2)u.push({transform:[i,0,0,s,r[d],r[d+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(t,o,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){var u;if(!this.contentVisible)return;const i=e.width,s=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/i,-1/s);let l;if(e.bitmap)l=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)l=e;else{const h=this.cachedCanvases.getCanvas("inlineImage",i,s).context;oE(h,e),l=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(l,bs(r));r.imageSmoothingEnabled=lE(Kt(r),e.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,r,0,i,-s,0).recordDependencies(t,Ai.imageXObject).recordOperation(t),dg(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,i,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){var o,l,c;if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const u=e.width,d=e.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;oE(f,e),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const u of i)s.save(),s.transform(...u.transform),s.scale(1,-1),dg(s,r,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ai.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){var o,l;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===cE?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(l=this.dependencyTracker)==null||l.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Kt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let o,l;if(i===0&&s===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=l=1/c;else{const d=c*t;o=l=d<1?1/d:1}else if(t===0)o=1/c,l=1/u;else{const d=c*t,h=u*t;o=d<1?1/d:1,l=h<1?1/h:1}}else{const c=Math.abs(e*r-i*s),u=Math.hypot(e,i),d=Math.hypot(s,r);if(t===0)o=d/c,l=u/c;else{const h=t*c;o=d>h?d/h:1,l=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){i.lineWidth=(s||1)*r,i.stroke(t);return}const l=i.getLineDash();e&&i.save(),i.scale(r,o),Qv.a=1/r,Qv.d=1/o;const c=new Path2D;if(c.addPath(t,Qv),l.length>0){const u=Math.max(r,o);i.setLineDash(l.map(d=>d/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(c),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ys=new WeakSet,Vb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ub=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Hb=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let hu=mS;for(const n in Ef)hu.prototype[n]!==void 0&&(hu.prototype[Ef[n]]=hu.prototype[n]);var yp,vp;class qs{static get workerPort(){return a(this,yp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");v(this,yp,t)}static get workerSrc(){return a(this,vp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");v(this,vp,t)}}yp=new WeakMap,vp=new WeakMap,S(qs,yp,null),S(qs,vp,"");var Qu,xp;class xB{constructor({parsedData:t,rawData:e}){S(this,Qu);S(this,xp);v(this,Qu,t),v(this,xp,e)}getRaw(){return a(this,xp)}get(t){return a(this,Qu).get(t)??null}[Symbol.iterator](){return a(this,Qu).entries()}}Qu=new WeakMap,xp=new WeakMap;const Ic=Symbol("INTERNAL");var bp,wp,Sp,Ku;class bB{constructor(t,{name:e,intent:i,usage:s,rbGroups:r}){S(this,bp,!1);S(this,wp,!1);S(this,Sp,!1);S(this,Ku,!0);v(this,bp,!!(t&ci.DISPLAY)),v(this,wp,!!(t&ci.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(a(this,Sp))return a(this,Ku);if(!a(this,Ku))return!1;const{print:t,view:e}=this.usage;return a(this,bp)?(e==null?void 0:e.viewState)!=="OFF":a(this,wp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Ic&&bt("Internal method `_setVisible` called."),v(this,Sp,i),v(this,Ku,e)}}bp=new WeakMap,wp=new WeakMap,Sp=new WeakMap,Ku=new WeakMap;var Uo,Lt,Ju,Zu,Ap,$b;class wB{constructor(t,e=ci.DISPLAY){S(this,Ap);S(this,Uo,null);S(this,Lt,new Map);S(this,Ju,null);S(this,Zu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,v(this,Zu,t.order);for(const i of t.groups)a(this,Lt).set(i.id,new bB(e,i));if(t.baseState==="OFF")for(const i of a(this,Lt).values())i._setVisible(Ic,!1);for(const i of t.on)a(this,Lt).get(i)._setVisible(Ic,!0);for(const i of t.off)a(this,Lt).get(i)._setVisible(Ic,!1);v(this,Ju,this.getHash())}}isVisible(t){if(a(this,Lt).size===0)return!0;if(!t)return Qy("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Lt).has(t.id)?a(this,Lt).get(t.id).visible:(nt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,Ap,$b).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Lt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(a(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Lt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(!a(this,Lt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Lt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(!a(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Lt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(a(this,Lt).get(e).visible)return!1}return!0}return nt(`Unknown optional content policy ${t.policy}.`),!0}return nt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var r;const s=a(this,Lt).get(t);if(!s){nt(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&((r=a(this,Lt).get(l))==null||r._setVisible(Ic,!1,!0));s._setVisible(Ic,!!e,!0),v(this,Uo,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=a(this,Lt).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}v(this,Uo,null)}get hasInitialVisibility(){return a(this,Ju)===null||this.getHash()===a(this,Ju)}getOrder(){return a(this,Lt).size?a(this,Zu)?a(this,Zu).slice():[...a(this,Lt).keys()]:null}getGroup(t){return a(this,Lt).get(t)||null}getHash(){if(a(this,Uo)!==null)return a(this,Uo);const t=new $2;for(const[e,i]of a(this,Lt))t.update(`${e}:${i.visible}`);return v(this,Uo,t.hexdigest())}[Symbol.iterator](){return a(this,Lt).entries()}}Uo=new WeakMap,Lt=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,Ap=new WeakSet,$b=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=C(this,Ap,$b).call(this,r);else if(a(this,Lt).has(r))o=a(this,Lt).get(r).visible;else return nt(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};var Cp,Ep;class Zy{constructor(t,e,i){S(this,Cp,null);S(this,Ep,null);L(this,"_fullReader",null);L(this,"_rangeReaders",new Set);L(this,"_source",null);this._source=t,v(this,Cp,e),v(this,Ep,i)}get _progressiveDataLength(){var t;return((t=this._fullReader)==null?void 0:t._loaded)??0}getFullReader(){return xt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(a(this,Cp))(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new(a(this,Ep))(this,t,e);return this._rangeReaders.add(i),i}cancelAllRequests(t){var e;(e=this._fullReader)==null||e.cancel(t);for(const i of new Set(this._rangeReaders))i.cancel(t)}}Cp=new WeakMap,Ep=new WeakMap;class tv{constructor(t){L(this,"onProgress",null);L(this,"_contentLength",0);L(this,"_filename",null);L(this,"_headersCapability",Promise.withResolvers());L(this,"_isRangeSupported",!1);L(this,"_isStreamingSupported",!1);L(this,"_loaded",0);L(this,"_stream",null);this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){bt("Abstract method `read` called")}cancel(t){bt("Abstract method `cancel` called")}}class ev{constructor(t,e,i){L(this,"_stream",null);this._stream=t}async read(){bt("Abstract method `read` called")}cancel(t){bt("Abstract method `cancel` called")}}function uE(n){return n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}var Tp,Wb;class SB extends Zy{constructor(e){super(e,AB,CB);S(this,Tp);L(this,"_progressiveDone",!1);L(this,"_queuedChunks",[]);const{pdfDataRangeTransport:i}=e,{initialData:s,progressiveDone:r}=i;if((s==null?void 0:s.length)>0){const o=uE(s);this._queuedChunks.push(o)}this._progressiveDone=r,i.addRangeListener((o,l)=>{C(this,Tp,Wb).call(this,o,l)}),i.addProgressListener((o,l)=>{var c,u;l!==void 0&&((u=(c=this._fullReader)==null?void 0:c.onProgress)==null||u.call(c,{loaded:o,total:l}))}),i.addProgressiveReadListener(o=>{C(this,Tp,Wb).call(this,void 0,o)}),i.addProgressiveDoneListener(()=>{var o;(o=this._fullReader)==null||o.progressiveDone(),this._progressiveDone=!0}),i.transportReady()}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,i){const s=super.getRangeReader(e,i);return s&&(s.onDone=()=>this._rangeReaders.delete(s),this._source.pdfDataRangeTransport.requestDataRange(e,i)),s}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}Tp=new WeakSet,Wb=function(e,i){const s=uE(i);if(e===void 0)this._fullReader?this._fullReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.keys().find(o=>o._begin===e);xt(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(s)}};class AB extends tv{constructor(e){super(e);L(this,"_done",!1);L(this,"_queuedChunks",null);L(this,"_requests",[]);const{pdfDataRangeTransport:i,disableRange:s,disableStream:r}=e._source,{length:o,contentDispositionFilename:l}=i;this._queuedChunks=e._queuedChunks||[];for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._done=e._progressiveDone,this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!s,sS(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class CB extends ev{constructor(e,i,s){super(e,i,s);L(this,"onDone",null);L(this,"_begin",-1);L(this,"_done",!1);L(this,"_queuedChunk",null);L(this,"_requests",[]);this._begin=i}_enqueue(e){var i;if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(i=this.onDone)==null||i.call(this)}}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var i;this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,(i=this.onDone)==null||i.call(this)}}function EB(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let d=l(e);return d=unescape(d),d=c(d),d=u(d),r(d)}if(e=o(n),e){const d=u(e);return r(d)}if(e=i("filename","i").exec(n),e){e=e[1];let d=l(e);return d=u(d),r(d)}function i(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=Ky(h);h=f.decode(p),t=!1}catch{}}return h}function r(d){return t&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),t&&(d=s("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,y,A,g]=f;if(y=parseInt(y,10),y in h){if(y===0)break;continue}h[y]=[A,g]}const x=[];for(let y=0;y<h.length&&y in h;++y){let[A,g]=h[y];g=l(g),A&&(g=unescape(g),y===0&&(g=c(g))),x.push(g)}return x.join("")}function l(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),x=d.slice(h+1).replace(/^[^']*'/,"");return s(f,x)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,x){if(p==="q"||p==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,A){return String.fromCharCode(parseInt(A,16))}),s(f,x);try{x=atob(x)}catch{}return s(f,x)})}return""}function n_(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function nv(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function i_({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function s_(n){const t=n.get("Content-Disposition");if(t){let e=EB(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(sS(e))return e}return null}function iv(n,t){return new U0(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function r_(n,t){if(n!==t)throw new Error(`Expected range response-origin "${n}" to match "${t}".`)}function o_(n,t,e,i){return fetch(n,{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function a_(n,t){if(n!==200&&n!==206)throw iv(n,t)}function l_(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(nt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class TB extends Zy{constructor(e){super(e,kB,PB);L(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(e.url),this.headers=n_(this.isHttp,e.httpHeaders)}}class kB extends tv{constructor(e){super(e);L(this,"_abortController",new AbortController);L(this,"_reader",null);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:o,url:l,withCredentials:c}=e._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const u=new Headers(e.headers);o_(l,u,c,this._abortController).then(d=>{e._responseOrigin=nv(d.url),a_(d.status,l),this._reader=d.body.getReader();const h=d.headers,{allowRangeRequests:f,suggestedLength:p}=i_({responseHeaders:h,isHttp:e.isHttp,rangeChunkSize:o,disableRange:i});this._isRangeSupported=f,this._contentLength=p||this._contentLength,this._filename=s_(h),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Pa("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var s;await this._headersCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:l_(e),done:!1})}cancel(e){var i;(i=this._reader)==null||i.cancel(e),this._abortController.abort()}}class PB extends ev{constructor(e,i,s){super(e,i,s);L(this,"_abortController",new AbortController);L(this,"_readCapability",Promise.withResolvers());L(this,"_reader",null);const{url:r,withCredentials:o}=e._source,l=new Headers(e.headers);l.append("Range",`bytes=${i}-${s-1}`),o_(r,l,o,this._abortController).then(c=>{const u=nv(c.url);r_(u,e._responseOrigin),a_(c.status,r),this._reader=c.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:{value:l_(e),done:!1}}cancel(e){var i;(i=this._reader)==null||i.cancel(e),this._abortController.abort()}}const Kv=200,dE=206;function _B(n){return typeof n!="string"?n:Ky(n).buffer}var js,Yd,c_,u_;class DB extends Zy{constructor(e){super(e,MB,NB);S(this,Yd);S(this,js,new WeakMap);L(this,"_responseOrigin",null);this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=n_(this.isHttp,e.httpHeaders)}_request(e){const i=new XMLHttpRequest,s={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};a(this,js).set(i,s),i.open("GET",this.url),i.withCredentials=this._source.withCredentials;for(const[r,o]of this.headers)i.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(i.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.validateStatus=r=>r===dE||r===Kv):s.validateStatus=r=>r===Kv,i.responseType="arraybuffer",xt(e.onError,"Expected `onError` callback to be provided."),i.onerror=()=>e.onError(i.status),i.onreadystatechange=C(this,Yd,u_).bind(this,i),i.onprogress=C(this,Yd,c_).bind(this,i),i.send(null),i}_abortRequest(e){a(this,js).has(e)&&(a(this,js).delete(e),e.abort())}getRangeReader(e,i){const s=super.getRangeReader(e,i);return s&&(s.onClosed=()=>this._rangeReaders.delete(s)),s}}js=new WeakMap,Yd=new WeakSet,c_=function(e,i){var r;const s=a(this,js).get(e);(r=s==null?void 0:s.onProgress)==null||r.call(s,i)},u_=function(e,i){const s=a(this,js).get(e);if(!s||(e.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),e.readyState!==4)||!a(this,js).has(e))return;if(a(this,js).delete(e),e.status===0&&this.isHttp){s.onError(e.status);return}const r=e.status||Kv;if(!s.validateStatus(r)){s.onError(e.status);return}const o=_B(e.response);if(r===dE){const l=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?s.onDone(o):(nt('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone(o):s.onError(e.status)};var Js,d_,h_,f_,p_;class MB extends tv{constructor(e){super(e);S(this,Js);L(this,"_cachedChunks",[]);L(this,"_done",!1);L(this,"_requests",[]);L(this,"_storedError",null);const{length:i}=e._source;this._contentLength=i,this._fullRequestXhr=e._request({onHeadersReceived:C(this,Js,d_).bind(this),onDone:C(this,Js,h_).bind(this),onError:C(this,Js,f_).bind(this),onProgress:C(this,Js,p_).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}Js=new WeakSet,d_=function(){const e=this._stream,{disableRange:i,rangeChunkSize:s}=e._source,r=this._fullRequestXhr;e._responseOrigin=nv(r.responseURL);const o=r.getAllResponseHeaders(),l=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[h,...f]=d.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:c,suggestedLength:u}=i_({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:s,disableRange:i});c&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=s_(l),this._isRangeSupported&&e._abortRequest(r),this._headersCapability.resolve()},h_=function(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}},f_=function(e){this._storedError=iv(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},p_=function(e){var i;(i=this.onProgress)==null||i.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})};var ro,m_,g_,Gb;class NB extends ev{constructor(e,i,s){super(e,i,s);S(this,ro);L(this,"onClosed",null);L(this,"_done",!1);L(this,"_queuedChunk",null);L(this,"_requests",[]);L(this,"_storedError",null);this._requestXhr=e._request({begin:i,end:s,onHeadersReceived:C(this,ro,m_).bind(this),onDone:C(this,ro,g_).bind(this),onError:C(this,ro,Gb).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var i;this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(i=this.onClosed)==null||i.call(this)}}ro=new WeakSet,m_=function(){var i;const e=nv((i=this._requestXhr)==null?void 0:i.responseURL);try{r_(e,this._stream._responseOrigin)}catch(s){this._storedError=s,C(this,ro,Gb).call(this,0)}},g_=function(e){var i;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,(i=this.onClosed)==null||i.call(this)},Gb=function(e){this._storedError??(this._storedError=iv(e,this._stream.url));for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const LB=/^[a-z][a-z0-9\-+.]+:/i;function RB(n){if(LB.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}function y_(n){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(n):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(n)}function v_(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(nt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class IB extends Zy{constructor(t){super(t,jB,FB),this.url=RB(t.url),xt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class jB extends tv{constructor(e){super(e);L(this,"_reader",null);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:o}=e._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const l=e.url,c=process.getBuiltinModule("fs");c.promises.lstat(l).then(u=>{const d=c.createReadStream(l),h=y_(d);this._reader=h.getReader();const{size:f}=u;f<=2*o&&(this._isRangeSupported=!1),this._contentLength=f,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Pa("Streaming is disabled.")),this._headersCapability.resolve()}).catch(u=>{u.code==="ENOENT"&&(u=iv(0,l.href)),this._headersCapability.reject(u)})}async read(){var s;await this._headersCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:v_(e),done:!1})}cancel(e){var i;(i=this._reader)==null||i.cancel(e)}}class FB extends ev{constructor(e,i,s){super(e,i,s);L(this,"_readCapability",Promise.withResolvers());L(this,"_reader",null);const r=e.url,o=process.getBuiltinModule("fs");try{const l=o.createReadStream(r,{start:i,end:s-1}),c=y_(l);this._reader=c.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:{value:v_(e),done:!1}}cancel(e){var i;(i=this._reader)==null||i.cancel(e)}}const fh=Symbol("INITIAL_DATA");var Xn,kp,qb;class x_{constructor(){S(this,kp);S(this,Xn,Object.create(null))}get(t,e=null){if(e){const s=C(this,kp,qb).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=a(this,Xn)[t];if(!i||i.data===fh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,Xn)[t];return!!e&&e.data!==fh}delete(t){const e=a(this,Xn)[t];return!e||e.data===fh?!1:(delete a(this,Xn)[t],!0)}resolve(t,e=null){const i=C(this,kp,qb).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,Xn)){const{data:i}=a(this,Xn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}v(this,Xn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,Xn)){const{data:e}=a(this,Xn)[t];e!==fh&&(yield[t,e])}}}Xn=new WeakMap,kp=new WeakSet,qb=function(t){var e;return(e=a(this,Xn))[t]||(e[t]={...Promise.withResolvers(),data:fh})};const OB=1e5,hE=30;var mE,Ho,Mn,Pp,_p,Tl,Er,Dp,Mp,kl,Np,td,$o,ed,Lp,nd,Pl,Rp,Ip,id,_l,jp,sd,rd,oo,b_,w_,Xb,gi,zg,Yb,S_,A_;const Be=class Be{constructor({textContentSource:t,container:e,viewport:i}){S(this,oo);S(this,Ho,Promise.withResolvers());S(this,Mn,null);S(this,Pp,!1);S(this,_p,!!((mE=globalThis.FontInspector)!=null&&mE.enabled));S(this,Tl,null);S(this,Er,null);S(this,Dp,0);S(this,Mp,0);S(this,kl,null);S(this,Np,null);S(this,td,0);S(this,$o,0);S(this,ed,Object.create(null));S(this,Lp,[]);S(this,nd,null);S(this,Pl,[]);S(this,Rp,new WeakMap);S(this,Ip,null);var c;if(t instanceof ReadableStream)v(this,nd,t);else if(typeof t=="object")v(this,nd,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,Mn,v(this,Np,e)),v(this,$o,i.scale*Ks.pixelRatio),v(this,td,i.rotation),v(this,Er,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=i.rawDims;v(this,Ip,[1,0,0,-1,-o,l+r]),v(this,Mp,s),v(this,Dp,r),C(c=Be,gi,S_).call(c),e.style.setProperty("--min-font-size",a(Be,sd)),vc(e,i),a(this,Ho).promise.finally(()=>{a(Be,rd).delete(this),v(this,Er,null),v(this,ed,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=_e.platform;return it(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,kl).read().then(({value:e,done:i})=>{if(i){a(this,Ho).resolve();return}a(this,Tl)??v(this,Tl,e.lang),Object.assign(a(this,ed),e.styles),C(this,oo,b_).call(this,e.items),t()},a(this,Ho).reject)};return v(this,kl,a(this,nd).getReader()),a(Be,rd).add(this),t(),a(this,Ho).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*Ks.pixelRatio,s=t.rotation;if(s!==a(this,td)&&(e==null||e(),v(this,td,s),vc(a(this,Np),{rotation:s})),i!==a(this,$o)){e==null||e(),v(this,$o,i);const o={div:null,properties:null,ctx:C(r=Be,gi,zg).call(r,a(this,Tl))};for(const l of a(this,Pl))o.properties=a(this,Rp).get(l),o.div=l,C(this,oo,Xb).call(this,o)}}cancel(){var e;const t=new Pa("TextLayer task cancelled.");(e=a(this,kl))==null||e.cancel(t).catch(()=>{}),v(this,kl,null),a(this,Ho).reject(t)}get textDivs(){return a(this,Pl)}get textContentItemsStr(){return a(this,Lp)}static cleanup(){if(!(a(this,rd).size>0)){a(this,id).clear();for(const{canvas:t}of a(this,_l).values())t.remove();a(this,_l).clear()}}};Ho=new WeakMap,Mn=new WeakMap,Pp=new WeakMap,_p=new WeakMap,Tl=new WeakMap,Er=new WeakMap,Dp=new WeakMap,Mp=new WeakMap,kl=new WeakMap,Np=new WeakMap,td=new WeakMap,$o=new WeakMap,ed=new WeakMap,Lp=new WeakMap,nd=new WeakMap,Pl=new WeakMap,Rp=new WeakMap,Ip=new WeakMap,id=new WeakMap,_l=new WeakMap,jp=new WeakMap,sd=new WeakMap,rd=new WeakMap,oo=new WeakSet,b_=function(t){var s,r;if(a(this,Pp))return;(r=a(this,Er)).ctx??(r.ctx=C(s=Be,gi,zg).call(s,a(this,Tl)));const e=a(this,Pl),i=a(this,Lp);for(const o of t){if(e.length>OB){nt("Ignoring additional textDivs for performance reasons."),v(this,Pp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Mn);v(this,Mn,document.createElement("span")),a(this,Mn).classList.add("markedContent"),o.id&&a(this,Mn).setAttribute("id",`${o.id}`),o.tag==="Artifact"&&(a(this,Mn).ariaHidden=!0),l.append(a(this,Mn))}else o.type==="endMarkedContent"&&v(this,Mn,a(this,Mn).parentNode);continue}i.push(o.str),C(this,oo,w_).call(this,o)}},w_=function(t){var x;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Pl).push(e);const s=H.transform(a(this,Ip),t.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,ed)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,_p)&&o.fontSubstitution||o.fontFamily;l=Be.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),u=c*C(x=Be,gi,A_).call(x,l,o,a(this,Tl));let d,h;r===0?(d=s[4],h=s[5]-u):(d=s[4]+u*Math.sin(r),h=s[5]-u*Math.cos(r));const f=e.style;f.left=`${(100*d/a(this,Mp)).toFixed(2)}%`,f.top=`${(100*h/a(this,Dp)).toFixed(2)}%`,f.setProperty("--font-height",`${c.toFixed(2)}px`),f.fontFamily=l,i.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,_p)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const y=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);y!==A&&Math.max(y,A)/Math.min(y,A)>1.5&&(p=!0)}if(p&&(i.canvasWidth=o.vertical?t.height:t.width),a(this,Rp).set(e,i),a(this,Er).div=e,a(this,Er).properties=i,C(this,oo,Xb).call(this,a(this,Er)),i.hasText&&a(this,Mn).append(e),i.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),a(this,Mn).append(y)}},Xb=function(t){var o;const{div:e,properties:i,ctx:s}=t,{style:r}=e;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=r,{canvasWidth:c,fontSize:u}=i;C(o=Be,gi,Yb).call(o,s,u*a(this,$o),l);const{width:d}=s.measureText(e.textContent);d>0&&r.setProperty("--scale-x",c*a(this,$o)/d)}i.angle!==0&&r.setProperty("--rotate",`${i.angle}deg`)},gi=new WeakSet,zg=function(t=null){let e=a(this,_l).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,_l).set(t,e),a(this,jp).set(e,{size:0,family:""})}return e},Yb=function(t,e,i){const s=a(this,jp).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},S_=function(){if(a(this,sd)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),v(this,sd,t.getBoundingClientRect().height),t.remove()},A_=function(t,e,i){const s=a(this,id).get(t);if(s)return s;const r=C(this,gi,zg).call(this,i);r.canvas.width=r.canvas.height=hE,C(this,gi,Yb).call(this,r,hE,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(_e.platform.isFirefox&&nt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),a(this,id).set(t,u),u},S(Be,gi),S(Be,id,new Map),S(Be,_l,new Map),S(Be,jp,new WeakMap),S(Be,sd,null),S(Be,rd,new Set);let Pf=Be;const BB=100;function C_(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new Qb,{docId:e}=t,i=n.url?qO(n.url):null,s=n.data?XO(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof E_?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof _f?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Jy(n.docBaseUrl)?n.docBaseUrl:null,p=ag(n.cMapUrl),x=n.cMapPacked!==!1,y=n.CMapReaderFactory||(vn?nB:QC),A=ag(n.iccUrl),g=ag(n.standardFontDataUrl),w=n.StandardFontDataFactory||(vn?iB:KC),b=ag(n.wasmUrl),E=n.WasmFactory||(vn?sB:JC),T=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,_=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!vn,D=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!vn&&(_e.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R=typeof n.disableFontFace=="boolean"?n.disableFontFace:vn,V=n.fontExtraProperties===!0,G=n.enableXfa===!0,I=n.ownerDocument||globalThis.document,F=n.disableRange===!0,O=n.disableStream===!0,z=n.disableAutoFetch===!0,j=n.pdfBug===!0,q=n.CanvasFactory||(vn?eB:JO),Q=n.FilterFactory||(vn?tB:ZO),K=n.enableHWA===!0,Z=n.useWasm!==!1,ft=c?c.length:n.length??NaN,ie=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!vn&&!R,wt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(y===QC&&w===KC&&E===JC&&p&&g&&b&&wh(p,document.baseURI)&&wh(g,document.baseURI)&&wh(b,document.baseURI)),St=null;bO(h);const At={canvasFactory:new q({ownerDocument:I,enableHWA:K}),filterFactory:new Q({docId:e,ownerDocument:I}),cMapReaderFactory:wt?null:new y({baseUrl:p,isCompressed:x}),standardFontDataFactory:wt?null:new w({baseUrl:g}),wasmFactory:wt?null:new E({baseUrl:b})};d||(d=_f.create({verbosity:h,port:qs.workerPort}),t._worker=d);const th={docId:e,apiVersion:"5.4.624",data:s,password:l,disableAutoFetch:z,rangeChunkSize:u,length:ft,docBaseUrl:f,enableXfa:G,evaluatorOptions:{maxImageSize:P,disableFontFace:R,ignoreErrors:T,isEvalSupported:k,isOffscreenCanvasSupported:_,isImageDecoderSupported:D,canvasMaxAreaInBytes:M,fontExtraProperties:V,useSystemFonts:ie,useWasm:Z,useWorkerFetch:wt,cMapUrl:p,iccUrl:A,standardFontDataUrl:g,wasmUrl:b}},Ia={ownerDocument:I,pdfBug:j,styleElement:St,enableHWA:K,loadingParams:{disableAutoFetch:z,enableXfa:G}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const vs=d.messageHandler.sendWithPromise("GetDocRequest",th,s?[s.buffer]:null);let dn;if(c)dn=new SB({pdfDataRangeTransport:c,disableRange:F,disableStream:O});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Om=wh(i)?TB:vn?IB:DB;dn=new Om({url:i,length:ft,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:F,disableStream:O})}return vs.then(Om=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const vS=new _h(e,Om,d.port),_D=new UB(vS,t,dn,Ia,At);t._transport=_D,vS.send("Ready",null)})}).catch(t._capability.reject),t}var uy;const dy=class dy{constructor(){L(this,"_capability",Promise.withResolvers());L(this,"_transport",null);L(this,"_worker",null);L(this,"docId",`d${we(dy,uy)._++}`);L(this,"destroyed",!1);L(this,"onPassword",null);L(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};uy=new WeakMap,S(dy,uy,0);let Qb=dy;var Dl,Fp,Op,Bp,zp;class E_{constructor(t,e,i=!1,s=null){S(this,Dl,Promise.withResolvers());S(this,Fp,[]);S(this,Op,[]);S(this,Bp,[]);S(this,zp,[]);this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){a(this,zp).push(t)}addProgressListener(t){a(this,Bp).push(t)}addProgressiveReadListener(t){a(this,Op).push(t)}addProgressiveDoneListener(t){a(this,Fp).push(t)}onDataRange(t,e){for(const i of a(this,zp))i(t,e)}onDataProgress(t,e){a(this,Dl).promise.then(()=>{for(const i of a(this,Bp))i(t,e)})}onDataProgressiveRead(t){a(this,Dl).promise.then(()=>{for(const e of a(this,Op))e(t)})}onDataProgressiveDone(){a(this,Dl).promise.then(()=>{for(const t of a(this,Fp))t()})}transportReady(){a(this,Dl).resolve()}requestDataRange(t,e){bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Dl=new WeakMap,Fp=new WeakMap,Op=new WeakMap,Bp=new WeakMap,zp=new WeakMap;class zB{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return it(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Tr,Vp,Ml,Rh;class VB{constructor(t,e,i,s=!1){S(this,Ml);S(this,Tr,!1);S(this,Vp,kf.instance);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new HC:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new x_,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new Rm({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return it(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:s="display",annotationMode:r=yo.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:x=null}){var D,M,R;(D=this._stats)==null||D.time("Overall");const y=this._transport.getRenderingIntent(s,r,h,f),{renderingIntent:A,cacheKey:g}=y;v(this,Tr,!1),c||(c=this._transport.getOptionalContentConfig(A));let w=this._intentStates.get(g);w||(w=Object.create(null),this._intentStates.set(g,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const b=!!(A&ci.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(y));const E=!!(this._pdfBug&&((R=globalThis.StepperManager)!=null&&R.enabled)),T=!this.recordedBBoxes&&(p||E),P=V=>{var G,I;if(w.renderTasks.delete(k),T){const F=(G=k.gfx)==null?void 0:G.dependencyTracker.take();F&&(k.stepper&&k.stepper.setOperatorBBoxes(F,k.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=F))}b&&v(this,Tr,!0),C(this,Ml,Rh).call(this),V?(k.capability.reject(V),this._abortOperatorList({intentState:w,reason:V instanceof Error?V:new Error(V)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new Kb({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:T?new oB(e,w.operatorList.length,E):null,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:x});(w.renderTasks||(w.renderTasks=new Set)).add(k);const _=k.task;return Promise.all([w.displayReadyCapability.promise,c]).then(([V,G])=>{var I;if(this.destroyed){P();return}if((I=this._stats)==null||I.time("Rendering"),!(G.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:V,optionalContentConfig:G}),k.operatorListChanged()}).catch(P),_}getOperatorList({intent:t="display",annotationMode:e=yo.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,i,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:a(this,Vp).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Tf.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:c,done:u}){if(u){i(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),v(this,Tr,!1),Promise.all(t)}cleanup(t=!1){v(this,Tr,!0);const e=C(this,Ml,Rh).call(this);return t&&e&&this._stats&&(this._stats=new HC),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&C(this,Ml,Rh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:a(this,Vp).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();C(this,Ml,Rh).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof iS){let s=BB;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Pa(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Tr=new WeakMap,Vp=new WeakMap,Ml=new WeakSet,Rh=function(){if(!a(this,Tr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,Tr,!1),!0};var Wo,ss,kr,Nl,hy,Ll,Rl,bn,Vg,T_,k_,Ih,od,Ug;const Wt=class Wt{constructor({name:t=null,port:e=null,verbosity:i=wO()}={}){S(this,bn);S(this,Wo,Promise.withResolvers());S(this,ss,null);S(this,kr,null);S(this,Nl,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(a(Wt,Rl).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Wt,Rl).set(e,this),C(this,bn,T_).call(this,e)}else C(this,bn,k_).call(this)}get promise(){return a(this,Wo).promise}get port(){return a(this,kr)}get messageHandler(){return a(this,ss)}destroy(){var t,e;this.destroyed=!0,(t=a(this,Nl))==null||t.terminate(),v(this,Nl,null),a(Wt,Rl).delete(a(this,kr)),v(this,kr,null),(e=a(this,ss))==null||e.destroy(),v(this,ss,null)}static create(t){const e=a(this,Rl).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Wt(t)}static get workerSrc(){if(qs.workerSrc)return qs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return it(this,"_setupFakeWorkerGlobal",(async()=>a(this,od,Ug)?a(this,od,Ug):(await import(this.workerSrc)).WorkerMessageHandler)())}};Wo=new WeakMap,ss=new WeakMap,kr=new WeakMap,Nl=new WeakMap,hy=new WeakMap,Ll=new WeakMap,Rl=new WeakMap,bn=new WeakSet,Vg=function(){a(this,Wo).resolve(),a(this,ss).send("configure",{verbosity:this.verbosity})},T_=function(t){v(this,kr,t),v(this,ss,new _h("main","worker",t)),a(this,ss).on("ready",()=>{}),C(this,bn,Vg).call(this)},k_=function(){if(a(Wt,Ll)||a(Wt,od,Ug)){C(this,bn,Ih).call(this);return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new _h("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?a(this,Wo).reject(new Error("Worker was destroyed")):C(this,bn,Ih).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,Nl)||s()},{signal:r.signal}),i.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}v(this,ss,i),v(this,kr,e),v(this,Nl,e),C(this,bn,Vg).call(this)}),i.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{C(this,bn,Ih).call(this)}});const o=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch{Qy("The worker has been disabled.")}C(this,bn,Ih).call(this)},Ih=function(){a(Wt,Ll)||(nt("Setting up fake worker."),v(Wt,Ll,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,Wo).reject(new Error("Worker was destroyed"));return}const e=new KO;v(this,kr,e);const i=`fake${we(Wt,hy)._++}`,s=new _h(i+"_worker",i,e);t.setup(s,e),v(this,ss,new _h(i,i+"_worker",e)),C(this,bn,Vg).call(this)}).catch(t=>{a(this,Wo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},od=new WeakSet,Ug=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},S(Wt,od),S(Wt,hy,0),S(Wt,Ll,!1),S(Wt,Rl,new WeakMap),vn&&(v(Wt,Ll,!0),qs.workerSrc||(qs.workerSrc="./pdf.worker.mjs")),Wt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},Wt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Wt.fromPort=t=>{if(LO("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Wt.create(t)};let _f=Wt;var Yn,Pr,_r,Ii,Go,ad,Dr,Nn,pi,P_,jh,Hg;class UB{constructor(t,e,i,s,r){S(this,pi);L(this,"downloadInfoCapability",Promise.withResolvers());S(this,Yn,null);S(this,Pr,new Map);S(this,_r,null);S(this,Ii,new Map);S(this,Go,new Map);S(this,ad,new Map);S(this,Dr,null);S(this,Nn,kf.instance);this.messageHandler=t,this.loadingTask=e,v(this,_r,i),this.commonObjs=new x_,this.fontLoader=new $O({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.enableHWA=s.enableHWA,this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),a(this,Nn).addListener(C(this,pi,P_).bind(this))}get annotationStorage(){return it(this,"annotationStorage",new rS)}getRenderingIntent(t,e=yo.ENABLE,i=null,s=!1,r=!1){let o=ci.DISPLAY,l=Mb;switch(t){case"any":o=ci.ANY;break;case"display":break;case"print":o=ci.PRINT;break;default:nt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&ci.PRINT&&i instanceof G2?i:this.annotationStorage;switch(e){case yo.DISABLE:o+=ci.ANNOTATIONS_DISABLE;break;case yo.ENABLE:break;case yo.ENABLE_FORMS:o+=ci.ANNOTATIONS_FORMS;break;case yo.ENABLE_STORAGE:o+=ci.ANNOTATIONS_STORAGE,l=c.serializable;break;default:nt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=ci.IS_EDITING),r&&(o+=ci.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,l.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,Dr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,Ii).values())t.push(s._destroy());a(this,Ii).clear(),a(this,Go).clear(),a(this,ad).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Pr).clear(),this.filterFactory.destroy(),Pf.cleanup(),(s=a(this,_r))==null||s.cancelAllRequests(new Pa("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{xt(a(this,_r),"GetReader - no `BasePDFStream` instance available."),v(this,Yn,a(this,_r).getFullReader()),a(this,Yn).onProgress=r=>C(this,pi,Hg).call(this,r),s.onPull=()=>{a(this,Yn).read().then(function({value:r,done:o}){if(o){s.close();return}xt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{a(this,Yn).cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{await a(this,Yn).headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=a(this,Yn);return s&&r&&(a(this,Yn).onProgress=null),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(i,s)=>{xt(a(this,_r),"GetRangeReader - no `BasePDFStream` instance available.");const r=a(this,_r).getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}xt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:i})=>{a(this,Nn).pagesNumber=i.numPages,this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new zB(i,this))}),t.on("DocException",i=>{e._capability.reject(En(i))}),t.on("PasswordRequest",i=>{v(this,Dr,Promise.withResolvers());try{if(!e.onPassword)throw En(i);const s=r=>{r instanceof Error?a(this,Dr).reject(r):a(this,Dr).resolve({password:r})};e.onPassword(s,i.code)}catch(s){a(this,Dr).reject(s)}return a(this,Dr).promise}),t.on("DataLoaded",i=>{C(this,pi,Hg).call(this,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,Ii).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const f=r.error;nt(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const l=new Nb(r),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,u=new WO(l,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:d}=r;xt(d,"The imageRef must be defined.");for(const f of a(this,Ii).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===d)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new GO(r));break;case"Image":this.commonObjs.resolve(i,r);break;case"Pattern":const h=new Lb(r);this.commonObjs.resolve(i,h.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Ii).get(s);if(!l.objs.has(i)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{this.destroyed||C(this,pi,Hg).call(this,i)}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&nt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=a(this,Yn))==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>a(this,Nn).pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,Nn).getPageId(t)-1,s=a(this,Go).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&a(this,ad).set(o.refStr,i);const l=new VB(e,o,this,this._params.pdfBug);return a(this,Ii).set(e,l),l});return a(this,Go).set(e,r),r}async getPageIndex(t){if(!Rb(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return a(this,Nn).getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a(this,Nn).getPageId(t+1)-1,intent:e})}getFieldObjects(){return C(this,pi,jh).call(this,"GetFieldObjects")}hasJSActions(){return C(this,pi,jh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return C(this,pi,jh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a(this,Nn).getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a(this,Nn).getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,pi,jh).call(this,"GetOptionalContentConfig").then(e=>new wB(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Pr).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new xB(s[1]):null,contentDispositionFilename:((r=a(this,Yn))==null?void 0:r.filename)??null,contentLength:((o=a(this,Yn))==null?void 0:o.contentLength)??null,hasStructTree:s[2]}});return a(this,Pr).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Ii).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Pr).clear(),this.filterFactory.destroy(!0),Pf.cleanup()}}cachedPageNumber(t){if(!Rb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,i=a(this,ad).get(e);return i>=0?a(this,Nn).getPageNumber(i+1):null}}Yn=new WeakMap,Pr=new WeakMap,_r=new WeakMap,Ii=new WeakMap,Go=new WeakMap,ad=new WeakMap,Dr=new WeakMap,Nn=new WeakMap,pi=new WeakSet,P_=function(){const t=new Map,e=new Map;for(let i=0,s=a(this,Nn).pagesNumber;i<s;i++){const r=a(this,Nn).getPrevPageNumber(i+1)-1,o=a(this,Ii).get(r);o&&t.set(i,o);const l=a(this,Go).get(r);l&&e.set(i,l)}v(this,Ii,t),v(this,Go,e)},jh=function(t,e=null){const i=a(this,Pr).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return a(this,Pr).set(t,s),s},Hg=function({loaded:t,total:e}){var i,s;(s=(i=this.loadingTask).onProgress)==null||s.call(i,{loaded:t,total:e,percent:Ge(Math.round(t/e*100),0,100)})};class HB{constructor(t){L(this,"_internalRenderTask",null);L(this,"onContinue",null);L(this,"onError",null);this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&(e==null?void 0:e.size)>0}}var qo,Il;const Wa=class Wa{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:x=null}){S(this,qo,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new HB(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=p,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=x}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,u;if(this.cancelled)return;if(this._canvas){if(a(Wa,Il).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Wa,Il).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new hu(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var i,s,r;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,qo)&&(window.cancelAnimationFrame(a(this,qo)),v(this,qo,null)),a(Wa,Il).delete(this._canvas),t||(t=new iS(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,qo,window.requestAnimationFrame(()=>{v(this,qo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Wa,Il).delete(this._canvas),this.callback())))}};qo=new WeakMap,Il=new WeakMap,S(Wa,Il,new WeakSet);let Kb=Wa;const __="5.4.624",$B="384c6208b";var Qn,jl,ld,Ce,Up,cd,Mr,Hp,Xo,rs,$p,Rt,Jb,Zb,tw,Va,D_,uo;const Tn=class Tn{constructor({editor:t=null,uiManager:e=null}){S(this,Rt);S(this,Qn,null);S(this,jl,null);S(this,ld);S(this,Ce,null);S(this,Up,!1);S(this,cd,!1);S(this,Mr,null);S(this,Hp);S(this,Xo,null);S(this,rs,null);var i,s;t?(v(this,cd,!1),v(this,Mr,t)):v(this,cd,!0),v(this,rs,(t==null?void 0:t._uiManager)||e),v(this,Hp,a(this,rs)._eventBus),v(this,ld,((i=t==null?void 0:t.color)==null?void 0:i.toUpperCase())||((s=a(this,rs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Tn,$p)||v(Tn,$p,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return it(this,"_keyboardManager",new jm([[["Escape","mac+Escape"],Tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Tn.prototype._moveToPrevious],[["Home","mac+Home"],Tn.prototype._moveToBeginning],[["End","mac+End"],Tn.prototype._moveToEnd]]))}renderButton(){const t=v(this,Qn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",a(this,Mr)&&(t.ariaControls=`${a(this,Mr).id}_colorpicker_dropdown`);const e=a(this,rs)._signal;t.addEventListener("click",C(this,Rt,Va).bind(this),{signal:e}),t.addEventListener("keydown",C(this,Rt,tw).bind(this),{signal:e});const i=v(this,jl,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=a(this,ld),t.append(i),t}renderMainDropdown(){const t=v(this,Ce,C(this,Rt,Jb).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===a(this,Qn)){C(this,Rt,Va).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,Rt,Zb).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,Rt,uo)){C(this,Rt,Va).call(this,t);return}if(t.target===a(this,Qn)){(e=a(this,Ce).firstElementChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,Ce))==null?void 0:e.firstElementChild)||t.target===a(this,Qn)){a(this,Rt,uo)&&this._hideDropdownFromKeyboard();return}a(this,Rt,uo)||C(this,Rt,Va).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,Rt,uo)){C(this,Rt,Va).call(this,t);return}(e=a(this,Ce).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Rt,uo)){C(this,Rt,Va).call(this,t);return}(e=a(this,Ce).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,Ce))==null||t.classList.add("hidden"),a(this,Qn).ariaExpanded="false",(e=a(this,Xo))==null||e.abort(),v(this,Xo,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,cd)){if(!a(this,Rt,uo)){(t=a(this,Mr))==null||t.unselect();return}this.hideDropdown(),a(this,Qn).focus({preventScroll:!0,focusVisible:a(this,Up)})}}updateColor(t){if(a(this,jl)&&(a(this,jl).style.backgroundColor=t),!a(this,Ce))return;const e=a(this,rs).highlightColors.values();for(const i of a(this,Ce).children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=a(this,Qn))==null||t.remove(),v(this,Qn,null),v(this,jl,null),(e=a(this,Ce))==null||e.remove(),v(this,Ce,null)}};Qn=new WeakMap,jl=new WeakMap,ld=new WeakMap,Ce=new WeakMap,Up=new WeakMap,cd=new WeakMap,Mr=new WeakMap,Hp=new WeakMap,Xo=new WeakMap,rs=new WeakMap,$p=new WeakMap,Rt=new WeakSet,Jb=function(){const t=document.createElement("div"),e=a(this,rs)._signal;t.addEventListener("contextmenu",qi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,Mr)&&(t.id=`${a(this,Mr).id}_colorpicker_dropdown`);for(const[i,s]of a(this,rs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",a(Tn,$p)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===a(this,ld),r.addEventListener("click",C(this,Rt,Zb).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",C(this,Rt,tw).bind(this),{signal:e}),t},Zb=function(t,e){e.stopPropagation(),a(this,Hp).dispatch("switchannotationeditorparams",{source:this,type:ht.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},tw=function(t){Tn._keyboardManager.exec(this,t)},Va=function(t){if(a(this,Rt,uo)){this.hideDropdown();return}if(v(this,Up,t.detail===0),a(this,Xo)||(v(this,Xo,new AbortController),window.addEventListener("pointerdown",C(this,Rt,D_).bind(this),{signal:a(this,rs).combinedSignal(a(this,Xo))})),a(this,Qn).ariaExpanded="true",a(this,Ce)){a(this,Ce).classList.remove("hidden");return}const e=v(this,Ce,C(this,Rt,Jb).call(this));a(this,Qn).append(e)},D_=function(t){var e;(e=a(this,Ce))!=null&&e.contains(t.target)||this.hideDropdown()},uo=function(){return a(this,Ce)&&!a(this,Ce).classList.contains("hidden")},S(Tn,$p,null);let Y0=Tn;var Fs,Wp,ud,Gp;const Ga=class Ga{constructor(t){S(this,Fs,null);S(this,Wp,null);S(this,ud,null);v(this,Wp,t),v(this,ud,t._uiManager),a(Ga,Gp)||v(Ga,Gp,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,Fs))return a(this,Fs);const{editorType:t,colorType:e,color:i}=a(this,Wp),s=v(this,Fs,document.createElement("input"));return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",a(Ga,Gp)[t]),s.addEventListener("input",()=>{a(this,ud).updateParams(e,s.value)},{signal:a(this,ud)._signal}),s}update(t){a(this,Fs)&&(a(this,Fs).value=t)}destroy(){var t;(t=a(this,Fs))==null||t.remove(),v(this,Fs,null)}hideDropdown(){}};Fs=new WeakMap,Wp=new WeakMap,ud=new WeakMap,Gp=new WeakMap,S(Ga,Gp,null);let Q0=Ga;function fE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function ph(n){return Math.max(0,Math.min(255,255*n))}class pE{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ph(t),[t,t,t]}static G_HTML([t]){const e=fE(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(ph)}static RGB_HTML(t){return`#${t.map(fE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[ph(1-Math.min(1,t+s)),ph(1-Math.min(1,i+s)),ph(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,o=1-i,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class WB{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){bt("Abstract method `_createSVG` called.")}}class K0 extends WB{_createSVG(t){return document.createElementNS(tr,t)}}const GB=9,bc=new WeakSet,qB=new Date().getTimezoneOffset()*60*1e3;class Jv{static create(t){switch(t.data.annotationType){case ge.LINK:return new lS(t);case ge.TEXT:return new YB(t);case ge.WIDGET:switch(t.data.fieldType){case"Tx":return new QB(t);case"Btn":return t.data.radioButton?new L_(t):t.data.checkBox?new JB(t):new ZB(t);case"Ch":return new t5(t);case"Sig":return new KB(t)}return new kc(t);case ge.POPUP:return new nw(t);case ge.FREETEXT:return new O_(t);case ge.LINE:return new n5(t);case ge.SQUARE:return new i5(t);case ge.CIRCLE:return new s5(t);case ge.POLYLINE:return new B_(t);case ge.CARET:return new o5(t);case ge.INK:return new cS(t);case ge.POLYGON:return new r5(t);case ge.HIGHLIGHT:return new z_(t);case ge.UNDERLINE:return new a5(t);case ge.SQUIGGLY:return new l5(t);case ge.STRIKEOUT:return new c5(t);case ge.STAMP:return new V_(t);case ge.FILEATTACHMENT:return new u5(t);default:return new ee(t)}}}var Fl,dd,ji,qp,ew;const gS=class gS{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){S(this,qp);S(this,Fl,null);S(this,dd,!1);S(this,ji,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return gS._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var i;const{data:t}=this,e=(i=this.annotationStorage)==null?void 0:i.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const t=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:s}=this.data;let r=-1/0,o=-1/0;if((e==null?void 0:e.length)>=8){for(let c=0;c<e.length;c+=8)e[c+1]>o?(o=e[c+1],r=e[c+2]):e[c+1]===o&&(r=Math.max(r,e[c+2]));return[r,o]}if((i==null?void 0:i.length)>=1){for(const c of i)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/i,t[1]=100*(t[1]-o)/s,t}get commentText(){var e,i,s;const{data:t}=this;return((i=(e=this.annotationStorage.getRawValue(`${Cf}${t.id}`))==null?void 0:e.popup)==null?void 0:i.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${Cf}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=a(this,ji))==null?void 0:t.popup)||this.popup)==null||e.remove(),v(this,ji,this.popup=null)}updateEdited(t){var r;if(!this.container)return;t.rect&&(a(this,Fl)||v(this,Fl,{rect:this.data.rect.slice(0)}));const{rect:e,popup:i}=t;e&&C(this,qp,ew).call(this,e);let s=((r=a(this,ji))==null?void 0:r.popup)||this.popup;!s&&(i!=null&&i.text)&&(this._createPopup(i),s=a(this,ji).popup),s&&(s.updateEdited(t),i!=null&&i.deleted&&(s.remove(),v(this,ji,null),this.popup=null))}resetEdited(){var t;a(this,Fl)&&(C(this,qp,ew).call(this,a(this,Fl).rect),(t=a(this,ji))==null||t.popup.resetEdited(),v(this,Fl,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof kc)&&!(this instanceof lS)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof nw){const{rotation:y}=e;return!e.hasOwnCanvas&&y!==0&&this.setRotation(y,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const y=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(y>0||A>0){const w=`calc(${y}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=w}else if(this instanceof L_){const w=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case Dc.SOLID:o.borderStyle="solid";break;case Dc.DASHED:o.borderStyle="dashed";break;case Dc.BEVELED:nt("Unimplemented border style: beveled");break;case Dc.INSET:nt("Unimplemented border style: inset");break;case Dc.UNDERLINE:o.borderBottomStyle="solid";break}const g=e.borderColor||null;g?(v(this,dd,!0),o.borderColor=H.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=H.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-p)/h}%`;const{rotation:x}=e;return e.hasOwnCanvas||x===0?(o.width=`${100*l/d}%`,o.height=`${100*c/h}%`):this.setRotation(x,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/i}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],o=r[0],l=r.slice(1);s.target.style[i]=pE[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:pE[`${o}_rgb`](l)})};return it(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const o=i[s];if(o){const l={detail:{[s]:r},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(y=>Math.fround(y));if(t.length===8){const[y,A,g,w]=t.subarray(2,6);if(s===y&&r===A&&e===g&&i===w)return}const{style:o}=this.container;let l;if(a(this,dd)){const{borderColor:y,borderWidth:A}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=s-e,u=r-i,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),x=`clippath_${this.data.id}`;p.setAttribute("id",x),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,A=t.length;y<A;y+=8){const g=t[y],w=t[y+1],b=t[y+2],E=t[y+3],T=d.createElement("rect"),P=(b-e)/c,k=(r-w)/u,_=(g-b)/c,D=(w-E)/u;T.setAttribute("x",P),T.setAttribute("y",k),T.setAttribute("width",_),T.setAttribute("height",D),p.append(T),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${k}" width="${_}" height="${D}"/>`)}a(this,dd)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(h),this.container.style.clipPath=`url(#${x})`}_createPopup(t=null){const{data:e}=this;let i,s;t?(i={str:t.text},s=t.date):(i=e.contentsObj,s=e.modificationDate),v(this,ji,new nw({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(a(this,ji)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,ji)}render(){bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!bc.has(u)){nt(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&bc.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Fl=new WeakMap,dd=new WeakMap,ji=new WeakMap,qp=new WeakSet,ew=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let ee=gS;class XB extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var hi,Ua,M_,N_;class lS extends ee{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});S(this,hi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(C(this,hi,M_).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(C(this,hi,N_).call(this,s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(e,i,s=""){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&C(this,hi,Ua).call(this),s&&(e.title=s)}_bindNamedAction(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(e.title=s),C(this,hi,Ua).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}i.overlaidText&&(e.title=i.overlaidText),e.onclick||(e.onclick=()=>!1),C(this,hi,Ua).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),C(this,hi,Ua).call(this),!this._fieldObjects){nt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var h;s==null||s();const{fields:r,refs:o,include:l}=i,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const x=this._fieldObjects[p]||[];for(const{id:y}of x)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const x of p)f.has(x.id)===l&&c.push(x)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:p}=f;switch(d.push(p),f.type){case"text":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}default:continue}const x=document.querySelector(`[data-element-id="${p}"]`);if(x){if(!bc.has(x)){nt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}hi=new WeakSet,Ua=function(){this.container.setAttribute("data-internal-link","")},M_=function(e,i,s="",r=null){e.href=this.linkService.getAnchorUrl(""),i.description?e.title=i.description:s&&(e.title=s),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},C(this,hi,Ua).call(this)},N_=function(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(e.title=s),C(this,hi,Ua).call(this)};class YB extends ee{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class kc extends ee{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return _e.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var l;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,i,s){var r,o,l;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":H.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||GB,r=t.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),d=Math.round(u/(Wv*s))||1,h=u/d;o=Math.min(s,c(h/Wv))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(u/Wv))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=H.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class QB extends kc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),bc.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,x=!!f&&this.enableScripting;h&&(i.title=h),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(i,"value",A.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",A=>{const g=this.data.defaultFieldValue??"";i.value=d.userValue=g,d.formattedValue=null});let y=A=>{const{formattedValue:g}=d;g!=null&&(A.target.value=g),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",g=>{var b;if(d.focused)return;const{target:w}=g;if(x&&(w.type=f,p&&(w.step=p)),d.userValue){const E=d.userValue;if(x)if(f==="time"){const T=new Date(E),P=[T.getHours(),T.getMinutes(),T.getSeconds()];w.value=P.map(k=>k.toString().padStart(2,"0")).join(":")}else w.value=new Date(E-qB).toISOString().split(f==="date"?"T":".",1)[0];else w.value=E}d.lastCommittedValue=w.value,d.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const w={value(b){d.userValue=b.detail.value??"",x||t.setValue(e,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:E}=b.detail;d.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E);const T={formattedValue:E};x&&(T.value=E),t.setValue(e,T)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var k;const{charLimit:E}=b.detail,{target:T}=b;if(E===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",E);let P=d.userValue;!P||P.length<=E||(P=P.slice(0,E),T.value=d.userValue=P,t.setValue(e,{value:P}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(w,g)}),i.addEventListener("keydown",g=>{var E;d.commitKey=1;let w=-1;if(g.key==="Escape"?w=0:g.key==="Enter"&&!this.data.multiLine?w=2:g.key==="Tab"&&(d.commitKey=3),w===-1)return;const{value:b}=g.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const A=y;y=null,i.addEventListener("blur",g=>{var E,T;if(!d.focused||!g.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(d.focused=!1);const{target:w}=g;let{value:b}=w;if(x){if(b&&f==="time"){const P=b.split(":").map(k=>parseInt(k,10));b=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),w.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();w.type="text"}d.userValue=b,d.lastCommittedValue!==b&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),A(g)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",g=>{var D;d.lastCommittedValue=null;const{data:w,target:b}=g,{value:E,selectionStart:T,selectionEnd:P}=b;let k=T,_=P;switch(g.inputType){case"deleteWordBackward":{const M=E.substring(0,T).match(/\w*[^\w]*$/);M&&(k-=M[0].length);break}case"deleteWordForward":{const M=E.substring(T).match(/^[^\w]*\w*/);M&&(_+=M[0].length);break}case"deleteContentBackward":T===P&&(k-=1);break;case"deleteContentForward":T===P&&(_+=1);break}g.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:w||"",willCommit:!1,selStart:k,selEnd:_}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class KB extends kc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class JB extends kc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return bc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i)){const d=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=d),t.setValue(u.id,{value:d})}t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class L_ extends kc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(bc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===i;h.domElement&&(h.domElement.checked=f),t.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ZB extends lS{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class t5 extends kc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");bc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,i.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),r=!1),s.append(h)}let o=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),o=()=>{d.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,x=>x.selected).map(x=>x[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=l(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,x=new Set(Array.isArray(p)?p:[p]);for(const y of s.options)y.selected=x.has(y.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,x=f.detail.remove;p[x].selected=!1,s.remove(x),p.length>0&&Array.prototype.findIndex.call(p,A=>A.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:x,exportValue:y}=f.detail.insert,A=s.children[p],g=document.createElement("option");g.textContent=x,g.value=y,A?A.before(g):s.append(g),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const x of p){const{displayValue:y,exportValue:A}=x,g=document.createElement("option");g.textContent=y,g.value=A,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const x of f.target.options)x.selected=p.has(x.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),s.addEventListener("input",d=>{var p;const h=l(!0),f=l(!1);t.setValue(e,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Xp,iw;class nw extends ee{constructor(e){const{data:i,elements:s,parent:r}=e,o=!!r._commentManager;super(e,{isRenderable:!o&&ee._hasPopupData(i)});S(this,Xp);if(this.elements=s,o&&ee._hasPopupData(i)){const l=this.popup=C(this,Xp,iw).call(this);for(const c of s)c.popup=l}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const i=this.popup=C(this,Xp,iw).call(this),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${tu}${r}`).join(",")),this.container}}Xp=new WeakSet,iw=function(){return new e5({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Kn,Yo,fy,py,hd,fd,re,Os,Qo,Ol,pd,md,Bs,Jn,Nr,Lr,oe,Rr,Ko,Yp,Ir,gd,Bl,Jo,Me,Zo,lt,$g,sw,rw,ow,Wg,aw,R_,I_,j_,F_,Gg,qg,lw;class e5{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){S(this,lt);S(this,Kn,null);S(this,Yo,C(this,lt,j_).bind(this));S(this,fy,C(this,lt,lw).bind(this));S(this,py,C(this,lt,qg).bind(this));S(this,hd,C(this,lt,Gg).bind(this));S(this,fd,null);S(this,re,null);S(this,Os,null);S(this,Qo,null);S(this,Ol,null);S(this,pd,null);S(this,md,null);S(this,Bs,!1);S(this,Jn,null);S(this,Nr,null);S(this,Lr,null);S(this,oe,null);S(this,Rr,null);S(this,Ko,null);S(this,Yp,null);S(this,Ir,null);S(this,gd,null);S(this,Bl,null);S(this,Jo,!1);S(this,Me,null);S(this,Zo,null);v(this,re,t),v(this,gd,s),v(this,Os,o),v(this,Ir,l),v(this,pd,c),v(this,fd,e),v(this,Yp,u),v(this,md,d),v(this,Ol,i),v(this,Kn,f),v(this,Me,i[0]),v(this,Qo,H0.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup()),f||(C(this,lt,$g).call(this),a(this,re).hidden=!0,h&&C(this,lt,Gg).call(this))}renderCommentButton(){if(a(this,oe)){a(this,oe).parentNode||a(this,Me).container.after(a(this,oe));return}if(a(this,Rr)||C(this,lt,sw).call(this),!a(this,Rr))return;const{signal:t}=v(this,Nr,new AbortController),e=a(this,Me).hasOwnCommentButton,i=()=>{a(this,Kn).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{a(this,Kn).toggleCommentPopup(this,!1,!0,!e)},r=()=>{a(this,Kn).toggleCommentPopup(this,!1,!1)};if(e){v(this,oe,a(this,Me).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,Yo),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=v(this,oe,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,Me).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,lt,ow).call(this),C(this,lt,rw).call(this),o.addEventListener("keydown",a(this,Yo),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),l.after(o)}}get commentButtonColor(){const{color:t,opacity:e}=a(this,Me).commentData;return t?a(this,pd)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=a(this,oe))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:s,modificationDate:r}=a(this,Me).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:s,modificationDate:r}}get elementBeforePopup(){return a(this,oe)}get comment(){return a(this,Zo)||v(this,Zo,a(this,Me).commentText),a(this,Zo)}set comment(t){t!==this.comment&&(a(this,Me).commentText=v(this,Zo,t))}focus(){var t;(t=a(this,Me).container)==null||t.focus()}get parentBoundingClientRect(){return a(this,Me).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){a(this,oe)&&(a(this,oe).classList.toggle("selected",t),a(this,oe).ariaExpanded=e)}setSelectedCommentButton(t){a(this,oe).classList.toggle("selected",t)}get commentPopupPosition(){if(a(this,Ko))return a(this,Ko);const{x:t,y:e,height:i}=a(this,oe).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,Me).layer.getBoundingClientRect();return[(t-s)/o,(e+i-r)/l]}set commentPopupPosition(t){v(this,Ko,t)}hasDefaultPopupPosition(){return a(this,Ko)===null}get commentButtonPosition(){return a(this,Rr)}get commentButtonWidth(){return a(this,oe).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=a(this,Ko)||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:r,y:o,width:l,height:c}=s;a(this,Kn).showDialog(null,this,r+e*l,o+i*c,{...t,parentDimensions:s})}render(){var i,s;if(a(this,Jn))return;const t=v(this,Jn,document.createElement("div"));if(t.className="popup",a(this,fd)){const r=t.style.outlineColor=H.makeHexColor(...a(this,fd));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(i=a(this,gd))!=null&&i.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=a(this,gd)}if(t.append(e),a(this,Qo)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Qo).valueOf()})),r.dateTime=a(this,Qo).toISOString(),e.append(r)}c2({html:a(this,lt,Wg)||a(this,Os).str,dir:(s=a(this,Os))==null?void 0:s.dir,className:"popupContent"},t),a(this,re).append(t)}updateEdited({rect:t,popup:e,deleted:i}){var s;if(a(this,Kn)){i?(this.remove(),v(this,Zo,null)):e&&(e.deleted?this.remove():(C(this,lt,ow).call(this),v(this,Zo,e.text))),t&&(v(this,Rr,null),C(this,lt,sw).call(this),C(this,lt,rw).call(this));return}if(i||e!=null&&e.deleted){this.remove();return}C(this,lt,$g).call(this),a(this,Bl)||v(this,Bl,{contentsObj:a(this,Os),richText:a(this,Ir)}),t&&v(this,Lr,null),e&&e.text&&(v(this,Ir,C(this,lt,I_).call(this,e.text)),v(this,Qo,H0.toDateObject(e.date)),v(this,Os,null)),(s=a(this,Jn))==null||s.remove(),v(this,Jn,null)}resetEdited(){var t;a(this,Bl)&&({contentsObj:we(this,Os)._,richText:we(this,Ir)._}=a(this,Bl),v(this,Bl,null),(t=a(this,Jn))==null||t.remove(),v(this,Jn,null),v(this,Lr,null))}remove(){var t,e,i;if((t=a(this,Nr))==null||t.abort(),v(this,Nr,null),(e=a(this,Jn))==null||e.remove(),v(this,Jn,null),v(this,Jo,!1),v(this,Bs,!1),(i=a(this,oe))==null||i.remove(),v(this,oe,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){v(this,Jo,this.isVisible),a(this,Jo)&&(a(this,re).hidden=!0)}maybeShow(){a(this,Kn)||(C(this,lt,$g).call(this),a(this,Jo)&&(a(this,Jn)||C(this,lt,qg).call(this),v(this,Jo,!1),a(this,re).hidden=!1))}get isVisible(){return a(this,Kn)?!1:a(this,re).hidden===!1}}Kn=new WeakMap,Yo=new WeakMap,fy=new WeakMap,py=new WeakMap,hd=new WeakMap,fd=new WeakMap,re=new WeakMap,Os=new WeakMap,Qo=new WeakMap,Ol=new WeakMap,pd=new WeakMap,md=new WeakMap,Bs=new WeakMap,Jn=new WeakMap,Nr=new WeakMap,Lr=new WeakMap,oe=new WeakMap,Rr=new WeakMap,Ko=new WeakMap,Yp=new WeakMap,Ir=new WeakMap,gd=new WeakMap,Bl=new WeakMap,Jo=new WeakMap,Me=new WeakMap,Zo=new WeakMap,lt=new WeakSet,$g=function(){var e;if(a(this,Nr))return;v(this,Nr,new AbortController);const{signal:t}=a(this,Nr);for(const i of this.trigger)i.addEventListener("click",a(this,hd),{signal:t}),i.addEventListener("pointerenter",a(this,py),{signal:t}),i.addEventListener("pointerleave",a(this,fy),{signal:t}),i.classList.add("popupTriggerArea");for(const i of a(this,Ol))(e=i.container)==null||e.addEventListener("keydown",a(this,Yo),{signal:t})},sw=function(){const t=a(this,Ol).find(e=>e.hasCommentButton);t&&v(this,Rr,t._normalizePoint(t.commentButtonPosition))},rw=function(){if(a(this,Me).extraPopupElement&&!a(this,Me).editor)return;a(this,oe)||this.renderCommentButton();const[t,e]=a(this,Rr),{style:i}=a(this,oe);i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`},ow=function(){a(this,Me).extraPopupElement||(a(this,oe)||this.renderCommentButton(),a(this,oe).style.backgroundColor=this.commentButtonColor||"")},Wg=function(){const t=a(this,Ir),e=a(this,Os);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Ir).html||null},aw=function(){var t,e,i;return((i=(e=(t=a(this,lt,Wg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},R_=function(){var t,e,i;return((i=(e=(t=a(this,lt,Wg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},I_=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,lt,R_),fontSize:a(this,lt,aw)?`calc(${a(this,lt,aw)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},j_=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Bs))&&C(this,lt,Gg).call(this)},F_=function(){if(a(this,Lr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=a(this,pd);let o=!!a(this,md),l=o?a(this,md):a(this,Yp);for(const x of a(this,Ol))if(!l||H.intersect(x.data.rect,l)!==null){l=x.data.rect,o=!0;break}const c=H.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),d=o?l[2]-l[0]+5:0,h=c[0]+d,f=c[1];v(this,Lr,[100*(h-s)/e,100*(f-r)/i]);const{style:p}=a(this,re);p.left=`${a(this,Lr)[0]}%`,p.top=`${a(this,Lr)[1]}%`},Gg=function(){if(a(this,Kn)){a(this,Kn).toggleCommentPopup(this,!1);return}v(this,Bs,!a(this,Bs)),a(this,Bs)?(C(this,lt,qg).call(this),a(this,re).addEventListener("click",a(this,hd)),a(this,re).addEventListener("keydown",a(this,Yo))):(C(this,lt,lw).call(this),a(this,re).removeEventListener("click",a(this,hd)),a(this,re).removeEventListener("keydown",a(this,Yo)))},qg=function(){a(this,Jn)||this.render(),this.isVisible?a(this,Bs)&&a(this,re).classList.add("focused"):(C(this,lt,F_).call(this),a(this,re).hidden=!1,a(this,re).style.zIndex=parseInt(a(this,re).style.zIndex)+1e3)},lw=function(){a(this,re).classList.remove("focused"),!(a(this,Bs)||!this.isVisible)&&(a(this,re).hidden=!0,a(this,re).style.zIndex=parseInt(a(this,re).style.zIndex)-1e3)};class O_ extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=rt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Qp;class n5 extends ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Qp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=v(this,Qp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Qp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qp=new WeakMap;var Kp;class i5 extends ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Kp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=v(this,Kp,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Kp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kp=new WeakMap;var Jp;class s5 extends ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Jp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=v(this,Jp,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jp=new WeakMap;var Zp;class B_ extends ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Zp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!i)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let h=0,f=i.length;h<f;h+=2){const p=i[h]-e[0],x=e[3]-i[h+1];u.push(`${p},${x}`)}u=u.join(" ");const d=v(this,Zp,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Zp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zp=new WeakMap;class r5 extends B_{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class o5 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var tm,zl,em,cw;class cS extends ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,em);S(this,tm,null);S(this,zl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?rt.HIGHLIGHT:rt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=C(this,em,cw).call(this,i,e),d=this.svgFactory.create(c,u,!0),h=v(this,tm,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",l);for(let f=0,p=s.length;f<p;f++){const x=this.svgFactory.createElement(this.svgElementName);a(this,zl).push(x),x.setAttribute("points",s[f].join(",")),h.append(x)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:r}=e,o=a(this,tm);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,c=a(this,zl).length;l<c;l++)a(this,zl)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:u}=C(this,em,cw).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,zl)}addHighlightArea(){this.container.classList.add("highlightArea")}}tm=new WeakMap,zl=new WeakMap,em=new WeakSet,cw=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class z_ extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=rt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class a5 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class l5 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class c5 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class V_ extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=rt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var nm,im,uw;class u5 extends ee{constructor(e){var s;super(e,{isRenderable:!0});S(this,im);S(this,nm,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",C(this,im,uw).bind(this)),v(this,nm,s);const{isMac:r}=_e.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&C(this,im,uw).call(this)}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,nm)}addHighlightArea(){this.container.classList.add("highlightArea")}}nm=new WeakMap,im=new WeakSet,uw=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Vl,Ul,yd,ta,sm,Hl,Zn,rm,Kr,Xg,hw;const yS=class yS{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:d}){S(this,Kr);S(this,Vl,null);S(this,Ul,null);S(this,yd,null);S(this,ta,new Map);S(this,sm,null);S(this,Hl,null);S(this,Zn,[]);S(this,rm,!1);this.div=t,v(this,Vl,e),v(this,Ul,i),v(this,sm,l||null),v(this,Hl,u||null),v(this,yd,d||new rS),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return a(this,ta).size>0}async render(t){var l;const{annotations:e}=t,i=this.div;vc(i,this.viewport);const s=new Map,r=[],o={data:null,layer:i,linkService:a(this,Hl),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new K0,annotationStorage:a(this,yd),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const u=c.annotationType===ge.POPUP;if(u){const f=s.get(c.id);if(!f)continue;if(!this._commentManager){r.push(c);continue}o.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const d=Jv.create(o);if(!d.isRenderable)continue;if(!u&&(a(this,Zn).push(d),c.popupRef)){const f=s.get(c.popupRef);f?f.push(d):s.set(c.popupRef,[d])}const h=d.render();c.hidden&&(h.style.visibility="hidden"),d._isEditable&&(a(this,ta).set(d.data.id,d),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(d))}await C(this,Kr,Xg).call(this);for(const c of r){const u=o.elements=s.get(c.id);o.data=c;const d=Jv.create(o);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${tu}${c.id}`,c.hidden&&(h.style.visibility="hidden"),u.at(-1).container.after(h)}C(this,Kr,hw).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:a(this,Hl),svgFactory:new K0,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=yS._defaultBorderStyle),e.data=i;const s=Jv.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${tu}${i.id}`,a(this,Zn).push(s))}await C(this,Kr,Xg).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,vc(e,{rotation:t.rotation}),C(this,Kr,hw).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,ta).values())}getEditableAnnotation(t){return a(this,ta).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:s}=t,r=new XB({data:{id:i,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:a(this,Hl),annotationStorage:a(this,yd)});return r.render(),r.contentElement.id=`${tu}${i}`,r.createOrUpdatePopup(),a(this,Zn).push(r),r}removeAnnotation(t){var s;const e=a(this,Zn).findIndex(r=>r.data.id===t);if(e<0)return;const[i]=a(this,Zn).splice(e,1);(s=a(this,Vl))==null||s.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);C(this,Kr,Xg).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return it(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Dc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Vl=new WeakMap,Ul=new WeakMap,yd=new WeakMap,ta=new WeakMap,sm=new WeakMap,Hl=new WeakMap,Zn=new WeakMap,rm=new WeakMap,Kr=new WeakSet,Xg=async function(){var i,s,r;if(a(this,Zn).length===0)return;this.div.replaceChildren();const t=[];if(!a(this,rm)){v(this,rm,!0);for(const{contentElement:o,data:{id:l}}of a(this,Zn)){const c=o.id=`${tu}${l}`;t.push((i=a(this,sm))==null?void 0:i.getAriaAttributes(c).then(u=>{if(u)for(const[d,h]of u)o.setAttribute(d,h)}))}}a(this,Zn).sort(({data:{rect:[o,l,c,u]}},{data:{rect:[d,h,f,p]}})=>{if(o===c&&l===u)return 1;if(d===f&&h===p)return-1;const x=u,y=l,A=(l+u)/2,g=p,w=h,b=(h+p)/2;if(A>=g&&b<=y)return-1;if(b>=x&&A<=w)return 1;const E=(o+c)/2,T=(d+f)/2;return E-T});const e=document.createDocumentFragment();for(const o of a(this,Zn))e.append(o.container),this._commentManager?(r=((s=o.extraPopupElement)==null?void 0:s.popup)||o.popup)==null||r.renderCommentButton():o.extraPopupElement&&e.append(o.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),a(this,Vl))for(const o of a(this,Zn))a(this,Vl).addPointerInTextLayer(o.contentElement,!1)},hw=function(){var e;if(!a(this,Ul))return;const t=this.div;for(const[i,s]of a(this,Ul)){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,ta).get(i);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,Ul).clear()};let dw=yS;const fg=/\r\n?|\n/g;var ti,om,$l,ei,be,U_,H_,$_,Yg,Jr,Qg,Kg,W_,pw,G_;const Ut=class Ut extends zt{constructor(e){super({...e,name:"freeTextEditor"});S(this,be);S(this,ti,"");S(this,om,`${this.id}-editor`);S(this,$l,null);S(this,ei);L(this,"_colorPicker",null);this.color=e.color||Ut._defaultColor||zt._defaultLineColor,v(this,ei,e.fontSize||Ut._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Ut.prototype,i=o=>o.isEmpty(),s=xc.TRANSLATE_SMALL,r=xc.TRANSLATE_BIG;return it(this,"_keyboardManager",new jm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){zt.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case ht.FREETEXT_SIZE:Ut._defaultFontSize=i;break;case ht.FREETEXT_COLOR:Ut._defaultColor=i;break}}updateParams(e,i){switch(e){case ht.FREETEXT_SIZE:C(this,be,U_).call(this,i);break;case ht.FREETEXT_COLOR:C(this,be,H_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ht.FREETEXT_SIZE,Ut._defaultFontSize],[ht.FREETEXT_COLOR,Ut._defaultColor||zt._defaultLineColor]]}get propertiesToUpdate(){return[[ht.FREETEXT_SIZE,a(this,ei)],[ht.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Q0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ht.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ut._internalPadding*e,-(Ut._internalPadding+a(this,ei))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,$l,new AbortController);const e=this._uiManager.combinedSignal(a(this,$l));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,om)),this._isDraggable=!0,(e=a(this,$l))==null||e.abort(),v(this,$l,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,ti),i=v(this,ti,C(this,be,$_).call(this).trimEnd());if(e===i)return;const s=r=>{if(v(this,ti,r),!r){this.remove();return}C(this,be,Kg).call(this),this._uiManager.rebuild(this),C(this,be,Yg).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),C(this,be,Yg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ut._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,om)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,ei)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let x,y;switch(this.rotation){case 0:x=e+(l[0]-f)/d,y=i+this.height-(l[1]-p)/h;break;case 90:x=e+(l[0]-f)/d,y=i-(l[1]-p)/h,[c,u]=[u,-c];break;case 180:x=e-this.width+(l[0]-f)/d,y=i-(l[1]-p)/h,[c,u]=[-c,-u];break;case 270:x=e+(l[0]-f-this.height*h)/d,y=i+(l[1]-p-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(x*r,y*o,c,u)}else this._moveAfterPaste(e,i);C(this,be,Kg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var x,y,A;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=C(x=Ut,Jr,pw).call(x,i.getData("text")||"").replaceAll(fg,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(fg,"")),g!==this.editorDiv){let w=d;for(const b of this.editorDiv.childNodes){if(b===g){w=h;continue}w.push(C(y=Ut,Jr,Qg).call(y,b))}}d.push(c.nodeValue.slice(0,u).replaceAll(fg,""))}else if(c===this.editorDiv){let g=d,w=0;for(const b of this.editorDiv.childNodes)w++===u&&(g=h),g.push(C(A=Ut,Jr,Qg).call(A,b))}v(this,ti,`${d.join(`
`)}${r}${h.join(`
`)}`),C(this,be,Kg).call(this);const f=new Range;let p=Math.sumPrecise(d.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const w=g.nodeValue.length;if(p<=w){f.setStart(g,p),f.setEnd(g,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ut._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,i,s){var l;let r=null;if(e instanceof O_){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:p,richText:x,contentsObj:y,creationDate:A,modificationDate:g},textContent:w,textPosition:b,parent:{page:{pageNumber:E}}}=e;if(!w||w.length===0)return null;r=e={annotationType:rt.FREETEXT,color:Array.from(u),fontSize:c,value:w.join(`
`),position:b,pageIndex:E-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(y==null?void 0:y.str)||null,richText:x,creationDate:A,modificationDate:g}}const o=await super.deserialize(e,i,s);return v(o,ei,e.fontSize),o.color=H.makeHexColor(...e.color),v(o,ti,C(l=Ut,Jr,pw).call(l,e.value)),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=zt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:i,fontSize:a(this,ei),value:C(this,be,W_).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!C(this,be,G_).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${a(this,ei)}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of a(this,ti).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,ti)}}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ti=new WeakMap,om=new WeakMap,$l=new WeakMap,ei=new WeakMap,be=new WeakSet,U_=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,ei))*this.parentScale),v(this,ei,r),C(this,be,Yg).call(this)},s=a(this,ei);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ht.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},H_=function(e){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ht.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$_=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(C(s=Ut,Jr,Qg).call(s,r)),i=r);return e.join(`
`)},Yg=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},Jr=new WeakSet,Qg=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(fg,"")},Kg=function(){if(this.editorDiv.replaceChildren(),!!a(this,ti))for(const e of a(this,ti).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},W_=function(){return a(this,ti).replaceAll(""," ")},pw=function(e){return e.replaceAll(" ","")},G_=function(e){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},S(Ut,Jr),L(Ut,"_freeTextDefaultContent",""),L(Ut,"_internalPadding",0),L(Ut,"_defaultColor",null),L(Ut,"_defaultFontSize",10),L(Ut,"_type","freetext"),L(Ut,"_editorType",rt.FREETEXT);let fw=Ut;class W{toSVGPath(){bt("Abstract method `toSVGPath` must be implemented.")}get box(){bt("Abstract getter `box` must be implemented.")}serialize(t,e){bt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*s,o[l+1]=i+t[l+1]*r;return o}static _rescaleAndSwap(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*s,o[l+1]=i+t[l]*r;return o}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=i+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,r){switch(r){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,r,o){return[(t+5*i)/6,(e+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}L(W,"PRECISION",1e-4);var ni,os,vd,xd,zs,ct,Wl,Gl,am,lm,bd,wd,ea,cm,my,gy,ke,Fh,q_,X_,Y_,Q_,K_,J_;const rr=class rr{constructor({x:t,y:e},i,s,r,o,l=0){S(this,ke);S(this,ni);S(this,os,[]);S(this,vd);S(this,xd);S(this,zs,[]);S(this,ct,new Float32Array(18));S(this,Wl);S(this,Gl);S(this,am);S(this,lm);S(this,bd);S(this,wd);S(this,ea,[]);v(this,ni,i),v(this,wd,r*s),v(this,xd,o),a(this,ct).set([NaN,NaN,NaN,NaN,t,e],6),v(this,vd,l),v(this,lm,a(rr,cm)*s),v(this,am,a(rr,gy)*s),v(this,bd,s),a(this,ea).push(t,e)}isEmpty(){return isNaN(a(this,ct)[8])}add({x:t,y:e}){var D;v(this,Wl,t),v(this,Gl,e);const[i,s,r,o]=a(this,ni);let[l,c,u,d]=a(this,ct).subarray(8,12);const h=t-u,f=e-d,p=Math.hypot(h,f);if(p<a(this,am))return!1;const x=p-a(this,lm),y=x/p,A=y*h,g=y*f;let w=l,b=c;l=u,c=d,u+=A,d+=g,(D=a(this,ea))==null||D.push(t,e);const E=-g/x,T=A/x,P=E*a(this,wd),k=T*a(this,wd);return a(this,ct).set(a(this,ct).subarray(2,8),0),a(this,ct).set([u+P,d+k],4),a(this,ct).set(a(this,ct).subarray(14,18),12),a(this,ct).set([u-P,d-k],16),isNaN(a(this,ct)[6])?(a(this,zs).length===0&&(a(this,ct).set([l+P,c+k],2),a(this,zs).push(NaN,NaN,NaN,NaN,(l+P-i)/r,(c+k-s)/o),a(this,ct).set([l-P,c-k],14),a(this,os).push(NaN,NaN,NaN,NaN,(l-P-i)/r,(c-k-s)/o)),a(this,ct).set([w,b,l,c,u,d],6),!this.isEmpty()):(a(this,ct).set([w,b,l,c,u,d],6),Math.abs(Math.atan2(b-c,w-l)-Math.atan2(g,A))<Math.PI/2?([l,c,u,d]=a(this,ct).subarray(2,6),a(this,zs).push(NaN,NaN,NaN,NaN,((l+u)/2-i)/r,((c+d)/2-s)/o),[l,c,w,b]=a(this,ct).subarray(14,18),a(this,os).push(NaN,NaN,NaN,NaN,((w+l)/2-i)/r,((b+c)/2-s)/o),!0):([w,b,l,c,u,d]=a(this,ct).subarray(0,6),a(this,zs).push(((w+5*l)/6-i)/r,((b+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+d)/6-s)/o,((l+u)/2-i)/r,((c+d)/2-s)/o),[u,d,l,c,w,b]=a(this,ct).subarray(12,18),a(this,os).push(((w+5*l)/6-i)/r,((b+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+d)/6-s)/o,((l+u)/2-i)/r,((c+d)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,zs),e=a(this,os);if(isNaN(a(this,ct)[6])&&!this.isEmpty())return C(this,ke,q_).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);C(this,ke,Y_).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return C(this,ke,X_).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,r,o){return new Z_(t,e,i,s,r,o)}getOutlines(){var h;const t=a(this,zs),e=a(this,os),i=a(this,ct),[s,r,o,l]=a(this,ni),c=new Float32Array((((h=a(this,ea))==null?void 0:h.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,ea)[f]-s)/o,c[f+1]=(a(this,ea)[f+1]-r)/l;if(c[c.length-2]=(a(this,Wl)-s)/o,c[c.length-1]=(a(this,Gl)-r)/l,isNaN(i[6])&&!this.isEmpty())return C(this,ke,Q_).call(this,c);const u=new Float32Array(a(this,zs).length+24+a(this,os).length);let d=t.length;for(let f=0;f<d;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}d=C(this,ke,J_).call(this,u,d);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=e[f+p],u[d+1]=e[f+p+1],d+=2}return C(this,ke,K_).call(this,u,d),this.newFreeDrawOutline(u,c,a(this,ni),a(this,bd),a(this,vd),a(this,xd))}};ni=new WeakMap,os=new WeakMap,vd=new WeakMap,xd=new WeakMap,zs=new WeakMap,ct=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,am=new WeakMap,lm=new WeakMap,bd=new WeakMap,wd=new WeakMap,ea=new WeakMap,cm=new WeakMap,my=new WeakMap,gy=new WeakMap,ke=new WeakSet,Fh=function(){const t=a(this,ct).subarray(4,6),e=a(this,ct).subarray(16,18),[i,s,r,o]=a(this,ni);return[(a(this,Wl)+(t[0]-e[0])/2-i)/r,(a(this,Gl)+(t[1]-e[1])/2-s)/o,(a(this,Wl)+(e[0]-t[0])/2-i)/r,(a(this,Gl)+(e[1]-t[1])/2-s)/o]},q_=function(){const[t,e,i,s]=a(this,ni),[r,o,l,c]=C(this,ke,Fh).call(this);return`M${(a(this,ct)[2]-t)/i} ${(a(this,ct)[3]-e)/s} L${(a(this,ct)[4]-t)/i} ${(a(this,ct)[5]-e)/s} L${r} ${o} L${l} ${c} L${(a(this,ct)[16]-t)/i} ${(a(this,ct)[17]-e)/s} L${(a(this,ct)[14]-t)/i} ${(a(this,ct)[15]-e)/s} Z`},X_=function(t){const e=a(this,os);t.push(`L${e[4]} ${e[5]} Z`)},Y_=function(t){const[e,i,s,r]=a(this,ni),o=a(this,ct).subarray(4,6),l=a(this,ct).subarray(16,18),[c,u,d,h]=C(this,ke,Fh).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-i)/r} L${c} ${u} L${d} ${h} L${(l[0]-e)/s} ${(l[1]-i)/r}`)},Q_=function(t){const e=a(this,ct),[i,s,r,o]=a(this,ni),[l,c,u,d]=C(this,ke,Fh).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(h,t,a(this,ni),a(this,bd),a(this,vd),a(this,xd))},K_=function(t,e){const i=a(this,os);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},J_=function(t,e){const i=a(this,ct).subarray(4,6),s=a(this,ct).subarray(16,18),[r,o,l,c]=a(this,ni),[u,d,h,f]=C(this,ke,Fh).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],e),e+=24},S(rr,cm,8),S(rr,my,2),S(rr,gy,a(rr,cm)+a(rr,my));let J0=rr;var Sd,ql,jr,um,ii,dm,he,yy,tD;class Z_ extends W{constructor(e,i,s,r,o,l){super();S(this,yy);S(this,Sd);S(this,ql,new Float32Array(4));S(this,jr);S(this,um);S(this,ii);S(this,dm);S(this,he);v(this,he,e),v(this,ii,i),v(this,Sd,s),v(this,dm,r),v(this,jr,o),v(this,um,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,yy,tD).call(this,l);const[c,u,d,h]=a(this,ql);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/d,e[f+1]=(e[f+1]-u)/h;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/d,i[f+1]=(i[f+1]-u)/h}toSVGPath(){const e=[`M${a(this,he)[4]} ${a(this,he)[5]}`];for(let i=6,s=a(this,he).length;i<s;i+=6){if(isNaN(a(this,he)[i])){e.push(`L${a(this,he)[i+4]} ${a(this,he)[i+5]}`);continue}e.push(`C${a(this,he)[i]} ${a(this,he)[i+1]} ${a(this,he)[i+2]} ${a(this,he)[i+3]} ${a(this,he)[i+4]} ${a(this,he)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],o){const l=s-e,c=r-i;let u,d;switch(o){case 0:u=W._rescale(a(this,he),e,r,l,-c),d=W._rescale(a(this,ii),e,r,l,-c);break;case 90:u=W._rescaleAndSwap(a(this,he),e,i,l,c),d=W._rescaleAndSwap(a(this,ii),e,i,l,c);break;case 180:u=W._rescale(a(this,he),s,i,-l,c),d=W._rescale(a(this,ii),s,i,-l,c);break;case 270:u=W._rescaleAndSwap(a(this,he),s,r,-l,-c),d=W._rescaleAndSwap(a(this,ii),s,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return a(this,ql)}newOutliner(e,i,s,r,o,l=0){return new J0(e,i,s,r,o,l)}getNewOutline(e,i){const[s,r,o,l]=a(this,ql),[c,u,d,h]=a(this,Sd),f=o*d,p=l*h,x=s*d+c,y=r*h+u,A=this.newOutliner({x:a(this,ii)[0]*f+x,y:a(this,ii)[1]*p+y},a(this,Sd),a(this,dm),e,a(this,um),i??a(this,jr));for(let g=2;g<a(this,ii).length;g+=2)A.add({x:a(this,ii)[g]*f+x,y:a(this,ii)[g+1]*p+y});return A.getOutlines()}}Sd=new WeakMap,ql=new WeakMap,jr=new WeakMap,um=new WeakMap,ii=new WeakMap,dm=new WeakMap,he=new WeakMap,yy=new WeakSet,tD=function(e){const i=a(this,he);let s=i[4],r=i[5];const o=[s,r,s,r];let l=s,c=r,u=s,d=r;const h=e?Math.max:Math.min,f=new Float32Array(4);for(let x=6,y=i.length;x<y;x+=6){const A=i[x+4],g=i[x+5];isNaN(i[x])?(H.pointBoundingBox(A,g,o),c>g?(l=A,c=g):c===g&&(l=h(l,A)),d<g?(u=A,d=g):d===g&&(u=h(u,A))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,H.bezierBoundingBox(s,r,...i.slice(x,x+6),f),H.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=h(l,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),s=A,r=g}const p=a(this,ql);p[0]=o[0]-a(this,jr),p[1]=o[1]-a(this,jr),p[2]=o[2]-o[0]+2*a(this,jr),p[3]=o[3]-o[1]+2*a(this,jr),this.firstPoint=[l,c],this.lastPoint=[u,d]};var hm,fm,pm,na,as,Sn,eD,Jg,nD,iD,gw;class mw{constructor(t,e=0,i=0,s=!0){S(this,Sn);S(this,hm);S(this,fm);S(this,pm);S(this,na,[]);S(this,as,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:y,y:A,width:g,height:w}of t){const b=Math.floor((y-e)/o)*o,E=Math.ceil((y+g+e)/o)*o,T=Math.floor((A-e)/o)*o,P=Math.ceil((A+w+e)/o)*o,k=[b,T,P,!0],_=[E,T,P,!1];a(this,na).push(k,_),H.rectBoundingBox(b,T,E,P,r)}const l=r[2]-r[0]+2*i,c=r[3]-r[1]+2*i,u=r[0]-i,d=r[1]-i;let h=s?-1/0:1/0,f=1/0;const p=a(this,na).at(s?-1:-2),x=[p[0],p[2]];for(const y of a(this,na)){const[A,g,w,b]=y;!b&&s?g<f?(f=g,h=A):g===f&&(h=Math.max(h,A)):b&&!s&&(g<f?(f=g,h=A):g===f&&(h=Math.min(h,A))),y[0]=(A-u)/l,y[1]=(g-d)/c,y[2]=(w-d)/c}v(this,hm,new Float32Array([u,d,l,c])),v(this,fm,[h,f]),v(this,pm,x)}getOutlines(){a(this,na).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,na))e[3]?(t.push(...C(this,Sn,gw).call(this,e)),C(this,Sn,nD).call(this,e)):(C(this,Sn,iD).call(this,e),t.push(...C(this,Sn,gw).call(this,e)));return C(this,Sn,eD).call(this,t)}}hm=new WeakMap,fm=new WeakMap,pm=new WeakMap,na=new WeakMap,as=new WeakMap,Sn=new WeakSet,eD=function(t){const e=[],i=new Set;for(const o of t){const[l,c,u]=o;e.push([l,c,o],[l,u,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[l,c,u,d,h]=o;i.delete(o);let f=l,p=c;for(r=[l,u],s.push(r);;){let x;if(i.has(d))x=d;else if(i.has(h))x=h;else break;i.delete(x),[l,c,u,d,h]=x,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new d5(s,a(this,hm),a(this,fm),a(this,pm))},Jg=function(t){const e=a(this,as);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1},nD=function([,t,e]){const i=C(this,Sn,Jg).call(this,t);a(this,as).splice(i,0,[t,e])},iD=function([,t,e]){const i=C(this,Sn,Jg).call(this,t);for(let s=i;s<a(this,as).length;s++){const[r,o]=a(this,as)[s];if(r!==t)break;if(r===t&&o===e){a(this,as).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=a(this,as)[s];if(r!==t)break;if(r===t&&o===e){a(this,as).splice(s,1);return}}},gw=function(t){const[e,i,s]=t,r=[[e,i,s]],o=C(this,Sn,Jg).call(this,s);for(let l=0;l<o;l++){const[c,u]=a(this,as)[l];for(let d=0,h=r.length;d<h;d++){const[,f,p]=r[d];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[d][1]=u;else{if(h===1)return[];r.splice(d,1),d--,h--}continue}r[d][2]=c,p>u&&r.push([e,u,p])}}}return r};var mm,Ad;class d5 extends W{constructor(e,i,s,r){super();S(this,mm);S(this,Ad);v(this,Ad,e),v(this,mm,i),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const e=[];for(const i of a(this,Ad)){let[s,r]=i;e.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],c=i[o+1];l===s?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],o){const l=[],c=s-e,u=r-i;for(const d of a(this,Ad)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=e+d[f]*c,h[f+1]=r-d[f+1]*u;l.push(h)}return l}get box(){return a(this,mm)}get classNamesForOutlining(){return["highlightOutline"]}}mm=new WeakMap,Ad=new WeakMap;class yw extends J0{newFreeDrawOutline(t,e,i,s,r,o){return new h5(t,e,i,s,r,o)}}class h5 extends Z_{newOutliner(t,e,i,s,r,o=0){return new yw(t,e,i,s,r,o)}}var Cd,gm,Fr,Xl,ym,Ln,vm,xm,Yl,si,ri,He,Ed,Td,an,kd,Fi,bm,at,vw,Zg,sD,rD,oD,xw,Ha,Vi,jc,aD,t0,e0,lD,cD,uD,dD,hD;const vt=class vt extends zt{constructor(e){super({...e,name:"highlightEditor"});S(this,at);S(this,Cd,null);S(this,gm,0);S(this,Fr);S(this,Xl,null);S(this,ym,null);S(this,Ln,null);S(this,vm,null);S(this,xm,0);S(this,Yl,null);S(this,si,null);S(this,ri,null);S(this,He,!1);S(this,Ed,null);S(this,Td,null);S(this,an,null);S(this,kd,"");S(this,Fi);S(this,bm,"");this.color=e.color||vt._defaultColor,v(this,Fi,e.thickness||vt._defaultThickness),this.opacity=e.opacity||vt._defaultOpacity,v(this,Fr,e.boxes||null),v(this,bm,e.methodOfCreation||""),v(this,kd,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(v(this,He,!0),C(this,at,Zg).call(this,e),C(this,at,Ha).call(this)):a(this,Fr)&&(v(this,Cd,e.anchorNode),v(this,gm,e.anchorOffset),v(this,vm,e.focusNode),v(this,xm,e.focusOffset),C(this,at,vw).call(this),C(this,at,Ha).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=vt.prototype;return it(this,"_keyboardManager",new jm([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,He)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Fi),methodOfCreation:a(this,bm)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;zt.initialize(e,i),vt._defaultColor||(vt._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case ht.HIGHLIGHT_COLOR:vt._defaultColor=i;break;case ht.HIGHLIGHT_THICKNESS:vt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,Td)}get commentButtonPosition(){return a(this,Ed)}updateParams(e,i){switch(e){case ht.HIGHLIGHT_COLOR:C(this,at,sD).call(this,i);break;case ht.HIGHLIGHT_THICKNESS:C(this,at,rD).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ht.HIGHLIGHT_COLOR,vt._defaultColor],[ht.HIGHLIGHT_THICKNESS,vt._defaultThickness]]}get propertiesToUpdate(){return[[ht.HIGHLIGHT_COLOR,this.color||vt._defaultColor],[ht.HIGHLIGHT_THICKNESS,a(this,Fi)||vt._defaultThickness],[ht.HIGHLIGHT_FREE,a(this,He)]]}onUpdatedColor(){var e,i;(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ri),{root:{fill:this.color,"fill-opacity":this.opacity}}),(i=a(this,ym))==null||i.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",v(this,ym,new Y0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,at,e0).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,C(this,at,e0).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){C(this,at,xw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,at,Ha).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?C(this,at,xw).call(this):e&&(C(this,at,Ha).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,o,l;const{drawLayer:i}=this.parent;let s;a(this,He)?(e=(e-this.rotation+360)%360,s=C(r=vt,Vi,jc).call(r,a(this,si).box,e)):s=C(o=vt,Vi,jc).call(o,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,ri),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(a(this,an),{bbox:C(l=vt,Vi,jc).call(l,a(this,Ln).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,kd)&&(e.setAttribute("aria-label",a(this,kd)),e.setAttribute("role","mark")),a(this,He)?e.classList.add("free"):this.div.addEventListener("keydown",C(this,at,aD).bind(this),{signal:this._uiManager._signal});const i=v(this,Yl,document.createElement("div"));return e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,Xl),this.setDims(),v2(this,a(this,Yl),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,at,t0).call(this,!0);break;case 1:case 3:C(this,at,t0).call(this,!1);break}}select(){var e;super.select(),a(this,an)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,an)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,an),{rootClass:{selected:!1}}),a(this,He)||C(this,at,t0).call(this,!1))}get _mustFixPosition(){return!a(this,He)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,ri),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,an),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:r,y:o}){const{x:l,y:c,width:u,height:d}=s.getBoundingClientRect(),h=new AbortController,f=e.combinedSignal(h),p=x=>{h.abort(),C(this,Vi,dD).call(this,e,x)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",ce,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",qi,{signal:f}),s.addEventListener("pointermove",C(this,Vi,uD).bind(this,e),{signal:f}),this._freeHighlight=new yw({x:r,y:o},[l,c,u,d],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var y,A,g,w;let r=null;if(e instanceof z_){const{data:{quadPoints:b,rect:E,rotation:T,id:P,color:k,opacity:_,popupRef:D,richText:M,contentsObj:R,creationDate:V,modificationDate:G},parent:{page:{pageNumber:I}}}=e;r=e={annotationType:rt.HIGHLIGHT,color:Array.from(k),opacity:_,quadPoints:b,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:D,richText:M,comment:(R==null?void 0:R.str)||null,creationDate:V,modificationDate:G}}else if(e instanceof cS){const{data:{inkLists:b,rect:E,rotation:T,id:P,color:k,borderStyle:{rawWidth:_},popupRef:D,richText:M,contentsObj:R,creationDate:V,modificationDate:G},parent:{page:{pageNumber:I}}}=e;r=e={annotationType:rt.HIGHLIGHT,color:Array.from(k),thickness:_,inkLists:b,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:D,richText:M,comment:(R==null?void 0:R.str)||null,creationDate:V,modificationDate:G}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,d=await super.deserialize(e,i,s);d.color=H.makeHexColor(...o),d.opacity=u||1,c&&v(d,Fi,e.thickness),d._initialData=r,e.comment&&d.setCommentData(e);const[h,f]=d.pageDimensions,[p,x]=d.pageTranslation;if(l){const b=v(d,Fr,[]);for(let E=0;E<l.length;E+=8)b.push({x:(l[E]-p)/h,y:1-(l[E+1]-x)/f,width:(l[E+2]-l[E])/h,height:(l[E+1]-l[E+5])/f});C(y=d,at,vw).call(y),C(A=d,at,Ha).call(A),d.rotate(d.rotation)}else if(c){v(d,He,!0);const b=c[0],E={x:b[0]-p,y:f-(b[1]-x)},T=new yw(E,[0,0,h,f],1,a(d,Fi)/2,!0,.001);for(let _=0,D=b.length;_<D;_+=2)E.x=b[_]-p,E.y=f-(b[_+1]-x),T.add(E);const{id:P,clipPathId:k}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);C(g=d,at,Zg).call(g,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:k}),C(w=d,at,Ha).call(w),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=zt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:i,opacity:this.opacity,thickness:a(this,Fi),quadPoints:C(this,at,lD).call(this),outlines:C(this,at,cD).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!C(this,at,hD).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Cd=new WeakMap,gm=new WeakMap,Fr=new WeakMap,Xl=new WeakMap,ym=new WeakMap,Ln=new WeakMap,vm=new WeakMap,xm=new WeakMap,Yl=new WeakMap,si=new WeakMap,ri=new WeakMap,He=new WeakMap,Ed=new WeakMap,Td=new WeakMap,an=new WeakMap,kd=new WeakMap,Fi=new WeakMap,bm=new WeakMap,at=new WeakSet,vw=function(){const e=new mw(a(this,Fr),.001);v(this,si,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,si).box;const i=new mw(a(this,Fr),.0025,.001,this._uiManager.direction==="ltr");v(this,Ln,i.getOutlines());const{firstPoint:s}=a(this,si);v(this,Ed,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=a(this,Ln);v(this,Td,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Zg=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var f,p;if(v(this,si,e),v(this,Ln,e.getNewOutline(a(this,Fi)/2+1.5,.0025)),i>=0)v(this,ri,i),v(this,Xl,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),v(this,an,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Ln).box,path:{d:a(this,Ln).toSVGPath()}},!0));else if(this.parent){const x=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,ri),{bbox:C(f=vt,Vi,jc).call(f,a(this,si).box,(x-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,an),{bbox:C(p=vt,Vi,jc).call(p,a(this,Ln).box,x),path:{d:a(this,Ln).toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[x,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/x,this.height=u*x/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[x,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/x,this.height=u*x/y;break}}const{firstPoint:d}=e;v(this,Ed,[(d[0]-o)/c,(d[1]-l)/u]);const{lastPoint:h}=a(this,Ln);v(this,Td,[(h[0]-o)/c,(h[1]-l)/u])},sD=function(e){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,e,vt._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ht.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},rD=function(e){const i=a(this,Fi),s=r=>{v(this,Fi,r),C(this,at,oD).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ht.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},oD=function(e){a(this,He)&&(C(this,at,Zg).call(this,{highlightOutlines:a(this,si).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},xw=function(){a(this,ri)===null||!this.parent||(this.parent.drawLayer.remove(a(this,ri)),v(this,ri,null),this.parent.drawLayer.remove(a(this,an)),v(this,an,null))},Ha=function(e=this.parent){a(this,ri)===null&&({id:we(this,ri)._,clipPathId:we(this,Xl)._}=e.drawLayer.draw({bbox:a(this,si).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,He)},path:{d:a(this,si).toSVGPath()}},!1,!0),v(this,an,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,He)},bbox:a(this,Ln).box,path:{d:a(this,Ln).toSVGPath()}},a(this,He))),a(this,Yl)&&(a(this,Yl).style.clipPath=a(this,Xl)))},Vi=new WeakSet,jc=function([e,i,s,r],o){switch(o){case 90:return[1-i-r,e,r,s];case 180:return[1-e-s,1-i-r,s,r];case 270:return[i,1-e-s,r,s]}return[e,i,s,r]},aD=function(e){vt._keyboardManager.exec(this,e)},t0=function(e){if(!a(this,Cd))return;const i=window.getSelection();e?i.setPosition(a(this,Cd),a(this,gm)):i.setPosition(a(this,vm),a(this,xm))},e0=function(){return a(this,He)?this.rotation:0},lD=function(){if(a(this,He))return null;const[e,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,Fr),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const p=u*e+s,x=(1-d)*i+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=p+h*e,l[c+5]=l[c+7]=x-f*i,c+=8}return l},cD=function(e){return a(this,si).serialize(e,C(this,at,e0).call(this))},uD=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},dD=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hD=function(e){const{color:i}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==i[r])},S(vt,Vi),L(vt,"_defaultColor",null),L(vt,"_defaultOpacity",1),L(vt,"_defaultThickness",12),L(vt,"_type","highlight"),L(vt,"_editorType",rt.HIGHLIGHT),L(vt,"_freeHighlightId",-1),L(vt,"_freeHighlight",null),L(vt,"_freeHighlightClipId","");let Z0=vt;var Ql;class fD{constructor(){S(this,Ql,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,Ql)[t]=e}toSVGProperties(){const t=a(this,Ql);return v(this,Ql,Object.create(null)),{root:t}}reset(){v(this,Ql,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){bt("Not implemented")}}Ql=new WeakMap;var oi,Pd,Ne,Kl,Jl,gt,bw,ww,Sw,Oh,pD,n0,Bh,Fc;const dt=class dt extends zt{constructor(e){super(e);S(this,gt);S(this,oi,null);S(this,Pd);L(this,"_colorPicker",null);L(this,"_drawId",null);v(this,Pd,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(C(this,gt,bw).call(this,e),C(this,gt,Oh).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){bt("Not implemented")}static get typesMap(){bt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(a(dt,Ne).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,i[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,i[r]]);return e}_updateProperty(e,i,s){const r=this._drawingOptions,o=r[i],l=c=>{var d;r.updateProperty(i,c);const u=a(this,oi).updateProperty(i,c);u&&C(this,gt,Bh).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(a(this,oi).getPathResizingSVGProperties(C(this,gt,n0).call(this)),{bbox:C(this,gt,Fc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(a(this,oi).getPathResizedSVGProperties(C(this,gt,n0).call(this)),{bbox:C(this,gt,Fc).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:C(this,gt,Fc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(a(this,oi).getPathTranslatedSVGProperties(C(this,gt,n0).call(this),this.parentDimensions),{bbox:C(this,gt,Fc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Pd)&&(v(this,Pd,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){C(this,gt,Sw).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,gt,Oh).call(this),C(this,gt,Bh).call(this,a(this,oi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),C(this,gt,Sw).call(this)):e&&(this._uiManager.addShouldRescale(this),C(this,gt,Oh).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties({bbox:C(this,gt,Fc).call(this)},a(this,oi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,gt,Bh).call(this,a(this,oi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),s}static createDrawerInstance(e,i,s,r,o){bt("Not implemented")}static startDrawing(e,i,s,r){var A;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:d}=r;if(en.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=e,{width:f,height:p}=o.getBoundingClientRect(),x=v(dt,Kl,new AbortController),y=e.combinedSignal(x);if(en.setPointer(d,u),window.addEventListener("pointerup",g=>{en.isSamePointerIdOrRemove(g.pointerId)&&this._endDraw(g)},{signal:y}),window.addEventListener("pointercancel",g=>{en.isSamePointerIdOrRemove(g.pointerId)&&this._currentParent.endDrawingSession()},{signal:y}),window.addEventListener("pointerdown",g=>{en.isSamePointerType(g.pointerType)&&(en.initializeAndAddPointerId(g.pointerId),a(dt,Ne).isCancellable()&&(a(dt,Ne).removeLastElement(),a(dt,Ne).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",qi,{signal:y}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),o.addEventListener("touchmove",g=>{en.isSameTimeStamp(g.timeStamp)&&ce(g)},{signal:y}),e.toggleDrawing(),(A=i._editorUndoBar)==null||A.hide(),a(dt,Ne)){e.drawLayer.updateProperties(this._currentDrawId,a(dt,Ne).startNew(l,c,f,p,h));return}i.updateUIForDefaultProperties(this),v(dt,Ne,this.createDrawerInstance(l,c,f,p,h)),v(dt,Jl,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(dt,Jl).toSVGProperties(),a(dt,Ne).defaultSVGProperties),!0,!1)}static _drawMove(e){if(en.isSameTimeStamp(e.timeStamp),!a(dt,Ne))return;const{offsetX:i,offsetY:s,pointerId:r}=e;if(en.isSamePointerId(r)){if(en.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(dt,Ne).add(i,s)),en.setTimeStamp(e.timeStamp),ce(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,v(dt,Ne,null),v(dt,Jl,null),en.clearTimeStamp()),a(dt,Kl)&&(a(dt,Kl).abort(),v(dt,Kl,null),en.clearPointerIds())}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,a(dt,Ne).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=a(dt,Ne),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:ht.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(ht.DRAW_STEP),!a(dt,Ne).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(dt,Ne).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(dt,Jl),mustBeCommitted:!e});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,r,o,l){bt("Not implemented")}static async deserialize(e,i,s){var h,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=i.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),d=await super.deserialize(e,i,s);return d.createDrawingOptions(e),C(h=d,gt,bw).call(h,{drawOutlines:u}),C(f=d,gt,Oh).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,oi).serialize([i,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};oi=new WeakMap,Pd=new WeakMap,Ne=new WeakMap,Kl=new WeakMap,Jl=new WeakMap,gt=new WeakSet,bw=function({drawOutlines:e,drawId:i,drawingOptions:s}){v(this,oi,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=C(this,gt,ww).call(this,e,this.parent),C(this,gt,Bh).call(this,e.box)},ww=function(e,i){const{id:s}=i.drawLayer.draw(dt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},Sw=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Oh=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,gt,ww).call(this,a(this,oi),e)}},pD=function([e,i,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[i,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-i,s,r];case 270:return[1-i,e,s*(l/o),r*(o/l)];default:return[e,i,s,r]}},n0=function(){const{x:e,y:i,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-i,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-i,s,r];case 270:return[i,1-e,s*(o/l),r*(l/o)];default:return[e,i,s,r]}},Bh=function(e){[this.x,this.y,this.width,this.height]=C(this,gt,pD).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Fc=function(){const{x:e,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-i-r,e,r,s];case 2:return[1-e-s,1-i-r,s,r];case 3:return[i,1-e-s,r,s];case 4:return[e,i-s*(c/u),r*(u/c),s*(c/u)];case 5:return[1-i,e,s*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-i,r*(u/c),s*(c/u)];case 7:return[i-s*(c/u),1-e-r*(u/c),s*(c/u),r*(u/c)];case 8:return[e-s,i-r,s,r];case 9:return[1-i,e-s,r,s];case 10:return[1-e,1-i,s,r];case 11:return[i-r,1-e,r,s];case 12:return[e-r*(u/c),i,r*(u/c),s*(c/u)];case 13:return[1-i-s*(c/u),e-r*(u/c),s*(c/u),r*(u/c)];case 14:return[1-e,1-i-s*(c/u),r*(u/c),s*(c/u)];case 15:return[i,1-e,s*(c/u),r*(u/c)];default:return[e,i,s,r]}},L(dt,"_currentDrawId",-1),L(dt,"_currentParent",null),S(dt,Ne,null),S(dt,Kl,null),S(dt,Jl,null),L(dt,"_INNER_MARGIN",3);let ty=dt;var Vs,Le,Re,Zl,_d,pn,$e,Oi,tc,ec,nc,Dd,i0;class f5{constructor(t,e,i,s,r,o){S(this,Dd);S(this,Vs,new Float64Array(6));S(this,Le);S(this,Re);S(this,Zl);S(this,_d);S(this,pn);S(this,$e,"");S(this,Oi,0);S(this,tc,new Fm);S(this,ec);S(this,nc);v(this,ec,i),v(this,nc,s),v(this,Zl,r),v(this,_d,o),[t,e]=C(this,Dd,i0).call(this,t,e);const l=v(this,Le,[NaN,NaN,NaN,NaN,t,e]);v(this,pn,[t,e]),v(this,Re,[{line:l,points:a(this,pn)}]),a(this,Vs).set(l,0)}updateProperty(t,e){t==="stroke-width"&&v(this,_d,e)}isEmpty(){return!a(this,Re)||a(this,Re).length===0}isCancellable(){return a(this,pn).length<=10}add(t,e){[t,e]=C(this,Dd,i0).call(this,t,e);const[i,s,r,o]=a(this,Vs).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,ec)*l,a(this,nc)*c)<=2?null:(a(this,pn).push(t,e),isNaN(i)?(a(this,Vs).set([r,o,t,e],2),a(this,Le).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Vs)[0])&&a(this,Le).splice(6,6),a(this,Vs).set([i,s,r,o,t,e],0),a(this,Le).push(...W.createBezierPoints(i,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,pn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,r){v(this,ec,i),v(this,nc,s),v(this,Zl,r),[t,e]=C(this,Dd,i0).call(this,t,e);const o=v(this,Le,[NaN,NaN,NaN,NaN,t,e]);v(this,pn,[t,e]);const l=a(this,Re).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,Re).push({line:o,points:a(this,pn)}),a(this,Vs).set(o,0),v(this,Oi,0),this.toSVGPath(),null}getLastElement(){return a(this,Re).at(-1)}setLastElement(t){return a(this,Re)?(a(this,Re).push(t),v(this,Le,t.line),v(this,pn,t.points),v(this,Oi,0),{path:{d:this.toSVGPath()}}):a(this,tc).setLastElement(t)}removeLastElement(){if(!a(this,Re))return a(this,tc).removeLastElement();a(this,Re).pop(),v(this,$e,"");for(let t=0,e=a(this,Re).length;t<e;t++){const{line:i,points:s}=a(this,Re)[t];v(this,Le,i),v(this,pn,s),v(this,Oi,0),this.toSVGPath()}return{path:{d:a(this,$e)}}}toSVGPath(){const t=W.svgRound(a(this,Le)[4]),e=W.svgRound(a(this,Le)[5]);if(a(this,pn).length===2)return v(this,$e,`${a(this,$e)} M ${t} ${e} Z`),a(this,$e);if(a(this,pn).length<=6){const s=a(this,$e).lastIndexOf("M");v(this,$e,`${a(this,$e).slice(0,s)} M ${t} ${e}`),v(this,Oi,6)}if(a(this,pn).length===4){const s=W.svgRound(a(this,Le)[10]),r=W.svgRound(a(this,Le)[11]);return v(this,$e,`${a(this,$e)} L ${s} ${r}`),v(this,Oi,12),a(this,$e)}const i=[];a(this,Oi)===0&&(i.push(`M ${t} ${e}`),v(this,Oi,6));for(let s=a(this,Oi),r=a(this,Le).length;s<r;s+=6){const[o,l,c,u,d,h]=a(this,Le).slice(s,s+6).map(W.svgRound);i.push(`C${o} ${l} ${c} ${u} ${d} ${h}`)}return v(this,$e,a(this,$e)+i.join(" ")),v(this,Oi,a(this,Le).length),a(this,$e)}getOutlines(t,e,i,s){const r=a(this,Re).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,tc).build(a(this,Re),t,e,i,a(this,Zl),a(this,_d),s),v(this,Vs,null),v(this,Le,null),v(this,Re,null),v(this,$e,null),a(this,tc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Vs=new WeakMap,Le=new WeakMap,Re=new WeakMap,Zl=new WeakMap,_d=new WeakMap,pn=new WeakMap,$e=new WeakMap,Oi=new WeakMap,tc=new WeakMap,ec=new WeakMap,nc=new WeakMap,Dd=new WeakSet,i0=function(t,e){return W._normalizePoint(t,e,a(this,ec),a(this,nc),a(this,Zl))};var mn,wm,Sm,ai,Us,Hs,Md,Nd,ic,Xe,nr,mD,gD,yD;class Fm extends W{constructor(){super(...arguments);S(this,Xe);S(this,mn);S(this,wm,0);S(this,Sm);S(this,ai);S(this,Us);S(this,Hs);S(this,Md);S(this,Nd);S(this,ic)}build(e,i,s,r,o,l,c){v(this,Us,i),v(this,Hs,s),v(this,Md,r),v(this,Nd,o),v(this,ic,l),v(this,Sm,c??0),v(this,ai,e),C(this,Xe,gD).call(this)}get thickness(){return a(this,ic)}setLastElement(e){return a(this,ai).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,ai).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,ai)){if(e.push(`M${W.svgRound(i[4])} ${W.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${W.svgRound(i[10])} ${W.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,c,u,d,h]=i.subarray(s,s+6).map(W.svgRound);e.push(`C${o} ${l} ${c} ${u} ${d} ${h}`)}}return e.join("")}serialize([e,i,s,r],o){const l=[],c=[],[u,d,h,f]=C(this,Xe,mD).call(this);let p,x,y,A,g,w,b,E,T;switch(a(this,Nd)){case 0:T=W._rescale,p=e,x=i+r,y=s,A=-r,g=e+u*s,w=i+(1-d-f)*r,b=e+(u+h)*s,E=i+(1-d)*r;break;case 90:T=W._rescaleAndSwap,p=e,x=i,y=s,A=r,g=e+d*s,w=i+u*r,b=e+(d+f)*s,E=i+(u+h)*r;break;case 180:T=W._rescale,p=e+s,x=i,y=-s,A=r,g=e+(1-u-h)*s,w=i+d*r,b=e+(1-u)*s,E=i+(d+f)*r;break;case 270:T=W._rescaleAndSwap,p=e+s,x=i+r,y=-s,A=-r,g=e+(1-d-f)*s,w=i+(1-u-h)*r,b=e+(1-d)*s,E=i+(1-u)*r;break}for(const{line:P,points:k}of a(this,ai))l.push(T(P,p,x,y,A,o?new Array(P.length):null)),c.push(T(k,p,x,y,A,o?new Array(k.length):null));return{lines:l,points:c,rect:[g,w,b,E]}}static deserialize(e,i,s,r,o,{paths:{lines:l,points:c},rotation:u,thickness:d}){const h=[];let f,p,x,y,A;switch(u){case 0:A=W._rescale,f=-e/s,p=i/r+1,x=1/s,y=-1/r;break;case 90:A=W._rescaleAndSwap,f=-i/r,p=-e/s,x=1/r,y=1/s;break;case 180:A=W._rescale,f=e/s+1,p=-i/r,x=-1/s,y=1/r;break;case 270:A=W._rescaleAndSwap,f=i/r+1,p=e/s+1,x=-1/r,y=-1/s;break}if(!l){l=[];for(const w of c){const b=w.length;if(b===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(b===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const E=new Float32Array(3*(b-2));l.push(E);let[T,P,k,_]=w.subarray(0,4);E.set([NaN,NaN,NaN,NaN,T,P],0);for(let D=4;D<b;D+=2){const M=w[D],R=w[D+1];E.set(W.createBezierPoints(T,P,k,_,M,R),(D-2)*3),[T,P,k,_]=[k,_,M,R]}}}for(let w=0,b=l.length;w<b;w++)h.push({line:A(l[w].map(E=>E??NaN),f,p,x,y),points:A(c[w].map(E=>E??NaN),f,p,x,y)});const g=new this.prototype.constructor;return g.build(h,s,r,1,u,d,o),g}get box(){return a(this,mn)}updateProperty(e,i){return e==="stroke-width"?C(this,Xe,yD).call(this,i):null}updateParentDimensions([e,i],s){const[r,o]=C(this,Xe,nr).call(this);v(this,Us,e),v(this,Hs,i),v(this,Md,s);const[l,c]=C(this,Xe,nr).call(this),u=l-r,d=c-o,h=a(this,mn);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(e){return v(this,wm,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,mn).map(W.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,mn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(e)} ${W.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,mn);let s=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,wm)){case 90:r=i/e,o=-e/i,c=e;break;case 180:s=-1,l=-1,c=e,u=i;break;case 270:r=-i/e,o=e/i,u=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${W.svgRound(c)} ${W.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,r]){const[o,l]=C(this,Xe,nr).call(this),[c,u,d,h]=a(this,mn);if(Math.abs(d-o)<=W.PRECISION||Math.abs(h-l)<=W.PRECISION){const A=e+s/2-(c+d/2),g=i+r/2-(u+h/2);return{path:{"transform-origin":`${W.svgRound(e)} ${W.svgRound(i)}`,transform:`${this.rotationTransform} translate(${A} ${g})`}}}const f=(s-2*o)/(d-2*o),p=(r-2*l)/(h-2*l),x=d/s,y=h/r;return{path:{"transform-origin":`${W.svgRound(c)} ${W.svgRound(u)}`,transform:`${this.rotationTransform} scale(${x} ${y}) translate(${W.svgRound(o)} ${W.svgRound(l)}) scale(${f} ${p}) translate(${W.svgRound(-o)} ${W.svgRound(-l)})`}}}getPathResizedSVGProperties([e,i,s,r]){const[o,l]=C(this,Xe,nr).call(this),c=a(this,mn),[u,d,h,f]=c;if(c[0]=e,c[1]=i,c[2]=s,c[3]=r,Math.abs(h-o)<=W.PRECISION||Math.abs(f-l)<=W.PRECISION){const g=e+s/2-(u+h/2),w=i+r/2-(d+f/2);for(const{line:b,points:E}of a(this,ai))W._translate(b,g,w,b),W._translate(E,g,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(e)} ${W.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(h-2*o),x=(r-2*l)/(f-2*l),y=-p*(u+o)+e+o,A=-x*(d+l)+i+l;if(p!==1||x!==1||y!==0||A!==0)for(const{line:g,points:w}of a(this,ai))W._rescale(g,y,A,p,x,g),W._rescale(w,y,A,p,x,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(e)} ${W.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[r,o]=s,l=a(this,mn),c=e-l[0],u=i-l[1];if(a(this,Us)===r&&a(this,Hs)===o)for(const{line:d,points:h}of a(this,ai))W._translate(d,c,u,d),W._translate(h,c,u,h);else{const d=a(this,Us)/r,h=a(this,Hs)/o;v(this,Us,r),v(this,Hs,o);for(const{line:f,points:p}of a(this,ai))W._rescale(f,c,u,d,h,f),W._rescale(p,c,u,d,h,p);l[2]*=d,l[3]*=h}return l[0]=e,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${W.svgRound(e)} ${W.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,mn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${W.svgRound(e[0])} ${W.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}mn=new WeakMap,wm=new WeakMap,Sm=new WeakMap,ai=new WeakMap,Us=new WeakMap,Hs=new WeakMap,Md=new WeakMap,Nd=new WeakMap,ic=new WeakMap,Xe=new WeakSet,nr=function(e=a(this,ic)){const i=a(this,Sm)+e/2*a(this,Md);return a(this,Nd)%180===0?[i/a(this,Us),i/a(this,Hs)]:[i/a(this,Hs),i/a(this,Us)]},mD=function(){const[e,i,s,r]=a(this,mn),[o,l]=C(this,Xe,nr).call(this,0);return[e+o,i+l,s-2*o,r-2*l]},gD=function(){const e=v(this,mn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,ai)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)H.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[d,h,f,p,x,y]=r.subarray(c,c+6);H.bezierBoundingBox(o,l,d,h,f,p,x,y,e),o=x,l=y}}const[i,s]=C(this,Xe,nr).call(this);e[0]=Ge(e[0]-i,0,1),e[1]=Ge(e[1]-s,0,1),e[2]=Ge(e[2]+i,0,1),e[3]=Ge(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},yD=function(e){const[i,s]=C(this,Xe,nr).call(this);v(this,ic,e);const[r,o]=C(this,Xe,nr).call(this),[l,c]=[r-i,o-s],u=a(this,mn);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class sv extends fD{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:zt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new sv(this._viewParameters);return t.updateAll(this),t}}var vy,vD;const ru=class ru extends ty{constructor(e){super({...e,name:"inkEditor"});S(this,vy);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){zt.initialize(e,i),this._defaultDrawingOptions=new sv(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return it(this,"typesMap",new Map([[ht.INK_THICKNESS,"stroke-width"],[ht.INK_COLOR,"stroke"],[ht.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,r,o){return new f5(e,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,r,o,l){return Fm.deserialize(e,i,s,r,o,l)}static async deserialize(e,i,s){let r=null;if(e instanceof cS){const{data:{inkLists:l,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:x,richText:y,contentsObj:A,creationDate:g,modificationDate:w},parent:{page:{pageNumber:b}}}=e;r=e={annotationType:rt.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:x,richText:y,comment:(A==null?void 0:A.str)||null,creationDate:g,modificationDate:w}}const o=await super.deserialize(e,i,s);return o._initialData=r,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Q0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ht.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=ru.getDefaultDrawingOptions({stroke:H.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:zt._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:i,points:s}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!C(this,vy,vD).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}};vy=new WeakSet,vD=function(e){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==i[c])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},L(ru,"_type","ink"),L(ru,"_editorType",rt.INK),L(ru,"_defaultDrawingOptions",null);let Aw=ru;class Cw extends Fm{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const pg=8,mh=3;var sc,Ct,Ew,ls,xD,bD,Tw,s0,wD,SD,AD,kw,Pw,CD;class Hr{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},r,o,l,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${i} ${s} ${h}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:x,actualBoundingBoxAscent:y,actualBoundingBoxDescent:A,fontBoundingBoxAscent:g,fontBoundingBoxDescent:w,width:b}=d.measureText(t),E=1.5,T=Math.ceil(Math.max(Math.abs(p)+Math.abs(x)||0,b)*E),P=Math.ceil(Math.max(Math.abs(y)+Math.abs(A)||h,Math.abs(g)+Math.abs(w)||h)*E);u=new OffscreenCanvas(T,P),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,T,P),d.fillStyle="black",d.fillText(t,T*(E-1)/2,P*(3-E)/2);const k=C(this,Ct,kw).call(this,d.getImageData(0,0,T,P).data),_=C(this,Ct,AD).call(this,k),D=C(this,Ct,Pw).call(this,_),M=C(this,Ct,Tw).call(this,k,T,P,D);return this.processDrawnLines({lines:{curves:M,width:T,height:P},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,r){const[o,l,c]=C(this,Ct,CD).call(this,t),[u,d]=C(this,Ct,SD).call(this,o,l,c,Math.hypot(l,c)*a(this,sc).sigmaSFactor,a(this,sc).sigmaR,a(this,sc).kernelSize),h=C(this,Ct,Pw).call(this,d),f=C(this,Ct,Tw).call(this,u,l,c,h);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([e,i]=[i,e]);const{curves:c,width:u,height:d}=t,h=t.thickness??0,f=[],p=Math.min(e/u,i/d),x=p/e,y=p/i,A=[];for(const{points:w}of c){const b=o?C(this,Ct,wD).call(this,w):w;if(!b)continue;A.push(b);const E=b.length,T=new Float32Array(E),P=new Float32Array(3*(E===2?2:E-2));if(f.push({line:P,points:T}),E===2){T[0]=b[0]*x,T[1]=b[1]*y,P.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[k,_,D,M]=b;k*=x,_*=y,D*=x,M*=y,T.set([k,_,D,M],0),P.set([NaN,NaN,NaN,NaN,k,_],0);for(let R=4;R<E;R+=2){const V=T[R]=b[R]*x,G=T[R+1]=b[R+1]*y;P.set(W.createBezierPoints(k,_,D,M,V,G),(R-2)*3),[k,_,D,M]=[D,M,V,G]}}if(f.length===0)return null;const g=l?new Cw:new Fm;return g.build(f,e,i,1,s,l?0:h,r),{outline:g,newCurves:A,areContours:l,thickness:h,width:u,height:d}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:r}){let o=1/0,l=-1/0,c=0;for(const b of t){c+=b.length;for(let E=2,T=b.length;E<T;E++){const P=b[E]-b[E-2];o=Math.min(o,P),l=Math.max(l,P)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const d=t.length,h=pg+mh*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(i??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(const b of t)f[p++]=b.length-2,f[p++]=b[0],f[p++]=b[1];const x=new CompressionStream("deflate-raw"),y=x.writable.getWriter();await y.ready,y.write(f);const A=u.prototype.constructor;for(const b of t){const E=new A(b.length-2);for(let T=2,P=b.length;T<P;T++)E[T-2]=b[T]-b[T-2];y.write(E)}y.close();const g=await new Response(x.readable).arrayBuffer();return new Uint8Array(g).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const b of i)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,l),l+=b.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,p=c[5],x=c[6],y=c[7],A=[],g=(pg+mh*x)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(y){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(o.buffer,g);break}l=0;for(let b=0;b<x;b++){const E=c[mh*b+pg],T=new Float32Array(E+2);A.push(T);for(let P=0;P<mh-1;P++)T[P]=c[mh*b+pg+P+1];for(let P=0;P<E;P++)T[P+2]=T[P]+w[l++]}return{areContours:f,thickness:p,outlines:A,width:d,height:h}}catch(e){return nt(`decompressSignature: ${e}`),null}}}sc=new WeakMap,Ct=new WeakSet,Ew=function(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s},ls=new WeakMap,xD=function(t,e,i,s,r,o,l){const c=C(this,Ct,Ew).call(this,i,s,r,o);for(let u=0;u<8;u++){const d=(-u+c-l+16)%8,h=a(this,ls)[2*d],f=a(this,ls)[2*d+1];if(t[(i+h)*e+(s+f)]!==0)return d}return-1},bD=function(t,e,i,s,r,o,l){const c=C(this,Ct,Ew).call(this,i,s,r,o);for(let u=0;u<8;u++){const d=(u+c+l+16)%8,h=a(this,ls)[2*d],f=a(this,ls)[2*d+1];if(t[(i+h)*e+(s+f)]!==0)return d}return-1},Tw=function(t,e,i,s){const r=t.length,o=new Int32Array(r);for(let d=0;d<r;d++)o[d]=t[d]<=s?1:0;for(let d=1;d<i-1;d++)o[d*e]=o[d*e+e-1]=0;for(let d=0;d<e;d++)o[d]=o[e*i-1-d]=0;let l=1,c;const u=[];for(let d=1;d<i-1;d++){c=1;for(let h=1;h<e-1;h++){const f=d*e+h,p=o[f];if(p===0)continue;let x=d,y=h;if(p===1&&o[f-1]===0)l+=1,y-=1;else if(p>=1&&o[f+1]===0)l+=1,y+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const A=[h,d],g=y===h+1,w={isHole:g,points:A,id:l,parent:0};u.push(w);let b;for(const R of u)if(R.id===c){b=R;break}b?b.isHole?w.parent=g?b.parent:c:w.parent=g?c:b.parent:w.parent=g?c:0;const E=C(this,Ct,xD).call(this,o,e,d,h,x,y,0);if(E===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let T=a(this,ls)[2*E],P=a(this,ls)[2*E+1];const k=d+T,_=h+P;x=k,y=_;let D=d,M=h;for(;;){const R=C(this,Ct,bD).call(this,o,e,D,M,x,y,1);T=a(this,ls)[2*R],P=a(this,ls)[2*R+1];const V=D+T,G=M+P;A.push(G,V);const I=D*e+M;if(o[I+1]===0?o[I]=-l:o[I]===1&&(o[I]=l),V===d&&G===h&&D===k&&M===_){o[f]!==1&&(c=Math.abs(o[f]));break}else x=D,y=M,D=V,M=G}}}return u},s0=function(t,e,i,s){if(i-e<=4){for(let k=e;k<i-2;k+=2)s.push(t[k],t[k+1]);return}const r=t[e],o=t[e+1],l=t[i-4]-r,c=t[i-3]-o,u=Math.hypot(l,c),d=l/u,h=c/u,f=d*o-h*r,p=c/l,x=1/u,y=Math.atan(p),A=Math.cos(y),g=Math.sin(y),w=x*(Math.abs(A)+Math.abs(g)),b=x*(1-w+w**2),E=Math.max(Math.atan(Math.abs(g+A)*b),Math.atan(Math.abs(g-A)*b));let T=0,P=e;for(let k=e+2;k<i-2;k+=2){const _=Math.abs(f-d*t[k+1]+h*t[k]);_>T&&(P=k,T=_)}T>(u*E)**2?(C(this,Ct,s0).call(this,t,e,P+2,s),C(this,Ct,s0).call(this,t,P,i,s)):s.push(r,o)},wD=function(t){const e=[],i=t.length;return C(this,Ct,s0).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},SD=function(t,e,i,s,r,o){const l=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let y=0;y<o;y++){const A=(y-u)**2;for(let g=0;g<o;g++)l[y*o+g]=Math.exp((A+(g-u)**2)/c)}const d=new Float32Array(256),h=-2*r**2;for(let y=0;y<256;y++)d[y]=Math.exp(y**2/h);const f=t.length,p=new Uint8Array(f),x=new Uint32Array(256);for(let y=0;y<i;y++)for(let A=0;A<e;A++){const g=y*e+A,w=t[g];let b=0,E=0;for(let P=0;P<o;P++){const k=y+P-u;if(!(k<0||k>=i))for(let _=0;_<o;_++){const D=A+_-u;if(D<0||D>=e)continue;const M=t[k*e+D],R=l[P*o+_]*d[Math.abs(M-w)];b+=M*R,E+=R}}const T=p[g]=Math.round(b/E);x[T]++}return[p,x]},AD=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},kw=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let l=0,c=i.length;l<c;l++){const u=i[l]=t[l<<2];s=Math.max(s,u),r=Math.min(r,u)}const o=255/(s-r);for(let l=0,c=i.length;l<c;l++)i[l]=(i[l]-r)*o;return i},Pw=function(t){let e,i=-1/0,s=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>i&&(e-o>s&&(s=e-o,l=e-1),i=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},CD=function(t){const e=t,{width:i,height:s}=t,{maxDim:r}=a(this,sc);let o=i,l=s;if(i>r||s>r){let f=i,p=s,x=Math.log2(Math.max(i,s)/r);const y=Math.floor(x);x=x===y?y-1:y;for(let g=0;g<x;g++){o=Math.ceil(f/2),l=Math.ceil(p/2);const w=new OffscreenCanvas(o,l);w.getContext("2d").drawImage(t,0,0,f,p,0,0,o,l),f=o,p=l,t!==e&&t.close(),t=w.transferToImageBitmap()}const A=Math.min(r/o,r/l);o=Math.round(o*A),l=Math.round(l*A)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,l);const d=u.getImageData(0,0,o,l).data;return[C(this,Ct,kw).call(this,d),o,l]},S(Hr,Ct),S(Hr,sc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(Hr,ls,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class uS extends fD{constructor(){super(),super.updateProperties({fill:zt._defaultLineColor,"stroke-width":0})}clone(){const t=new uS;return t.updateAll(this),t}}class dS extends sv{constructor(t){super(t),super.updateProperties({stroke:zt._defaultLineColor,"stroke-width":1})}clone(){const t=new dS(this._viewParameters);return t.updateAll(this),t}}var ia,$s,sa,rc;const Hn=class Hn extends ty{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});S(this,ia,!1);S(this,$s,null);S(this,sa,null);S(this,rc,null);this._willKeepAspectRatio=!0,v(this,sa,e.signatureData||null),v(this,$s,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){zt.initialize(e,i),this._defaultDrawingOptions=new uS,this._defaultDrawnSignatureOptions=new dS(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return it(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,$s)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(a(this,sa)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:d}=a(this,sa),{rawDims:{pageWidth:h,pageHeight:f},rotation:p}=this.parent.viewport,x=Hr.processDrawnLines({lines:r,pageWidth:h,pageHeight:f,rotation:p,innerMargin:Hn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(x,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,$s)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){v(this,rc,e),this.addEditToolbar()}getUuid(){return a(this,rc)}get description(){return a(this,$s)}set description(e){v(this,$s,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:s,width:r,height:o}=a(this,sa),l=Math.max(r,o),c=Hr.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,i,s,r){const{x:o,y:l}=this,{outline:c}=v(this,sa,e);v(this,ia,c instanceof Cw),this.description=s;let u;a(this,ia)?u=Hn.getDefaultDrawingOptions():(u=Hn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=i/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Hr.process(e,i,s,r,Hn._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Hr.extractContoursFromText(e,i,s,r,o,Hn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Hr.processDrawnLines({lines:e,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Hn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=Hn.getDefaultDrawingOptions():(this._drawingOptions=Hn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:a(this,ia),color:[0,0,0],thickness:a(this,ia)?0:r});return this.addComment(o),e?(o.paths={lines:i,points:s},o.uuid=a(this,rc),o.isCopy=!0):o.lines=i,a(this,$s)&&(o.accessibilityData={type:"Figure",alt:a(this,$s)}),o}static deserializeDraw(e,i,s,r,o,l){return l.areContours?Cw.deserialize(e,i,s,r,o,l):Fm.deserialize(e,i,s,r,o,l)}static async deserialize(e,i,s){var o;const r=await super.deserialize(e,i,s);return v(r,ia,e.areContours),r.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",v(r,rc,e.uuid),r}};ia=new WeakMap,$s=new WeakMap,sa=new WeakMap,rc=new WeakMap,L(Hn,"_type","signature"),L(Hn,"_editorType",rt.SIGNATURE),L(Hn,"_defaultDrawingOptions",null);let _w=Hn;var qt,Ie,ra,Or,oa,Ld,Br,oc,Ws,li,Rd,yt,zh,Vh,r0,o0,a0,Mw,l0,ED;class Dw extends zt{constructor(e){super({...e,name:"stampEditor"});S(this,yt);S(this,qt,null);S(this,Ie,null);S(this,ra,null);S(this,Or,null);S(this,oa,null);S(this,Ld,"");S(this,Br,null);S(this,oc,!1);S(this,Ws,null);S(this,li,!1);S(this,Rd,!1);v(this,Or,e.bitmapUrl),v(this,oa,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){zt.initialize(e,i)}static isHandlingMimeForPasting(e){return fb.includes(e)}static paste(e,i){i.pasteEditor({mode:rt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;a(this,Ie)&&(v(this,qt,null),this._uiManager.imageManager.deleteId(a(this,Ie)),(e=a(this,Br))==null||e.remove(),v(this,Br,null),a(this,Ws)&&(clearTimeout(a(this,Ws)),v(this,Ws,null))),super.remove()}rebuild(){if(!this.parent){a(this,Ie)&&C(this,yt,r0).call(this);return}super.rebuild(),this.div!==null&&(a(this,Ie)&&a(this,Br)===null&&C(this,yt,r0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,ra)||a(this,qt)||a(this,Or)||a(this,oa)||a(this,Ie)||a(this,oc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,oc)||(a(this,qt)?C(this,yt,o0).call(this):C(this,yt,r0).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(v(this,Ie,s),r&&v(this,qt,r),v(this,oc,!1),C(this,yt,o0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Ws)!==null&&clearTimeout(a(this,Ws)),v(this,Ws,setTimeout(()=>{v(this,Ws,null),C(this,yt,Mw).call(this)},200))}copyCanvas(e,i,s=!1){e||(e=224);const{width:r,height:o}=a(this,qt),l=new Ks;let c=a(this,qt),u=r,d=o,h=null;if(i){if(r>i||o>i){const k=Math.min(i/r,i/o);u=Math.floor(r*k),d=Math.floor(o*k)}h=document.createElement("canvas");const p=h.width=Math.ceil(u*l.sx),x=h.height=Math.ceil(d*l.sy);a(this,li)||(c=C(this,yt,a0).call(this,p,x));const y=h.getContext("2d");y.filter=this._uiManager.hcmFilter;let A="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":jO.isDarkMode&&(A="#8f8f9d",g="#42414d");const w=15,b=w*l.sx,E=w*l.sy,T=new OffscreenCanvas(b*2,E*2),P=T.getContext("2d");P.fillStyle=A,P.fillRect(0,0,b*2,E*2),P.fillStyle=g,P.fillRect(0,0,b,E),P.fillRect(b,E,b,E),y.fillStyle=y.createPattern(T,"repeat"),y.fillRect(0,0,p,x),y.drawImage(c,0,0,c.width,c.height,0,0,p,x)}let f=null;if(s){let p,x;if(l.symmetric&&c.width<e&&c.height<e)p=c.width,x=c.height;else if(c=a(this,qt),r>e||o>e){const g=Math.min(e/r,e/o);p=Math.floor(r*g),x=Math.floor(o*g),a(this,li)||(c=C(this,yt,a0).call(this,p,x))}const A=new OffscreenCanvas(p,x).getContext("2d",{willReadFrequently:!0});A.drawImage(c,0,0,c.width,c.height,0,0,p,x),f={width:p,height:x,data:A.getImageData(0,0,p,x).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(e,i,s){var A;let r=null,o=!1;if(e instanceof V_){const{data:{rect:g,rotation:w,id:b,structParent:E,popupRef:T,richText:P,contentsObj:k,creationDate:_,modificationDate:D},container:M,parent:{page:{pageNumber:R}},canvas:V}=e;let G,I;V?(delete e.canvas,{id:G,bitmap:I}=s.imageManager.getFromCanvas(M.id,V),V.remove()):(o=!0,e._hasNoCanvas=!0);const F=((A=await i._structTree.getAriaAttributes(`${tu}${b}`))==null?void 0:A.get("aria-label"))||"";r=e={annotationType:rt.STAMP,bitmapId:G,bitmap:I,pageIndex:R-1,rect:g.slice(0),rotation:w,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:E,popupRef:T,richText:P,comment:(k==null?void 0:k.str)||null,creationDate:_,modificationDate:D}}const l=await super.deserialize(e,i,s),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=e;o?(s.addMissingCanvas(e.id,l),v(l,oc,!0)):h&&s.imageManager.isValidId(h)?(v(l,Ie,h),u&&v(l,qt,u)):v(l,Or,d),v(l,li,f);const[x,y]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/y,p&&(l.altTextData=p),l._initialData=r,e.comment&&l.setCommentData(e),v(l,Rd,!!r),l}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:a(this,Ie),isSvg:a(this,li)});if(this.addComment(s),e)return s.bitmapUrl=C(this,yt,l0).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=C(this,yt,ED).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||(i.stamps=new Map);const l=a(this,li)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(a(this,Ie)))i.stamps.set(a(this,Ie),{area:l,serialized:s}),s.bitmap=C(this,yt,l0).call(this,!1);else if(a(this,li)){const c=i.stamps.get(a(this,Ie));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=C(this,yt,l0).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}qt=new WeakMap,Ie=new WeakMap,ra=new WeakMap,Or=new WeakMap,oa=new WeakMap,Ld=new WeakMap,Br=new WeakMap,oc=new WeakMap,Ws=new WeakMap,li=new WeakMap,Rd=new WeakMap,yt=new WeakSet,zh=function(e,i=!1){if(!e){this.remove();return}v(this,qt,e.bitmap),i||(v(this,Ie,e.id),v(this,li,e.isSvg)),e.file&&v(this,Ld,e.file.name),C(this,yt,o0).call(this)},Vh=function(){if(v(this,ra,null),this._uiManager.enableWaiting(!1),!!a(this,Br)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,qt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,qt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},r0=function(){if(a(this,Ie)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Ie)).then(s=>C(this,yt,zh).call(this,s,!0)).finally(()=>C(this,yt,Vh).call(this));return}if(a(this,Or)){const s=a(this,Or);v(this,Or,null),this._uiManager.enableWaiting(!0),v(this,ra,this._uiManager.imageManager.getFromUrl(s).then(r=>C(this,yt,zh).call(this,r)).finally(()=>C(this,yt,Vh).call(this)));return}if(a(this,oa)){const s=a(this,oa);v(this,oa,null),this._uiManager.enableWaiting(!0),v(this,ra,this._uiManager.imageManager.getFromFile(s).then(r=>C(this,yt,zh).call(this,r)).finally(()=>C(this,yt,Vh).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=fb.join(",");const i=this._uiManager._signal;v(this,ra,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,yt,zh).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>C(this,yt,Vh).call(this))),e.click()},o0=function(){var u;const{div:e}=this;let{width:i,height:s}=a(this,qt);const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const d=Math.min(l*r/i,l*o/s);i*=d,s*=d}this._uiManager.enableWaiting(!1);const c=v(this,Br,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=i/r,this.height=s/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),C(this,yt,Mw).call(this),a(this,Rd)||(this.parent.addUndoableEditor(this),v(this,Rd,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Ld)&&this.div.setAttribute("aria-description",a(this,Ld)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},a0=function(e,i){const{width:s,height:r}=a(this,qt);let o=s,l=r,c=a(this,qt);for(;o>2*e||l>2*i;){const u=o,d=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const h=new OffscreenCanvas(o,l);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,l),c=h.transferToImageBitmap()}return c},Mw=function(){const[e,i]=this.parentDimensions,{width:s,height:r}=this,o=new Ks,l=Math.ceil(s*e*o.sx),c=Math.ceil(r*i*o.sy),u=a(this,Br);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const d=a(this,li)?a(this,qt):C(this,yt,a0).call(this,l,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,l,c)},l0=function(e){if(e){if(a(this,li)){const r=this._uiManager.imageManager.getSvgUrl(a(this,Ie));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,qt),i.getContext("2d").drawImage(a(this,qt),0,0),i.toDataURL()}if(a(this,li)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*_a.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*_a.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,qt),0,0,a(this,qt).width,a(this,qt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,qt))},ED=function(e){var l;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===i,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},L(Dw,"_type","stamp"),L(Dw,"_editorType",rt.STAMP);var ac,Id,aa,la,zr,Rn,ca,jd,Fd,cs,Vr,je,Ur,ua,Od,Y,da,jt,Lw,TD,Ss,Rw,Iw,c0;const Ki=class Ki{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:d}){S(this,jt);S(this,ac);S(this,Id,!1);S(this,aa,null);S(this,la,null);S(this,zr,null);S(this,Rn,new Map);S(this,ca,!1);S(this,jd,!1);S(this,Fd,!1);S(this,cs,null);S(this,Vr,null);S(this,je,null);S(this,Ur,null);S(this,ua,null);S(this,Od,-1);S(this,Y);const h=[...a(Ki,da).values()];if(!Ki._initialized){Ki._initialized=!0;for(const f of h)f.initialize(d,t)}t.registerEditorTypes(h),v(this,Y,t),this.pageIndex=e,this.div=i,v(this,ac,r),v(this,aa,o),this.viewport=u,v(this,je,c),this.drawLayer=l,this._structTree=s,a(this,Y).addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return a(this,Rn).size===0}get isInvisible(){return this.isEmpty&&a(this,Y).getMode()===rt.NONE}updateToolbar(t){a(this,Y).updateToolbar(t)}updateMode(t=a(this,Y).getMode()){switch(C(this,jt,c0).call(this),t){case rt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case rt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case rt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===rt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of a(Ki,da).values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,je))==null?void 0:e.div)}setEditingState(t){a(this,Y).setEditingState(t)}addCommands(t){a(this,Y).addCommands(t)}cleanUndoStack(t){a(this,Y).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,aa))==null||e.togglePointerEvents(t)}async enable(){var i;v(this,Fd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(i=a(this,ua))==null||i.abort(),v(this,ua,null);const t=new Set;for(const s of a(this,jt,Lw))s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,Y).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=a(this,aa);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),a(this,Y).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}v(this,Fd,!1),a(this,Y)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(v(this,jd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,je)&&!a(this,ua)){v(this,ua,new AbortController);const r=a(this,Y).combinedSignal(a(this,ua));a(this,je).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:u,timeStamp:d}=o,h=a(this,Od);if(d-h>500){v(this,Od,d);return}v(this,Od,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(c,u);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let x;const y=new RegExp(`^${Cf}[0-9]+$`);for(const g of p)if(y.test(g.id)){x=g.id;break}if(!x)return;const A=a(this,Rn).get(x);(A==null?void 0:A.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),A.dblclick(o))},{signal:r,capture:!0})}const t=a(this,aa),e=[];if(t){const r=new Map,o=new Map;for(const c of a(this,jt,Lw)){if(c.disableEditing(),!c.annotationElementId){e.push(c);continue}if(c.serialize()!==null){r.set(c.annotationElementId,c);continue}else o.set(c.annotationElementId,c);(s=this.getEditableAnnotation(c.annotationElementId))==null||s.show(),c.remove()}const l=t.getEditableAnnotations();for(const c of l){const{id:u}=c.data;if(a(this,Y).isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let d=o.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=r.get(u),d&&(a(this,Y).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}C(this,jt,c0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of a(Ki,da).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),v(this,jd,!1)}getEditableAnnotation(t){var e;return((e=a(this,aa))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,Y).getActive()!==t&&a(this,Y).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,je))!=null&&t.div&&!a(this,Ur)){v(this,Ur,new AbortController);const e=a(this,Y).combinedSignal(a(this,Ur));a(this,je).div.addEventListener("pointerdown",C(this,jt,TD).bind(this),{signal:e}),a(this,je).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,je))!=null&&t.div&&a(this,Ur)&&(a(this,Ur).abort(),v(this,Ur,null),a(this,je).div.classList.remove("highlighting"))}enableClick(){if(a(this,la))return;v(this,la,new AbortController);const t=a(this,Y).combinedSignal(a(this,la));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,la))==null||t.abort(),v(this,la,null)}attach(t){a(this,Rn).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,Y).isDeletedAnnotationElement(e)&&a(this,Y).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Rn).delete(t.id),(e=a(this,ac))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,jd)&&t.annotationElementId&&a(this,Y).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,Y).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,Y).addDeletedAnnotationElement(t),zt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,Y).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Fd)),a(this,Y).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,zr)&&(t._focusEventsAllowed=!1,v(this,zr,setTimeout(()=>{v(this,zr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,Y)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,ac))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of a(this,Rn).values())if(e.uid===t)return e;return null}getNextId(){return a(this,Y).getId()}combinedSignal(t){return a(this,Y).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,jt,Ss))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,Y).updateMode(t.mode);const{offsetX:i,offsetY:s}=C(this,jt,Iw).call(this),r=this.getNextId(),o=C(this,jt,Rw).call(this,{parent:this,id:r,x:i,y:s,uiManager:a(this,Y),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(Ki,da).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,Y)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=C(this,jt,Rw).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,Y),isCentered:e,...i});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(C(this,jt,Iw).call(this),!0,t)}setSelected(t){a(this,Y).setSelected(t)}toggleSelected(t){a(this,Y).toggleSelected(t)}unselect(t){a(this,Y).unselect(t)}pointerup(t){var s;const{isMac:e}=_e.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,ca)||(v(this,ca,!1),(s=a(this,jt,Ss))!=null&&s.isDrawer&&a(this,jt,Ss).supportMultipleDrawings))return;if(!a(this,Id)){v(this,Id,!0);return}const i=a(this,Y).getMode();if(i===rt.STAMP||i===rt.SIGNATURE){a(this,Y).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(a(this,Y).getMode()===rt.HIGHLIGHT&&this.enableTextSelection(),a(this,ca)){v(this,ca,!1);return}const{isMac:e}=_e.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(v(this,ca,!0),(s=a(this,jt,Ss))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=a(this,Y).getActive();v(this,Id,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,cs)){a(this,jt,Ss).startDrawing(this,a(this,Y),!1,t);return}a(this,Y).setCurrentDrawingSession(this),v(this,cs,new AbortController);const e=a(this,Y).combinedSignal(a(this,cs));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(v(this,Vr,null),this.commitOrRemove())},{signal:e}),a(this,jt,Ss).startDrawing(this,a(this,Y),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&v(this,Vr,e);return}a(this,Vr)&&setTimeout(()=>{var e;(e=a(this,Vr))==null||e.focus(),v(this,Vr,null)},0)}endDrawingSession(t=!1){return a(this,cs)?(a(this,Y).setCurrentDrawingSession(null),a(this,cs).abort(),v(this,cs,null),v(this,Vr,null),a(this,jt,Ss).endDrawing(t)):null}findNewParent(t,e,i){const s=a(this,Y).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return a(this,cs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,cs)&&a(this,jt,Ss).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,Y).getActive())==null?void 0:t.parent)===this&&(a(this,Y).commitOrRemove(),a(this,Y).setActiveEditor(null)),a(this,zr)&&(clearTimeout(a(this,zr)),v(this,zr,null));for(const i of a(this,Rn).values())(e=a(this,ac))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,Rn).clear(),a(this,Y).removeLayer(this)}render({viewport:t}){this.viewport=t,vc(this.div,t);for(const e of a(this,Y).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,Y).commitOrRemove(),C(this,jt,c0).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,vc(this.div,{rotation:i}),e!==i)for(const s of a(this,Rn).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,Y).viewParameters.realScale}};ac=new WeakMap,Id=new WeakMap,aa=new WeakMap,la=new WeakMap,zr=new WeakMap,Rn=new WeakMap,ca=new WeakMap,jd=new WeakMap,Fd=new WeakMap,cs=new WeakMap,Vr=new WeakMap,je=new WeakMap,Ur=new WeakMap,ua=new WeakMap,Od=new WeakMap,Y=new WeakMap,da=new WeakMap,jt=new WeakSet,Lw=function(){return a(this,Rn).size!==0?a(this,Rn).values():a(this,Y).getEditors(this.pageIndex)},TD=function(t){a(this,Y).unselectAll();const{target:e}=t;if(e===a(this,je).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,je).div.contains(e)){const{isMac:i}=_e.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,Y).showAllEditors("highlight",!0,!0),a(this,je).div.classList.add("free"),this.toggleDrawing(),Z0.startHighlighting(this,a(this,Y).direction==="ltr",{target:a(this,je).div,x:t.x,y:t.y}),a(this,je).div.addEventListener("pointerup",()=>{a(this,je).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,Y)._signal}),t.preventDefault()}},Ss=function(){return a(Ki,da).get(a(this,Y).getMode())},Rw=function(t){const e=a(this,jt,Ss);return e?new e.prototype.constructor(t):null},Iw=function(){const{x:t,y:e,width:i,height:s}=this.boundingClientRect,r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+i),c=Math.min(window.innerHeight,e+s),u=(r+l)/2-t,d=(o+c)/2-e,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},c0=function(){for(const t of a(this,Rn).values())t.isEmpty()&&t.remove()},L(Ki,"_initialized",!1),S(Ki,da,new Map([fw,Aw,Dw,Z0,_w].map(t=>[t._editorType,t])));let Nw=Ki;var us,gn,lc,Am,xy,kD,Zs,Fw,PD,Ow;const Ae=class Ae{constructor(){S(this,Zs);S(this,us,null);S(this,gn,new Map);S(this,lc,new Map)}setParent(t){if(!a(this,us)){v(this,us,t);return}if(a(this,us)!==t){if(a(this,gn).size>0)for(const e of a(this,gn).values())e.remove(),t.append(e);v(this,us,t)}}static get _svgFactory(){return it(this,"_svgFactory",new K0)}draw(t,e=!1,i=!1){const s=we(Ae,Am)._++,r=C(this,Zs,Fw).call(this),o=Ae._svgFactory.createElement("defs");r.append(o);const l=Ae._svgFactory.createElement("path");o.append(l);const c=`path_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,lc).set(s,l);const u=i?C(this,Zs,PD).call(this,o,c):null,d=Ae._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,gn).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=we(Ae,Am)._++,s=C(this,Zs,Fw).call(this),r=Ae._svgFactory.createElement("defs");s.append(r);const o=Ae._svgFactory.createElement("path");r.append(o);const l=`path_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const h=Ae._svgFactory.createElement("mask");r.append(h),c=`mask_${i}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=Ae._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Ae._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Ae._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return s.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,t),a(this,gn).set(i,s),i}finalizeDraw(t,e){a(this,lc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:i,bbox:s,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,gn).get(t):t;if(l){if(i&&C(this,Zs,Ow).call(this,l,i),s&&C(c=Ae,xy,kD).call(c,l,s),r){const{classList:u}=l;for(const[d,h]of Object.entries(r))u.toggle(d,h)}if(o){const d=l.firstElementChild.firstElementChild;C(this,Zs,Ow).call(this,d,o)}}}updateParent(t,e){if(e===this)return;const i=a(this,gn).get(t);i&&(a(e,us).append(i),a(this,gn).delete(t),a(e,gn).set(t,i))}remove(t){a(this,lc).delete(t),a(this,us)!==null&&(a(this,gn).get(t).remove(),a(this,gn).delete(t))}destroy(){v(this,us,null);for(const t of a(this,gn).values())t.remove();a(this,gn).clear(),a(this,lc).clear()}};us=new WeakMap,gn=new WeakMap,lc=new WeakMap,Am=new WeakMap,xy=new WeakSet,kD=function(t,[e,i,s,r]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},Zs=new WeakSet,Fw=function(){const t=Ae._svgFactory.create(1,1,!0);return a(this,us).append(t),t.setAttribute("aria-hidden",!0),t},PD=function(t,e){const i=Ae._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=Ae._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},Ow=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},S(Ae,xy),S(Ae,Am,0);let jw=Ae;globalThis._pdfjsTestingUtils={HighlightOutliner:mw};globalThis.pdfjsLib={AbortException:Pa,AnnotationEditorLayer:Nw,AnnotationEditorParamsType:ht,AnnotationEditorType:rt,AnnotationEditorUIManager:xc,AnnotationLayer:dw,AnnotationMode:yo,AnnotationType:ge,applyOpacity:OO,build:$B,ColorPicker:Y0,createValidAbsoluteUrl:r2,CSSConstants:FO,DOMSVGFactory:K0,DrawLayer:jw,FeatureTest:_e,fetchData:Lm,findContrastColor:BO,getDocument:C_,getFilenameFromUrl:MO,getPdfFilenameFromUrl:NO,getRGB:Im,getUuid:a2,getXfaPageViewport:RO,GlobalWorkerOptions:qs,ImageKind:_g,InvalidPDFException:db,isDataScheme:Jy,isPdfFile:sS,isValidExplicitDest:QO,MathClamp:Ge,noContextMenu:qi,normalizeUnicode:_O,OPS:Ef,OutputScale:Ks,PagesMapper:kf,PasswordResponses:xO,PDFDataRangeTransport:E_,PDFDateString:H0,PDFWorker:_f,PermissionFlag:vO,PixelsPerInch:_a,RenderingCancelledException:iS,renderRichText:c2,ResponseException:U0,setLayerDimensions:vc,shadow:it,SignatureExtractor:Hr,stopEvent:ce,SupportedImageMimeTypes:fb,TextLayer:Pf,TouchManager:W0,updateUrlHash:o2,Util:H,VerbosityLevel:Xy,version:__,XfaLayer:l2};qs.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${__}/pdf.worker.min.js`;const p5=`
.ai-generator-container{min-height:100vh;padding:40px;background:linear-gradient(135deg,#000,#1a1a1a);color:#fff}
.ai-generator-wrapper{max-width:1000px;margin:0 auto;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:12px;padding:28px;border:2px solid #9d00ff}
.material-section{padding:18px;border:2px dashed #9d00ff;border-radius:10px;text-align:center;background:rgba(157,0,255,0.04)}
.upload-area{padding:18px;cursor:pointer}
.file-input{display:none}
.loading{display:flex;flex-direction:column;align-items:center;gap:10px;color:#9d00ff}
.generated-questions{margin-top:20px}
.question-card{background:rgba(255,255,255,0.03);padding:12px;border-radius:8px;margin-bottom:12px}
`;function m5(){const n=Xi(),{index:t}=zy(),e=parseInt(t),i=JSON.parse(localStorage.getItem("quizzes")||"[]"),s=i[e],[r,o]=N.useState(null),[l,c]=N.useState(""),[u,d]=N.useState(!1),[h,f]=N.useState([]),[p,x]=N.useState([]),[y,A]=N.useState(5),[g,w]=N.useState(!1);if(!s)return m.jsx("div",{style:{padding:30,color:"white"},children:"Quiz not found"});const b=async _=>{try{const D=await _.arrayBuffer(),M=await C_(D).promise;let R="";for(let V=1;V<=M.numPages;V++){const I=await(await M.getPage(V)).getTextContent();R+=I.items.map(F=>F.str).join(" ")+`
`}return R}catch(D){return console.error("PDF parse error",D),""}},E=async(_,D,M="")=>{const R=[{topic:"Photosynthesis",qs:[{text:"What is the main product of photosynthesis?",correct:"Glucose",distractors:["Oxygen","Carbon dioxide","ATP"]},{text:"Where does photosynthesis occur?",correct:"Chloroplast",distractors:["Mitochondria","Nucleus","Ribosome"]}]},{topic:"Cell Biology",qs:[{text:"Which organelle is called the powerhouse of the cell?",correct:"Mitochondrion",distractors:["Chloroplast","Nucleus","Golgi apparatus"]},{text:"Which process results in two identical daughter cells?",correct:"Mitosis",distractors:["Meiosis","Apoptosis","Binary fission"]}]},{topic:"Database",qs:[{text:"Which normal form removes partial dependencies?",correct:"Second Normal Form (2NF)",distractors:["1NF","3NF","BCNF"]},{text:"What does ACID stand for?",correct:"Atomicity, Consistency, Isolation, Durability",distractors:["Accuracy,Consistency,Integrity,Durability","Availability,Consistency,Isolation,Durability","Atomicity,Concurrency,Isolation,Durability"]}]}];let V=R[Math.floor(Math.random()*R.length)];M&&M.toLowerCase().includes("photosynth")&&(V=R[0]),M&&M.toLowerCase().includes("mitochond")&&(V=R[1]),M&&M.toLowerCase().includes("database")&&(V=R[2]);const G=[];for(let I=0;I<_;I++){const F=V.qs[I%V.qs.length],O=I>=V.qs.length?` (v${Math.floor(I/V.qs.length)})`:"",z=F.text+O,j=[F.correct,...F.distractors].sort(()=>Math.random()-.5),q=j.findIndex(Q=>Q===F.correct);G.push({id:Date.now()+I,text:z,options:j,correctAnswer:q,points:2})}return G},T=async _=>{const D=_.target.files&&_.target.files[0];if(!D)return;if(!(D.type==="application/pdf"||D.type.startsWith("image/"))){alert("Please upload PDF or image");return}o(D),c(D.name),d(!0),f([]),x([]);let M="";D.type==="application/pdf"&&(M=await b(D));const R=parseInt(y)||5,V=await E(R,"medium",M);f(V),x(V.map(G=>G.id)),d(!1)},P=_=>{x(D=>D.includes(_)?D.filter(M=>M!==_):[...D,_])},k=()=>{const _=h.filter(R=>p.includes(R.id));if(_.length===0){alert("Select at least one question");return}const D={...s};D.questions||(D.questions=[]),_.forEach(R=>{D.questions.push({id:(D.questions.length||0)+1,questionText:R.text,options:R.options,correctAnswer:R.correctAnswer,points:R.points}),D.totalPoints=(D.totalPoints||0)+R.points}),D.materialFile=l,D.aiGenerated=!0,g&&(D.published=!0,D.status="published");const M=[...i];M[e]=D,localStorage.setItem("quizzes",JSON.stringify(M)),alert(` ${_.length} questions added`),n("/dashboard")};return m.jsxs("div",{className:"ai-generator-container",children:[m.jsx("style",{children:p5}),m.jsxs("div",{className:"ai-generator-wrapper",children:[m.jsx("h2",{style:{color:"#ff00ff"},children:" AI Question Generator"}),m.jsxs("div",{className:"material-section",children:[m.jsx("div",{style:{marginBottom:12},children:"Upload PDF or image  questions will be generated automatically."}),m.jsxs("label",{className:"upload-area",children:[m.jsx("input",{className:"file-input",type:"file",accept:"application/pdf,image/*",onChange:T}),m.jsx("div",{style:{color:"#ccc"},children:l||"Click to choose file or drag-and-drop"})]}),m.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},children:[m.jsxs("label",{style:{color:"#ccc",display:"flex",alignItems:"center",gap:8},children:["Number of questions:",m.jsx("input",{type:"number",min:"1",max:"20",value:y,onChange:_=>A(_.target.value),style:{width:80,padding:6,borderRadius:6,border:"1px solid #9d00ff",background:"transparent",color:"#fff"}})]}),m.jsxs("label",{style:{color:"#ccc",display:"flex",alignItems:"center",gap:8},children:[m.jsx("input",{type:"checkbox",checked:g,onChange:_=>w(_.target.checked)}),m.jsx("span",{style:{fontSize:13,color:"#aaa"},children:"Publish quiz after adding"})]})]}),u&&m.jsxs("div",{className:"loading",children:[m.jsx("div",{style:{width:40,height:40,border:"4px solid rgba(157,0,255,0.3)",borderTop:"4px solid #9d00ff",borderRadius:20,animation:"spin 1s linear infinite"}}),m.jsx("div",{children:"Reading material and generating questions"})]})]}),m.jsx("div",{className:"generated-questions",children:h.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("h3",{style:{color:"#9d00ff"},children:"Generated Questions"}),h.map(_=>m.jsxs("div",{className:"question-card",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("div",{style:{fontWeight:700},children:_.text}),m.jsx("div",{children:m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[m.jsx("input",{type:"checkbox",checked:p.includes(_.id),onChange:()=>P(_.id)}),m.jsx("span",{style:{fontSize:12,color:"#aaa"},children:"Include"})]})})]}),m.jsx("div",{style:{marginTop:8},children:_.options.map((D,M)=>m.jsxs("div",{style:{padding:"6px 8px",background:M===_.correctAnswer?"rgba(0,255,153,0.08)":"transparent",borderRadius:6,marginBottom:6},children:[m.jsxs("strong",{style:{marginRight:8},children:[String.fromCharCode(65+M),")"]}),D]},M))})]},_.id)),m.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",marginTop:12},children:[m.jsx("button",{className:"btn-submit",onClick:k,style:{padding:"10px 18px",background:"linear-gradient(135deg,#9d00ff,#ff00ff)",border:"none",borderRadius:8,color:"#fff"},children:"Add Selected to Quiz"}),m.jsx("button",{className:"btn-cancel",onClick:()=>{f([]),x([]),c(""),o(null)},children:"Clear"})]})]})})]})]})}function g5(){const{index:n}=zy(),t=parseInt(n),e=Xi(),s=JSON.parse(localStorage.getItem("quizzes")||"[]")[t],r=sessionStorage.getItem("userName")||"Student",[o,l]=N.useState({}),[c,u]=N.useState(!1),[d,h]=N.useState(0),[f,p]=N.useState(0),[x,y]=N.useState(((s==null?void 0:s.timer)||0)*60),[A,g]=N.useState(!0),[w,b]=N.useState(""),[E,T]=N.useState(""),[P,k]=N.useState(!1),[_,D]=N.useState(null);if(N.useEffect(()=>{if(!s)return;const F=JSON.parse(localStorage.getItem("results")||"[]").filter(O=>O.user===r&&O.quizId===s.quizId);if(F.length>0){const O=s.maxAttempts||1,z=O-F.length;D({count:F.length,lastAttempt:F[F.length-1],allAttempts:F,maxAttempts:O,attemptsRemaining:Math.max(0,z),exhausted:z<=0})}},[s,r]),N.useEffect(()=>{s&&(!s.questions||s.questions.length===0||p(s.questions.reduce((I,F)=>I+(F.points||1),0)))},[s]),N.useEffect(()=>{if(!s||!s.timer||!P)return;y(s.timer*60);const I=setInterval(()=>{y(F=>F<=1?(clearInterval(I),V(),0):F-1)},1e3);return()=>clearInterval(I)},[s,P]),!s)return m.jsxs("div",{style:{padding:30,color:"white"},children:["Quiz not found. ",m.jsx("button",{onClick:()=>e("/dashboard"),children:"Back"})]});const M=()=>{w===s.password?(g(!1),k(!0),T("")):(T(" Invalid Password! Please try again."),b(""))},R=(I,F)=>{c||l(O=>({...O,[I]:F}))},V=()=>{if(c)return;const I=s.questions||[];let F=0;I.forEach(z=>{const j=o[z.id];typeof j<"u"&&j===z.correctAnswer&&(F+=z.points||1)}),h(F),u(!0);const O=JSON.parse(localStorage.getItem("results")||"[]");O.push({quizId:s.quizId,user:r,score:F,total:I.reduce((z,j)=>z+(j.points||1),0),answers:o,date:new Date().toISOString()}),localStorage.setItem("results",JSON.stringify(O))},G=I=>{const F=Math.floor(I/60).toString().padStart(2,"0"),O=(I%60).toString().padStart(2,"0");return`${F}:${O}`};return m.jsxs("div",{style:{padding:30,color:"white",minHeight:"100vh"},children:[A&&m.jsx(J.div,{initial:{opacity:0},animate:{opacity:1},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:m.jsxs(J.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{background:"linear-gradient(135deg, #1a1a2e, #16213e)",border:"2px solid #0099ff",borderRadius:"15px",padding:"40px",textAlign:"center",minWidth:"350px",boxShadow:"0 10px 40px rgba(0, 153, 255, 0.3)"},children:[m.jsx("h2",{style:{marginBottom:"20px",color:"#00d4ff"},children:" Enter Quiz Password"}),m.jsx("input",{type:"password",placeholder:"Enter the quiz password",value:w,onChange:I=>b(I.target.value),onKeyPress:I=>I.key==="Enter"&&M(),style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid #0099ff",borderRadius:"8px",color:"white",marginBottom:"15px",fontSize:"1em"},autoFocus:!0}),E&&m.jsx("p",{style:{color:"#ff6b6b",marginBottom:"15px"},children:E}),m.jsxs("div",{style:{display:"flex",gap:"10px"},children:[m.jsx("button",{onClick:M,style:{flex:1,padding:"12px",background:"#0099ff",border:"none",borderRadius:"8px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"},children:"Verify"}),m.jsx("button",{onClick:()=>e("/dashboard"),style:{flex:1,padding:"12px",background:"#666",border:"none",borderRadius:"8px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"},children:"Cancel"})]})]})}),!A&&_&&!c&&m.jsx(J.div,{initial:{opacity:0},animate:{opacity:1},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999},children:m.jsxs(J.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{background:"linear-gradient(135deg, #1a1a2e, #16213e)",border:`2px solid ${_.exhausted?"#ff6b6b":"#ffaa00"}`,borderRadius:"15px",padding:"40px",textAlign:"center",minWidth:"400px",boxShadow:`0 10px 40px rgba(${_.exhausted?"255, 107, 107":"255, 170, 0"}, 0.3)`},children:[_.exhausted?m.jsxs(m.Fragment,{children:[m.jsx("h2",{style:{marginBottom:"20px",color:"#ff6b6b"},children:" No More Attempts Available"}),m.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",background:"rgba(255,107,107,0.1)",padding:"20px",borderRadius:"8px"},children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:" Total Attempts Used:"})," ",_.count," / ",_.maxAttempts]}),m.jsxs("p",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:" Best Score:"})," ",m.jsx("span",{style:{color:"#00ff99",fontSize:"1.2em"},children:Math.max(..._.allAttempts.map(I=>I.score))})," / ",_.allAttempts[0].total]}),m.jsxs("p",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:" Last Attempt:"})," ",new Date(_.lastAttempt.date).toLocaleString()]})]}),m.jsx("p",{style:{color:"#ff6b6b",marginBottom:"20px",fontSize:"0.95em",fontWeight:"bold"},children:"You have exhausted all your attempts for this quiz!"})]}):m.jsxs(m.Fragment,{children:[m.jsx("h2",{style:{marginBottom:"20px",color:"#ffaa00"},children:" Quiz Already Attempted"}),m.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"8px"},children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:" Attempts Remaining:"})," ",m.jsx("span",{style:{color:"#00ff99",fontSize:"1.2em"},children:_.attemptsRemaining})," / ",_.maxAttempts]}),m.jsxs("p",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:" Last Score:"})," ",m.jsx("span",{style:{color:"#00d4ff",fontSize:"1.1em"},children:_.lastAttempt.score})," / ",_.lastAttempt.total]}),m.jsxs("p",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:" Last Attempt:"})," ",new Date(_.lastAttempt.date).toLocaleString()]}),m.jsxs("p",{style:{marginBottom:"10px"},children:[m.jsx("strong",{children:" Best Score:"})," ",Math.max(..._.allAttempts.map(I=>I.score))," / ",_.allAttempts[0].total]})]}),m.jsx("p",{style:{color:"#ffaa00",marginBottom:"20px",fontSize:"0.95em"},children:" You can take this quiz again! Click continue to attempt again."})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[m.jsx("button",{onClick:()=>e("/dashboard"),style:{padding:"12px 24px",background:"#666",border:"none",borderRadius:"8px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"},children:"Back to Dashboard"}),!_.exhausted&&m.jsx("button",{onClick:()=>D(null),style:{padding:"12px 24px",background:"#0099ff",border:"none",borderRadius:"8px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"},children:"Continue to Quiz"})]})]})}),!A&&(!_||!_.exhausted)?m.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},children:[m.jsx("div",{style:{marginBottom:"15px",padding:"15px",background:"rgba(0,153,255,0.1)",borderRadius:"8px",border:"1px solid #0099ff"},children:m.jsxs("p",{style:{margin:"0 0 5px",color:"#00d4ff",fontWeight:"bold"},children:[" Attempts: ",_?`${_.count}/${_.maxAttempts}`:`0/${s.maxAttempts||1}`,_&&!_.exhausted&&m.jsxs("span",{style:{marginLeft:"15px",color:"#00ff99"},children:["(",_.attemptsRemaining," remaining)"]})]})}),m.jsxs("h2",{children:[s.subject,"  Take Quiz"]}),m.jsxs("p",{children:["Timer: ",s.timer||"No timer"," minutes"]}),s.timer>0&&m.jsxs("p",{children:["Time left: ",G(x)]}),c?m.jsxs("div",{style:{marginTop:20},children:[m.jsx("h3",{children:"Result"}),m.jsxs("p",{style:{fontSize:"1.2em"},children:["Score: ",m.jsx("strong",{style:{color:"#00ff99"},children:d})," / ",f]}),m.jsxs("p",{style:{fontSize:"1.1em",color:"#aaa"},children:["Percentage: ",m.jsxs("strong",{style:{color:"#00d4ff"},children:[(d/f*100).toFixed(2),"%"]})]}),m.jsxs("div",{style:{marginTop:20},children:[m.jsx("h4",{children:"Review"}),(s.questions||[]).map(I=>{const F=o[I.id],O=I.correctAnswer;return m.jsxs("div",{style:{marginBottom:12,padding:10,borderRadius:6,background:"rgba(255,255,255,0.02)"},children:[m.jsxs("div",{children:[m.jsxs("strong",{children:["Q",I.id,"."]})," ",I.text]}),m.jsx("div",{style:{marginTop:8},children:I.options.map((z,j)=>m.jsxs("div",{style:{padding:6,borderRadius:4,marginBottom:6,background:j===O?"rgba(0,255,153,0.08)":j===F?"rgba(255,107,107,0.06)":"transparent"},children:[String.fromCharCode(65+j),") ",z," ",j===O&&m.jsx("span",{style:{color:"#00ff99",marginLeft:8},children:""}),j===F&&j!==O&&m.jsx("span",{style:{color:"#ff6b6b",marginLeft:8},children:"Your answer"})]},j))})]},I.id)})]}),m.jsx("div",{style:{marginTop:20},children:m.jsx("button",{onClick:()=>e("/dashboard"),style:{padding:"10px 18px",background:"#0099ff",border:"none",borderRadius:6},children:"Back to Dashboard"})})]}):m.jsxs("div",{style:{marginTop:20},children:[(s.questions||[]).map(I=>m.jsxs("div",{style:{marginBottom:18,background:"rgba(255,255,255,0.03)",padding:12,borderRadius:8},children:[m.jsxs("div",{style:{marginBottom:8},children:[m.jsxs("strong",{children:["Q",I.id,"."]})," ",I.text]}),m.jsx("div",{style:{display:"grid",gap:8},children:I.options.map((F,O)=>m.jsxs("label",{style:{display:"block",cursor:"pointer",padding:8,borderRadius:6,background:o[I.id]===O?"rgba(0,255,153,0.08)":"transparent"},children:[m.jsx("input",{type:"radio",name:`q_${I.id}`,checked:o[I.id]===O,onChange:()=>R(I.id,O),style:{marginRight:8}}),String.fromCharCode(65+O),") ",F]},O))})]},I.id)),m.jsxs("div",{style:{display:"flex",gap:12,marginTop:20},children:[m.jsx("button",{onClick:V,style:{padding:"10px 18px",background:"#00ff99",border:"none",borderRadius:6},children:"Submit"}),m.jsx("button",{onClick:()=>e("/dashboard"),style:{padding:"10px 18px",background:"#666",border:"none",borderRadius:6},children:"Cancel"})]})]})]}):null]})}function y5(){const n=Xi(),t=sessionStorage.getItem("userName")||"Student",e=sessionStorage.getItem("studentName")||t,[i,s]=N.useState([]);return N.useEffect(()=>{const o=JSON.parse(localStorage.getItem("results")||"[]").filter(l=>l.user===t);s(o)},[t]),m.jsx("div",{style:{padding:30,color:"white",minHeight:"100vh",background:"linear-gradient(135deg, #000000, #1a1a1a)"},children:m.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[m.jsx("h2",{style:{marginBottom:10},children:" My Quiz Attempts"}),m.jsxs("p",{style:{color:"#aaa",marginBottom:30},children:["Student: ",m.jsx("strong",{style:{color:"#00d4ff"},children:e})," | ID: ",m.jsx("strong",{style:{color:"#00ff99"},children:t})]}),i.length===0?m.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",border:"1px solid #0099ff",borderRadius:"10px",padding:"40px",textAlign:"center"},children:[m.jsx("p",{style:{fontSize:"1.1em",color:"#aaa"},children:"You haven't attempted any quizzes yet."}),m.jsx("button",{onClick:()=>n("/dashboard"),style:{marginTop:"20px",padding:"10px 20px",background:"#0099ff",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"Go to Dashboard"})]}):m.jsx("div",{style:{display:"grid",gap:"15px"},children:i.map((r,o)=>m.jsxs(J.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},style:{background:"rgba(255,255,255,0.05)",border:"1px solid #0099ff",borderRadius:"10px",padding:"20px",display:"grid",gridTemplateColumns:"auto 1fr auto",alignItems:"center",gap:"20px"},children:[m.jsx("div",{style:{fontSize:"2em"},children:""}),m.jsxs("div",{children:[m.jsxs("h3",{style:{margin:"0 0 8px",color:"#00d4ff"},children:["Quiz: ",r.quizId]}),m.jsxs("p",{style:{margin:"5px 0",color:"#aaa",fontSize:"0.9em"},children:["Attempted: ",new Date(r.date).toLocaleString()]})]}),m.jsxs("div",{style:{textAlign:"right"},children:[m.jsxs("div",{style:{fontSize:"2em",fontWeight:"bold",color:"#00ff99",marginBottom:"8px"},children:[r.score," / ",r.total]}),m.jsxs("div",{style:{fontSize:"1.1em",color:"#aaa"},children:[(r.score/r.total*100).toFixed(1),"%"]})]})]},o))}),m.jsx(J.button,{onClick:()=>n("/dashboard"),style:{marginTop:"30px",padding:"12px 24px",background:"#666",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},whileHover:{scale:1.05},whileTap:{scale:.95},children:" Back to Dashboard"})]})})}function v5(){var h;const n=Xi(),[t,e]=N.useState([]),[i,s]=N.useState([]),[r,o]=N.useState(null),[l,c]=N.useState(null);N.useEffect(()=>{const f=JSON.parse(localStorage.getItem("quizzes")||"[]"),p=JSON.parse(localStorage.getItem("results")||"[]");e(f),s(p)},[]);const u=f=>{const p=i.filter(w=>w.quizId===f);if(p.length===0)return null;const x=p.map(w=>w.score),y=x.reduce((w,b)=>w+b,0)/x.length,A=Math.max(...x),g=Math.min(...x);return{totalAttempts:p.length,uniqueStudents:new Set(p.map(w=>w.user)).size,averageScore:y.toFixed(2),maxScore:A,minScore:g,attempts:p.sort((w,b)=>new Date(b.date)-new Date(w.date))}},d=(f,p)=>{o(p),c(u(f.quizId))};return m.jsx("div",{style:{padding:30,color:"white",minHeight:"100vh",background:"linear-gradient(135deg, #000000, #1a1a1a)"},children:m.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[m.jsx("h2",{style:{marginBottom:30},children:" Teacher Analytics Dashboard"}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"30px"},children:[m.jsxs("div",{style:{background:"linear-gradient(135deg, #0099ff, #00d4ff)",borderRadius:"10px",padding:"20px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2em",marginBottom:"8px"},children:""}),m.jsx("div",{style:{fontSize:"1.1em",fontWeight:"bold",marginBottom:"5px"},children:"Total Quizzes"}),m.jsx("div",{style:{fontSize:"2em",color:"#000",fontWeight:"bold"},children:t.length})]}),m.jsxs("div",{style:{background:"linear-gradient(135deg, #2ecc71, #27ae60)",borderRadius:"10px",padding:"20px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2em",marginBottom:"8px"},children:""}),m.jsx("div",{style:{fontSize:"1.1em",fontWeight:"bold",marginBottom:"5px"},children:"Total Attempts"}),m.jsx("div",{style:{fontSize:"2em",color:"#000",fontWeight:"bold"},children:i.length})]}),m.jsxs("div",{style:{background:"linear-gradient(135deg, #9d00ff, #6f00cc)",borderRadius:"10px",padding:"20px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2em",marginBottom:"8px"},children:""}),m.jsx("div",{style:{fontSize:"1.1em",fontWeight:"bold",marginBottom:"5px"},children:"Unique Students"}),m.jsx("div",{style:{fontSize:"2em",color:"#fff",fontWeight:"bold"},children:new Set(i.map(f=>f.user)).size})]})]}),m.jsx("h3",{style:{marginTop:"30px",marginBottom:"15px"},children:" Select Quiz for Details"}),m.jsx("div",{style:{display:"grid",gap:"10px",marginBottom:"30px"},children:t.length===0?m.jsx("p",{style:{color:"#aaa"},children:"No quizzes created yet."}):t.map((f,p)=>m.jsxs(J.button,{onClick:()=>d(f,p),style:{padding:"15px",background:r===p?"#0099ff":"rgba(255,255,255,0.05)",border:`2px solid ${r===p?"#00d4ff":"#0099ff"}`,borderRadius:"8px",color:"white",cursor:"pointer",textAlign:"left",fontSize:"1em",fontWeight:"600",transition:"all 0.3s ease"},whileHover:{scale:1.02},children:[m.jsx("strong",{children:f.subject})," (ID: ",f.quizId,")  ",i.filter(x=>x.quizId===f.quizId).length," attempts"]},p))}),r!==null&&l&&m.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{background:"rgba(255,255,255,0.05)",border:"1px solid #0099ff",borderRadius:"10px",padding:"25px",marginBottom:"30px"},children:[m.jsxs("h3",{style:{marginTop:0,marginBottom:"20px",color:"#00d4ff"},children:[" ",(h=t[r])==null?void 0:h.subject," - Statistics"]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px",marginBottom:"25px"},children:[m.jsxs("div",{style:{background:"rgba(0,255,153,0.1)",padding:"15px",borderRadius:"8px",border:"1px solid #00ff99"},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.9em"},children:"Total Attempts"}),m.jsx("div",{style:{fontSize:"2em",fontWeight:"bold",color:"#00ff99"},children:l.totalAttempts})]}),m.jsxs("div",{style:{background:"rgba(0,212,255,0.1)",padding:"15px",borderRadius:"8px",border:"1px solid #00d4ff"},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.9em"},children:"Unique Students"}),m.jsx("div",{style:{fontSize:"2em",fontWeight:"bold",color:"#00d4ff"},children:l.uniqueStudents})]}),m.jsxs("div",{style:{background:"rgba(0,153,255,0.1)",padding:"15px",borderRadius:"8px",border:"1px solid #0099ff"},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.9em"},children:"Average Score"}),m.jsx("div",{style:{fontSize:"1.8em",fontWeight:"bold",color:"#0099ff"},children:l.averageScore})]}),m.jsxs("div",{style:{background:"rgba(255,170,0,0.1)",padding:"15px",borderRadius:"8px",border:"1px solid #ffaa00"},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.9em"},children:"Highest Score"}),m.jsx("div",{style:{fontSize:"1.8em",fontWeight:"bold",color:"#ffaa00"},children:l.maxScore})]}),m.jsxs("div",{style:{background:"rgba(255,107,107,0.1)",padding:"15px",borderRadius:"8px",border:"1px solid #ff6b6b"},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.9em"},children:"Lowest Score"}),m.jsx("div",{style:{fontSize:"1.8em",fontWeight:"bold",color:"#ff6b6b"},children:l.minScore})]})]}),m.jsx("h4",{style:{marginBottom:"15px"},children:"Student Attempts"}),m.jsx("div",{style:{overflowX:"auto",background:"rgba(0,0,0,0.3)",borderRadius:"8px"},children:m.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[m.jsx("thead",{children:m.jsxs("tr",{style:{borderBottom:"2px solid #0099ff"},children:[m.jsx("th",{style:{padding:"12px",textAlign:"left",color:"#00d4ff"},children:"Student"}),m.jsx("th",{style:{padding:"12px",textAlign:"center",color:"#00d4ff"},children:"Score"}),m.jsx("th",{style:{padding:"12px",textAlign:"center",color:"#00d4ff"},children:"Percentage"}),m.jsx("th",{style:{padding:"12px",textAlign:"left",color:"#00d4ff"},children:"Date"})]})}),m.jsx("tbody",{children:l.attempts.map((f,p)=>m.jsxs("tr",{style:{borderBottom:"1px solid rgba(0,153,255,0.2)"},children:[m.jsx("td",{style:{padding:"12px",color:"#aaa"},children:f.user}),m.jsxs("td",{style:{padding:"12px",textAlign:"center",color:"#00ff99",fontWeight:"bold"},children:[f.score," / ",f.total]}),m.jsxs("td",{style:{padding:"12px",textAlign:"center",color:"#0099ff",fontWeight:"bold"},children:[(f.score/f.total*100).toFixed(1),"%"]}),m.jsx("td",{style:{padding:"12px",color:"#aaa",fontSize:"0.9em"},children:new Date(f.date).toLocaleString()})]},p))})]})})]}),m.jsx(J.button,{onClick:()=>n("/dashboard"),style:{padding:"12px 24px",background:"#666",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},whileHover:{scale:1.05},whileTap:{scale:.95},children:" Back to Dashboard"})]})})}function x5(){const n=Xi(),[t,e]=N.useState([]),[i,s]=N.useState(!1),[r,o]=N.useState({name:"",id:"",password:""}),[l,c]=N.useState(!1);N.useEffect(()=>{const x=JSON.parse(localStorage.getItem("students")||"[]");e(x)},[]);const u=x=>{localStorage.setItem("students",JSON.stringify(x)),e(x)},d=()=>{const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let y="";for(let A=0;A<8;A++)y+=x.charAt(Math.floor(Math.random()*x.length));return y},h=()=>{if(!r.name||!r.id||!r.password){alert("Please fill all fields!");return}if(t.some(y=>y.id===r.id)){alert("Student ID already exists!");return}const x=[...t,{...r,createdAt:new Date().toISOString()}];u(x),o({name:"",id:"",password:""}),s(!1),alert(" Student added successfully!")},f=x=>{if(window.confirm(`Are you sure you want to delete student ${x}?`)){const y=t.filter(A=>A.id!==x);u(y),alert(" Student deleted!")}},p=()=>{window.confirm(" This will DELETE ALL STUDENTS! Are you sure?")&&window.confirm("This action cannot be undone! Type 'DELETE' to confirm.")&&(u([]),c(!1),alert(" All students cleared!"))};return m.jsxs("div",{style:{padding:30,color:"white",minHeight:"100vh",background:"linear-gradient(135deg, #000000, #1a1a1a)"},children:[m.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:30},children:[m.jsx("h2",{children:" Manage Students"}),m.jsx(J.button,{onClick:()=>n("/dashboard"),style:{padding:"10px 20px",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},whileHover:{scale:1.05},whileTap:{scale:.95},children:" Back"})]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"30px"},children:m.jsxs("div",{style:{background:"linear-gradient(135deg, #0099ff, #00d4ff)",borderRadius:"10px",padding:"20px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"1.1em",fontWeight:"bold",marginBottom:"5px"},children:"Total Students"}),m.jsx("div",{style:{fontSize:"2em",color:"#000",fontWeight:"bold"},children:t.length})]})}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"30px"},children:[m.jsx(J.button,{onClick:()=>s(!i),style:{padding:"12px 24px",background:"#2ecc71",color:"#000",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},whileHover:{scale:1.05},whileTap:{scale:.95},children:" Add Student"}),m.jsx(J.button,{onClick:()=>c(!0),style:{padding:"12px 24px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},whileHover:{scale:1.05},whileTap:{scale:.95},children:" Clear All Data"})]}),i&&m.jsxs(J.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},style:{background:"rgba(255,255,255,0.05)",border:"1px solid #0099ff",borderRadius:"10px",padding:"20px",marginBottom:"30px"},children:[m.jsx("h3",{style:{marginTop:0,color:"#00d4ff"},children:" Add New Student"}),m.jsxs("div",{style:{display:"grid",gap:"15px"},children:[m.jsxs("div",{children:[m.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#00d4ff"},children:"Student Name *"}),m.jsx("input",{type:"text",value:r.name,onChange:x=>o({...r,name:x.target.value}),placeholder:"e.g., John Doe",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid #0099ff",borderRadius:"8px",color:"white",fontSize:"1em"}})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[m.jsxs("div",{children:[m.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#00d4ff"},children:"Student ID *"}),m.jsx("input",{type:"text",value:r.id,onChange:x=>o({...r,id:x.target.value}),placeholder:"e.g., STU001",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid #0099ff",borderRadius:"8px",color:"white",fontSize:"1em"}})]}),m.jsxs("div",{children:[m.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#00d4ff"},children:"Password *"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("input",{type:"text",value:r.password,onChange:x=>o({...r,password:x.target.value}),placeholder:"Enter or generate",style:{flex:1,padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid #0099ff",borderRadius:"8px",color:"white",fontSize:"1em"}}),m.jsx("button",{type:"button",onClick:()=>o({...r,password:d()}),style:{padding:"12px 16px",background:"#9d00ff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" Generate"})]})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[m.jsx("button",{onClick:()=>s(!1),style:{padding:"10px 20px",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"Cancel"}),m.jsx("button",{onClick:h,style:{padding:"10px 20px",background:"#2ecc71",color:"#000",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"Add Student"})]})]})]}),m.jsxs("h3",{style:{marginBottom:"15px",color:"#00d4ff"},children:[" Student List (",t.length,")"]}),t.length===0?m.jsx("div",{style:{background:"rgba(255,255,255,0.05)",border:"1px solid #0099ff",borderRadius:"10px",padding:"40px",textAlign:"center"},children:m.jsx("p",{style:{fontSize:"1.1em",color:"#aaa"},children:'No students added yet. Click "Add Student" to get started.'})}):m.jsx("div",{style:{overflowX:"auto",background:"rgba(0,0,0,0.3)",borderRadius:"8px"},children:m.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[m.jsx("thead",{children:m.jsxs("tr",{style:{borderBottom:"2px solid #0099ff"},children:[m.jsx("th",{style:{padding:"15px",textAlign:"left",color:"#00d4ff"},children:"Student Name"}),m.jsx("th",{style:{padding:"15px",textAlign:"center",color:"#00d4ff"},children:"Student ID"}),m.jsx("th",{style:{padding:"15px",textAlign:"center",color:"#00d4ff"},children:"Password"}),m.jsx("th",{style:{padding:"15px",textAlign:"center",color:"#00d4ff"},children:"Created"}),m.jsx("th",{style:{padding:"15px",textAlign:"center",color:"#00d4ff"},children:"Action"})]})}),m.jsx("tbody",{children:t.map((x,y)=>m.jsxs("tr",{style:{borderBottom:"1px solid rgba(0,153,255,0.2)"},children:[m.jsx("td",{style:{padding:"15px",color:"#aaa"},children:m.jsx("strong",{style:{color:"#00d4ff"},children:x.name})}),m.jsx("td",{style:{padding:"15px",textAlign:"center",color:"#00ff99",fontFamily:"monospace",fontWeight:"bold"},children:x.id}),m.jsx("td",{style:{padding:"15px",textAlign:"center",background:"rgba(46, 204, 113, 0.1)",borderRadius:"6px",margin:"8px 0"},children:m.jsx("span",{style:{background:"linear-gradient(135deg, #2ecc71, #27ae60)",padding:"6px 12px",borderRadius:"4px",color:"#000",fontFamily:"monospace",fontWeight:"bold",letterSpacing:"1px",display:"inline-block"},children:x.password})}),m.jsx("td",{style:{padding:"15px",textAlign:"center",color:"#888",fontSize:"0.85em"},children:new Date(x.createdAt).toLocaleDateString()}),m.jsx("td",{style:{padding:"15px",textAlign:"center"},children:m.jsx("button",{onClick:()=>f(x.id),style:{padding:"8px 12px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.9em"},children:"Delete"})})]},y))})]})})]}),l&&m.jsx(J.div,{initial:{opacity:0},animate:{opacity:1},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:m.jsxs(J.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{background:"linear-gradient(135deg, #1a1a2e, #16213e)",border:"2px solid #ff6b6b",borderRadius:"15px",padding:"40px",textAlign:"center",minWidth:"350px",boxShadow:"0 10px 40px rgba(255, 107, 107, 0.3)"},children:[m.jsx("h2",{style:{marginBottom:"20px",color:"#ff6b6b"},children:" Clear All Data?"}),m.jsxs("p",{style:{marginBottom:"20px",color:"#aaa",fontSize:"1em"},children:["This will DELETE all ",t.length," students and cannot be undone!"]}),m.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[m.jsx("button",{onClick:()=>c(!1),style:{padding:"12px 24px",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"Cancel"}),m.jsx("button",{onClick:p,style:{padding:"12px 24px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"Yes, Delete All"})]})]})})]})}const b5=`
  .quiz-management-container {
    min-height: 100vh;
    padding: 40px;
    background: linear-gradient(135deg, #000000, #1a1a1a);
    color: white;
  }

  .quiz-management-wrapper {
    max-width: 1200px;
    margin: 0 auto;
  }

  .header-section {
    margin-bottom: 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
  }

  .header-section h1 {
    font-size: 2em;
    background: linear-gradient(135deg, #00d4ff, #0099ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
  }

  .back-button {
    padding: 10px 20px;
    background: rgba(0, 153, 255, 0.2);
    border: 1px solid #0099ff;
    color: #00d4ff;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .back-button:hover {
    background: rgba(0, 153, 255, 0.3);
    transform: translateY(-2px);
  }

  .quiz-card {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid #0099ff;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
  }

  .quiz-card:hover {
    border-color: #00d4ff;
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
    transform: translateY(-5px);
  }

  .quiz-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 15px;
    gap: 20px;
  }

  .quiz-title {
    font-size: 1.5em;
    font-weight: bold;
    color: #00d4ff;
    margin: 0;
  }

  .quiz-status {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .status-badge {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 600;
  }

  .status-created {
    background: rgba(255, 165, 0, 0.2);
    color: #ffa500;
    border: 1px solid #ffa500;
  }

  .status-published {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
    border: 1px solid #2ecc71;
  }

  .status-attempts {
    background: rgba(52, 152, 219, 0.2);
    color: #3498db;
    border: 1px solid #3498db;
  }

  .quiz-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
    padding: 15px;
    background: rgba(0, 153, 255, 0.05);
    border-radius: 8px;
  }

  .detail-item {
    display: flex;
    flex-direction: column;
  }

  .detail-label {
    font-size: 0.85em;
    color: #aaa;
    margin-bottom: 5px;
  }

  .detail-value {
    font-size: 1em;
    color: #00d4ff;
    font-weight: 600;
  }

  .action-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9em;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: linear-gradient(135deg, #0099ff, #00d4ff);
    color: #000;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 153, 255, 0.4);
  }

  .btn-secondary {
    background: rgba(0, 153, 255, 0.2);
    color: #00d4ff;
    border: 1px solid #0099ff;
  }

  .btn-secondary:hover {
    background: rgba(0, 153, 255, 0.3);
  }

  .btn-danger {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
    border: 1px solid #e74c3c;
  }

  .btn-danger:hover {
    background: rgba(231, 76, 60, 0.3);
  }

  .btn-success {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
    border: 1px solid #2ecc71;
  }

  .btn-success:hover {
    background: rgba(46, 204, 113, 0.3);
  }

  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }

  .modal-content {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid #0099ff;
    border-radius: 15px;
    padding: 30px;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
  }

  .modal-title {
    font-size: 1.5em;
    margin-bottom: 20px;
    color: #00d4ff;
  }

  .form-group {
    margin-bottom: 15px;
  }

  .form-group label {
    display: block;
    margin-bottom: 5px;
    color: #00d4ff;
    font-weight: 600;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 10px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid #0099ff;
    border-radius: 5px;
    color: white;
    font-family: inherit;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    background: rgba(0, 153, 255, 0.1);
    border-color: #00d4ff;
  }

  .modal-buttons {
    display: flex;
    gap: 10px;
    margin-top: 20px;
  }

  .modal-buttons button {
    flex: 1;
  }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #aaa;
  }

  .empty-state-icon {
    font-size: 3em;
    margin-bottom: 20px;
  }

  .attempts-list {
    background: rgba(0, 153, 255, 0.05);
    border-radius: 8px;
    padding: 15px;
    margin-top: 15px;
    max-height: 300px;
    overflow-y: auto;
  }

  .attempt-item {
    padding: 10px;
    border-bottom: 1px solid rgba(0, 153, 255, 0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .attempt-info {
    flex: 1;
  }

  .attempt-score {
    color: #2ecc71;
    font-weight: 600;
    margin-right: 10px;
  }

  .warning-message {
    background: rgba(255, 165, 0, 0.1);
    border: 1px solid #ffa500;
    color: #ffa500;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 15px;
    font-size: 0.9em;
  }

  .success-message {
    background: rgba(46, 204, 113, 0.1);
    border: 1px solid #2ecc71;
    color: #2ecc71;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 15px;
    font-size: 0.9em;
  }

  .error-message {
    background: rgba(231, 76, 60, 0.1);
    border: 1px solid #e74c3c;
    color: #e74c3c;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 15px;
    font-size: 0.9em;
  }
`;function w5(){var P;const n=Xi(),[t,e]=N.useState([]),[i,s]=N.useState(null),[r,o]=N.useState({}),[l,c]=N.useState(""),[u,d]=N.useState(!1),[h,f]=N.useState({}),[p,x]=N.useState(null);N.useEffect(()=>{y()},[]);const y=()=>{const k=JSON.parse(localStorage.getItem("quizzes")||"[]");e(k);const _=JSON.parse(localStorage.getItem("results")||"[]"),D={};k.forEach(M=>{D[M.quizId]=_.filter(R=>R.quizId===M.quizId)}),f(D)},A=k=>{s(k),o({title:k.title,description:k.description||"",password:k.password,maxAttempts:k.maxAttempts||1,timeLimit:k.timeLimit||0}),c("")},g=()=>{if(!r.title||!r.password){c("Title and Password are required!");return}const k=t.map(_=>_.quizId===i.quizId?{..._,title:r.title,description:r.description,password:r.password,maxAttempts:parseInt(r.maxAttempts),timeLimit:parseInt(r.timeLimit)}:_);e(k),localStorage.setItem("quizzes",JSON.stringify(k)),c(" Quiz updated successfully!"),setTimeout(()=>{s(null),c("")},1500)},w=k=>{const _=h[k.quizId]||[];if(_.length>0){c(` Cannot delete! This quiz has ${_.length} student attempt(s). Please archive it instead.`);return}if(window.confirm(`Are you sure you want to delete "${k.title}"? This action cannot be undone.`)){const D=t.filter(M=>M.quizId!==k.quizId);e(D),localStorage.setItem("quizzes",JSON.stringify(D)),c(" Quiz deleted successfully!"),setTimeout(()=>c(""),2e3)}},b=k=>{const _=t.map(D=>D.quizId===k.quizId?{...D,published:!D.published,status:D.published?"created":"published"}:D);e(_),localStorage.setItem("quizzes",JSON.stringify(_))},E=k=>{x({quiz:k,attempts:h[k.quizId]||[]})},T=k=>{const _=h[k.quizId]||[];if(_.length===0)return null;const D=_.map(I=>I.score||0),M=k.totalPoints||100,R=D.map(I=>(I/M*100).toFixed(2)),V=(D.reduce((I,F)=>I+F,0)/D.length).toFixed(2),G=(R.reduce((I,F)=>parseFloat(I)+parseFloat(F),0)/R.length).toFixed(2);return{totalAttempts:_.length,uniqueStudents:new Set(_.map(I=>I.user)).size,avgScore:V,avgPercentage:G,maxScore:M,bestScore:Math.max(...D),worstScore:Math.min(...D)}};return m.jsxs("div",{className:"quiz-management-container",children:[m.jsx("style",{children:b5}),m.jsxs("div",{className:"quiz-management-wrapper",children:[m.jsxs("div",{className:"header-section",children:[m.jsx("h1",{children:" Quiz Management"}),m.jsx("button",{className:"back-button",onClick:()=>n("/dashboard"),children:" Back to Dashboard"})]}),l&&m.jsx(J.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:l.includes("")?"success-message":l.includes("")?"error-message":"warning-message",children:l}),t.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state-icon",children:""}),m.jsx("h3",{children:"No quizzes yet"}),m.jsx("p",{children:"Create a new quiz from the dashboard to get started"})]}):t.map((k,_)=>{var R;const D=T(k),M=h[k.quizId]||[];return m.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.1},className:"quiz-card",children:[m.jsxs("div",{className:"quiz-header",children:[m.jsx("h2",{className:"quiz-title",children:k.title}),m.jsxs("div",{className:"quiz-status",children:[m.jsx("span",{className:`status-badge status-${k.status||"created"}`,children:k.status==="published"?" Published":" Created"}),M.length>0&&m.jsxs("span",{className:"status-badge status-attempts",children:[" ",M.length," Attempt",M.length!==1?"s":""]})]})]}),k.description&&m.jsx("p",{style:{color:"#aaa",marginBottom:"15px",margin:"0 0 15px 0"},children:k.description}),m.jsxs("div",{className:"quiz-details",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Questions"}),m.jsx("span",{className:"detail-value",children:((R=k.questions)==null?void 0:R.length)||0})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Total Points"}),m.jsx("span",{className:"detail-value",children:k.totalPoints||0})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Time Limit"}),m.jsx("span",{className:"detail-value",children:k.timeLimit>0?`${k.timeLimit} min`:"No limit"})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Max Attempts"}),m.jsx("span",{className:"detail-value",children:k.maxAttempts===-1?"Unlimited":k.maxAttempts||1})]})]}),D&&m.jsxs("div",{className:"quiz-details",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:" Total Attempts"}),m.jsx("span",{className:"detail-value",children:D.totalAttempts})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:" Unique Students"}),m.jsx("span",{className:"detail-value",children:D.uniqueStudents})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:" Avg Score"}),m.jsxs("span",{className:"detail-value",children:[D.avgScore,"/",D.maxScore," (",D.avgPercentage,"%)"]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:" Best Score"}),m.jsxs("span",{className:"detail-value",children:[D.bestScore,"/",D.maxScore]})]})]}),m.jsxs("div",{className:"action-buttons",children:[m.jsx("button",{className:"btn btn-primary",onClick:()=>A(k),children:" Edit"}),m.jsxs("button",{className:"btn btn-secondary",onClick:()=>E(k),children:[" View Attempts (",M.length,")"]}),m.jsx("button",{className:`btn ${k.published?"btn-secondary":"btn-success"}`,onClick:()=>b(k),children:k.published?" Unpublish":" Publish"}),m.jsx("button",{className:"btn btn-danger",onClick:()=>w(k),disabled:M.length>0,style:{opacity:M.length>0?.5:1,cursor:M.length>0?"not-allowed":"pointer"},children:" Delete"})]})]},k.quizId)})]}),i&&m.jsx("div",{className:"modal-overlay",onClick:()=>s(null),children:m.jsxs(J.div,{className:"modal-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:k=>k.stopPropagation(),children:[m.jsx("h2",{className:"modal-title",children:"Edit Quiz"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Quiz Title"}),m.jsx("input",{type:"text",value:r.title||"",onChange:k=>o({...r,title:k.target.value})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Description"}),m.jsx("textarea",{value:r.description||"",onChange:k=>o({...r,description:k.target.value}),rows:"3"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Quiz Password"}),m.jsx("input",{type:"text",value:r.password||"",onChange:k=>o({...r,password:k.target.value})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Max Attempts (-1 for unlimited)"}),m.jsx("input",{type:"number",value:r.maxAttempts||1,onChange:k=>o({...r,maxAttempts:k.target.value})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Time Limit (minutes, 0 for no limit)"}),m.jsx("input",{type:"number",value:r.timeLimit||0,onChange:k=>o({...r,timeLimit:k.target.value})})]}),((P=h[i.quizId])==null?void 0:P.length)>0&&m.jsx("div",{className:"warning-message",children:" This quiz has student attempts. You cannot change questions, but you can update other settings."}),m.jsxs("div",{className:"modal-buttons",children:[m.jsx("button",{className:"btn btn-primary",onClick:g,children:" Save Changes"}),m.jsx("button",{className:"btn btn-secondary",onClick:()=>s(null),children:"Cancel"})]})]})}),p&&m.jsx("div",{className:"modal-overlay",onClick:()=>x(null),children:m.jsxs(J.div,{className:"modal-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:k=>k.stopPropagation(),children:[m.jsxs("h2",{className:"modal-title",children:[' Attempts for "',p.quiz.title,'"']}),p.attempts.length===0?m.jsx("p",{style:{color:"#aaa"},children:"No attempts yet"}):m.jsx("div",{className:"attempts-list",children:p.attempts.map((k,_)=>m.jsxs("div",{className:"attempt-item",children:[m.jsxs("div",{className:"attempt-info",children:[m.jsxs("div",{style:{fontWeight:600,marginBottom:"5px"},children:[k.user," "]}),m.jsx("div",{style:{fontSize:"0.85em",color:"#aaa"},children:new Date(k.date||Date.now()).toLocaleDateString()})]}),m.jsxs("div",{className:"attempt-score",children:[k.score,"/",p.quiz.totalPoints||100]})]},_))}),m.jsx("div",{className:"modal-buttons",children:m.jsx("button",{className:"btn btn-secondary",onClick:()=>x(null),children:"Close"})})]})})]})}const S5=`
  .scoreboard-container {
    min-height: 100vh;
    padding: 40px;
    background: linear-gradient(135deg, #000000, #1a1a1a);
    color: white;
  }

  .scoreboard-wrapper {
    max-width: 1200px;
    margin: 0 auto;
  }

  .header-section {
    margin-bottom: 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
  }

  .header-section h1 {
    font-size: 2em;
    background: linear-gradient(135deg, #00d4ff, #0099ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
  }

  .back-button {
    padding: 10px 20px;
    background: rgba(0, 153, 255, 0.2);
    border: 1px solid #0099ff;
    color: #00d4ff;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .back-button:hover {
    background: rgba(0, 153, 255, 0.3);
    transform: translateY(-2px);
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
  }

  .stat-card {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid #0099ff;
    border-radius: 10px;
    padding: 25px;
    text-align: center;
  }

  .stat-icon {
    font-size: 2.5em;
    margin-bottom: 10px;
  }

  .stat-label {
    font-size: 0.9em;
    color: #aaa;
    margin-bottom: 10px;
  }

  .stat-value {
    font-size: 2em;
    color: #00d4ff;
    font-weight: bold;
  }

  .tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
    border-bottom: 2px solid rgba(0, 153, 255, 0.2);
  }

  .tab-button {
    padding: 12px 20px;
    background: transparent;
    border: none;
    color: #aaa;
    cursor: pointer;
    font-size: 1em;
    font-weight: 600;
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
  }

  .tab-button.active {
    color: #00d4ff;
    border-bottom-color: #00d4ff;
  }

  .tab-button:hover {
    color: #00d4ff;
  }

  .quiz-card {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid #0099ff;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
  }

  .quiz-card:hover {
    border-color: #00d4ff;
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
    transform: translateY(-5px);
  }

  .quiz-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 15px;
    gap: 20px;
  }

  .quiz-title {
    font-size: 1.5em;
    font-weight: bold;
    color: #00d4ff;
    margin: 0;
  }

  .attempt-count {
    background: rgba(0, 153, 255, 0.2);
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.85em;
    color: #00d4ff;
  }

  .attempt-list {
    display: grid;
    gap: 12px;
  }

  .attempt-item {
    background: rgba(0, 153, 255, 0.05);
    border: 1px solid rgba(0, 153, 255, 0.2);
    border-radius: 8px;
    padding: 15px;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 15px;
    align-items: center;
  }

  .attempt-info {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .attempt-date {
    font-size: 0.9em;
    color: #aaa;
  }

  .attempt-details {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }

  .score-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    min-width: 100px;
  }

  .score-big {
    font-size: 1.8em;
    font-weight: bold;
    color: #2ecc71;
  }

  .score-max {
    font-size: 0.9em;
    color: #aaa;
  }

  .percentage-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    min-width: 100px;
  }

  .percentage-big {
    font-size: 1.8em;
    font-weight: bold;
  }

  .percentage-label {
    font-size: 0.9em;
    color: #aaa;
  }

  .action-buttons {
    display: flex;
    gap: 10px;
  }

  .btn {
    padding: 8px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9em;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: linear-gradient(135deg, #0099ff, #00d4ff);
    color: #000;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 153, 255, 0.4);
  }

  .btn-secondary {
    background: rgba(0, 153, 255, 0.2);
    color: #00d4ff;
    border: 1px solid #0099ff;
  }

  .btn-secondary:hover {
    background: rgba(0, 153, 255, 0.3);
  }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #aaa;
  }

  .empty-state-icon {
    font-size: 3em;
    margin-bottom: 20px;
  }

  .performance-bar {
    width: 100%;
    height: 8px;
    background: rgba(0, 153, 255, 0.2);
    border-radius: 4px;
    overflow: hidden;
    margin-top: 8px;
  }

  .performance-fill {
    height: 100%;
    background: linear-gradient(90deg, #0099ff, #00d4ff);
    transition: width 0.3s ease;
  }

  .rating {
    display: inline-block;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 600;
    margin-top: 8px;
  }

  .rating-excellent {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
    border: 1px solid #2ecc71;
  }

  .rating-good {
    background: rgba(52, 152, 219, 0.2);
    color: #3498db;
    border: 1px solid #3498db;
  }

  .rating-fair {
    background: rgba(241, 196, 15, 0.2);
    color: #f1c40f;
    border: 1px solid #f1c40f;
  }

  .rating-poor {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
    border: 1px solid #e74c3c;
  }
`;function A5(){const n=Xi(),t=sessionStorage.getItem("userName")||"Student",[e,i]=N.useState([]),[s,r]=N.useState([]),[o,l]=N.useState("all"),[c,u]=N.useState(null);N.useEffect(()=>{d()},[]);const d=()=>{const g=JSON.parse(localStorage.getItem("quizzes")||"[]"),w=JSON.parse(localStorage.getItem("results")||"[]");i(g);const b=w.filter(E=>E.user===t);r(b)},h=g=>s.filter(w=>w.quizId===g),f=g=>{var b;const w=e.find(E=>E.quizId===g);return w&&((b=w.questions)==null?void 0:b.length)||0},p=g=>g>=80?{text:"Excellent! ",class:"rating-excellent"}:g>=60?{text:"Good ",class:"rating-good"}:g>=40?{text:"Fair ",class:"rating-fair"}:{text:"Needs Practice ",class:"rating-poor"},x=()=>{if(s.length===0)return{totalAttempts:0,totalQuizzesTaken:0,averageScore:0,averagePercentage:0};const g=new Set(s.map(T=>T.quizId)),w=s.map(T=>T.score||0);s.map(T=>T.totalPoints||100);const b=(w.reduce((T,P)=>T+P,0)/w.length).toFixed(2),E=(s.reduce((T,P)=>T+(P.score||0)/(P.totalPoints||100)*100,0)/s.length).toFixed(2);return{totalAttempts:s.length,totalQuizzesTaken:g.size,averageScore:b,averagePercentage:E}},y=()=>e.filter(g=>h(g.quizId).length>0).sort((g,w)=>{var T,P;const b=h(g.quizId),E=h(w.quizId);return new Date((T=E[0])==null?void 0:T.date)-new Date((P=b[0])==null?void 0:P.date)}),A=x();return m.jsxs("div",{className:"scoreboard-container",children:[m.jsx("style",{children:S5}),m.jsxs("div",{className:"scoreboard-wrapper",children:[m.jsxs("div",{className:"header-section",children:[m.jsxs("div",{children:[m.jsx("h1",{children:" My Scoreboard"}),m.jsxs("p",{style:{color:"#aaa",margin:"10px 0 0 0"},children:["Welcome, ",t,"!"]})]}),m.jsx("button",{className:"back-button",onClick:()=>n("/dashboard"),children:" Back to Dashboard"})]}),m.jsxs("div",{className:"stats-grid",children:[m.jsxs(J.div,{className:"stat-card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:0},children:[m.jsx("div",{className:"stat-icon",children:""}),m.jsx("div",{className:"stat-label",children:"Total Attempts"}),m.jsx("div",{className:"stat-value",children:A.totalAttempts})]}),m.jsxs(J.div,{className:"stat-card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},children:[m.jsx("div",{className:"stat-icon",children:""}),m.jsx("div",{className:"stat-label",children:"Quizzes Completed"}),m.jsx("div",{className:"stat-value",children:A.totalQuizzesTaken})]}),m.jsxs(J.div,{className:"stat-card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[m.jsx("div",{className:"stat-icon",children:""}),m.jsx("div",{className:"stat-label",children:"Average Score"}),m.jsx("div",{className:"stat-value",children:A.averageScore})]}),m.jsxs(J.div,{className:"stat-card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},children:[m.jsx("div",{className:"stat-icon",children:""}),m.jsx("div",{className:"stat-label",children:"Average Percentage"}),m.jsxs("div",{className:"stat-value",children:[A.averagePercentage,"%"]})]})]}),m.jsxs("div",{className:"tabs",children:[m.jsx("button",{className:`tab-button ${o==="all"?"active":""}`,onClick:()=>l("all"),children:" All Quizzes"}),m.jsx("button",{className:`tab-button ${o==="details"?"active":""}`,onClick:()=>l("details"),children:" Quiz Details"})]}),o==="all"&&m.jsx("div",{children:s.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state-icon",children:""}),m.jsx("h3",{children:"No attempts yet"}),m.jsx("p",{children:"Take a quiz to see your scores here"}),m.jsx("button",{className:"btn btn-primary",onClick:()=>n("/dashboard"),children:"Back to Dashboard"})]}):s.sort((g,w)=>new Date(w.date)-new Date(g.date)).map((g,w)=>{const b=(g.score||0)/(g.totalPoints||100)*100,E=p(b),T=e.find(P=>P.quizId===g.quizId);return m.jsxs(J.div,{className:"quiz-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},children:[m.jsx("div",{className:"quiz-header",children:m.jsx("div",{className:"quiz-title",children:(T==null?void 0:T.title)||"Unknown Quiz"})}),m.jsxs("div",{className:"attempt-details",children:[m.jsxs("div",{className:"score-display",children:[m.jsx("div",{className:"score-big",children:g.score||0}),m.jsxs("div",{className:"score-max",children:["of ",g.totalPoints||100]})]}),m.jsxs("div",{className:"percentage-display",children:[m.jsxs("div",{className:"percentage-big",style:{color:b>=80?"#2ecc71":b>=60?"#3498db":b>=40?"#f1c40f":"#e74c3c"},children:[b.toFixed(2),"%"]}),m.jsx("div",{className:"percentage-label",children:"Percentage"})]}),m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{className:"attempt-date",children:[" ",new Date(g.date||Date.now()).toLocaleDateString()," ",new Date(g.date||Date.now()).toLocaleTimeString()]}),m.jsx("div",{style:{marginTop:"8px"},children:m.jsx("span",{className:`rating ${E.class}`,children:E.text})}),m.jsx("div",{className:"performance-bar",children:m.jsx("div",{className:"performance-fill",style:{width:`${b}%`}})})]})]}),m.jsx("div",{className:"action-buttons",style:{marginTop:"15px"},children:m.jsx("button",{className:"btn btn-secondary",onClick:()=>{l("details"),u(g.quizId)},children:" Review Answer"})})]},w)})}),o==="details"&&m.jsx("div",{children:y().length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state-icon",children:""}),m.jsx("h3",{children:"No quiz details available"}),m.jsx("p",{children:"Take a quiz first to see detailed statistics"})]}):y().map((g,w)=>{const b=h(g.quizId),E=b.map(D=>D.score||0),T=E.map(D=>(D/(g.totalPoints||100)*100).toFixed(2)),P=(E.reduce((D,M)=>D+M,0)/E.length).toFixed(2);(T.reduce((D,M)=>parseFloat(D)+parseFloat(M),0)/T.length).toFixed(2);const k=Math.max(...E),_=Math.min(...E);return m.jsxs(J.div,{className:"quiz-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},children:[m.jsxs("div",{className:"quiz-header",children:[m.jsx("div",{className:"quiz-title",children:g.title}),m.jsxs("div",{className:"attempt-count",children:[b.length," Attempt",b.length!==1?"s":""]})]}),g.description&&m.jsx("p",{style:{color:"#aaa",marginBottom:"15px"},children:g.description}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"20px",padding:"15px",background:"rgba(0, 153, 255, 0.05)",borderRadius:"8px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"0.85em",color:"#aaa",marginBottom:"5px"},children:" Questions"}),m.jsx("div",{style:{fontSize:"1.3em",color:"#00d4ff",fontWeight:"bold"},children:f(g.quizId)})]}),m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"0.85em",color:"#aaa",marginBottom:"5px"},children:" Best Score"}),m.jsxs("div",{style:{fontSize:"1.3em",color:"#2ecc71",fontWeight:"bold"},children:[k,"/",g.totalPoints||100]})]}),m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"0.85em",color:"#aaa",marginBottom:"5px"},children:" Worst Score"}),m.jsxs("div",{style:{fontSize:"1.3em",color:"#e74c3c",fontWeight:"bold"},children:[_,"/",g.totalPoints||100]})]}),m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"0.85em",color:"#aaa",marginBottom:"5px"},children:" Average"}),m.jsxs("div",{style:{fontSize:"1.3em",color:"#3498db",fontWeight:"bold"},children:[P,"/",g.totalPoints||100]})]})]}),m.jsx("h4",{style:{marginTop:"20px",marginBottom:"15px",color:"#00d4ff"},children:" All Attempts"}),m.jsx("div",{className:"attempt-list",children:b.sort((D,M)=>new Date(M.date)-new Date(D.date)).map((D,M)=>{const R=(D.score||0)/(g.totalPoints||100)*100,V=p(R);return m.jsxs("div",{className:"attempt-item",children:[m.jsxs("div",{className:"attempt-info",children:[m.jsxs("div",{style:{fontWeight:"600"},children:["Attempt ",b.length-M]}),m.jsxs("div",{className:"attempt-date",children:[new Date(D.date||Date.now()).toLocaleDateString()," ",new Date(D.date||Date.now()).toLocaleTimeString()]}),m.jsx("span",{className:`rating ${V.class}`,children:V.text})]}),m.jsxs("div",{style:{textAlign:"right"},children:[m.jsxs("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:"#00d4ff"},children:[D.score||0,"/",g.totalPoints||100]}),m.jsxs("div",{style:{fontSize:"0.9em",color:"#aaa"},children:[R.toFixed(2),"%"]}),m.jsx("button",{className:"btn btn-secondary",onClick:()=>n(`/review-attempt/${D.id||M}`),style:{marginTop:"8px",width:"100%"},children:"Review"})]})]},M)})})]},w)})})]})]})}const Zv=`
  .review-container {
    min-height: 100vh;
    padding: 40px;
    background: linear-gradient(135deg, #000000, #1a1a1a);
    color: white;
  }

  .review-wrapper {
    max-width: 1000px;
    margin: 0 auto;
  }

  .header-section {
    margin-bottom: 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
  }

  .header-section h1 {
    font-size: 2em;
    background: linear-gradient(135deg, #00d4ff, #0099ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
  }

  .back-button {
    padding: 10px 20px;
    background: rgba(0, 153, 255, 0.2);
    border: 1px solid #0099ff;
    color: #00d4ff;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .back-button:hover {
    background: rgba(0, 153, 255, 0.3);
    transform: translateY(-2px);
  }

  .score-section {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid #0099ff;
    border-radius: 15px;
    padding: 40px;
    margin-bottom: 40px;
    text-align: center;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 30px;
  }

  .score-item {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .score-icon {
    font-size: 2.5em;
    margin-bottom: 10px;
  }

  .score-label {
    font-size: 0.9em;
    color: #aaa;
    margin-bottom: 10px;
  }

  .score-value {
    font-size: 2.5em;
    font-weight: bold;
    color: #00d4ff;
  }

  .percentage-value {
    font-size: 2.5em;
    font-weight: bold;
    margin-bottom: 5px;
  }

  .percentage-good {
    color: #2ecc71;
  }

  .percentage-fair {
    color: #f1c40f;
  }

  .percentage-poor {
    color: #e74c3c;
  }

  .quiz-info {
    background: rgba(0, 153, 255, 0.05);
    border: 1px solid rgba(0, 153, 255, 0.2);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 30px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
  }

  .info-item {
    display: flex;
    flex-direction: column;
  }

  .info-label {
    font-size: 0.85em;
    color: #aaa;
    margin-bottom: 5px;
  }

  .info-value {
    font-size: 1.1em;
    color: #00d4ff;
    font-weight: 600;
  }

  .questions-section {
    margin-top: 40px;
  }

  .questions-section h2 {
    color: #00d4ff;
    margin-bottom: 20px;
    font-size: 1.5em;
  }

  .question-card {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid #0099ff;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 25px;
    transition: all 0.3s ease;
  }

  .question-card.correct {
    border-color: #2ecc71;
    background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(46, 204, 113, 0.05));
  }

  .question-card.incorrect {
    border-color: #e74c3c;
    background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(231, 76, 60, 0.05));
  }

  .question-header {
    display: flex;
    align-items: start;
    gap: 15px;
    margin-bottom: 15px;
  }

  .question-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(0, 153, 255, 0.2);
    color: #00d4ff;
    font-weight: bold;
    flex-shrink: 0;
  }

  .question-card.correct .question-number {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
  }

  .question-card.incorrect .question-number {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
  }

  .question-title {
    flex: 1;
  }

  .question-text {
    font-size: 1.1em;
    font-weight: 600;
    color: white;
    margin-bottom: 10px;
  }

  .question-points {
    font-size: 0.9em;
    color: #aaa;
  }

  .question-status {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: 600;
    white-space: nowrap;
  }

  .question-status.correct {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
  }

  .question-status.incorrect {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
  }

  .options-section {
    margin-top: 15px;
  }

  .option {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(0, 153, 255, 0.2);
    border-radius: 8px;
    padding: 12px 15px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s ease;
  }

  .option-letter {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: rgba(0, 153, 255, 0.2);
    color: #00d4ff;
    font-weight: bold;
    font-size: 0.9em;
    flex-shrink: 0;
  }

  .option-text {
    flex: 1;
    color: #ccc;
  }

  .option.selected {
    border-color: #3498db;
    background: rgba(52, 152, 219, 0.1);
  }

  .option.correct {
    border-color: #2ecc71;
    background: rgba(46, 204, 113, 0.1);
  }

  .option.correct .option-letter {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
  }

  .option.incorrect {
    border-color: #e74c3c;
    background: rgba(231, 76, 60, 0.1);
  }

  .option.incorrect .option-letter {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
  }

  .option-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2em;
    flex-shrink: 0;
  }

  .answer-summary {
    margin-top: 15px;
    padding: 12px;
    background: rgba(0, 153, 255, 0.05);
    border-left: 3px solid #0099ff;
    border-radius: 5px;
    font-size: 0.9em;
  }

  .answer-label {
    color: #aaa;
    margin-bottom: 5px;
  }

  .your-answer {
    color: #3498db;
    font-weight: 600;
  }

  .correct-answer {
    color: #2ecc71;
    font-weight: 600;
  }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #aaa;
  }

  .empty-state-icon {
    font-size: 3em;
    margin-bottom: 20px;
  }

  .action-buttons {
    display: flex;
    gap: 15px;
    margin-top: 40px;
    justify-content: center;
  }

  .btn {
    padding: 12px 25px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1em;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background: linear-gradient(135deg, #0099ff, #00d4ff);
    color: #000;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 153, 255, 0.4);
  }

  .btn-secondary {
    background: rgba(0, 153, 255, 0.2);
    color: #00d4ff;
    border: 1px solid #0099ff;
  }

  .btn-secondary:hover {
    background: rgba(0, 153, 255, 0.3);
  }
`,tx=n=>String.fromCharCode(65+n);function C5(){var f,p;const n=Xi(),{attemptId:t}=zy(),[e,i]=N.useState(null),[s,r]=N.useState(null),[o,l]=N.useState(!0);N.useEffect(()=>{c()},[t]);const c=()=>{l(!0);const x=JSON.parse(localStorage.getItem("quizzes")||"[]"),y=JSON.parse(localStorage.getItem("results")||"[]"),A=sessionStorage.getItem("userName");let g=null;const w=parseInt(t);if(isNaN(w)||(g=y.filter(E=>E.user===A)[w]),!g&&t&&(g=y.find(b=>b.id===t)),g){i(g);const b=x.find(E=>E.quizId===g.quizId);r(b)}l(!1)};if(o)return m.jsxs("div",{className:"review-container",children:[m.jsx("style",{children:Zv}),m.jsx("p",{style:{textAlign:"center",color:"#aaa"},children:"Loading..."})]});if(!e||!s)return m.jsxs("div",{className:"review-container",children:[m.jsx("style",{children:Zv}),m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state-icon",children:""}),m.jsx("h3",{children:"Attempt not found"}),m.jsx("p",{children:"This attempt could not be found."}),m.jsx("button",{className:"btn btn-primary",onClick:()=>n("/scoreboard"),children:"Back to Scoreboard"})]})]});const u=(e.score||0)/(e.totalPoints||100)*100,d=((f=e.answers)==null?void 0:f.filter(x=>x.isCorrect).length)||0,h=((p=s.questions)==null?void 0:p.length)||0;return m.jsxs("div",{className:"review-container",children:[m.jsx("style",{children:Zv}),m.jsxs("div",{className:"review-wrapper",children:[m.jsxs("div",{className:"header-section",children:[m.jsx("h1",{children:" Review Attempt"}),m.jsx("button",{className:"back-button",onClick:()=>n("/scoreboard"),children:" Back to Scoreboard"})]}),m.jsxs(J.div,{className:"score-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[m.jsxs("div",{className:"score-item",children:[m.jsx("div",{className:"score-icon",children:""}),m.jsx("div",{className:"score-label",children:"Your Score"}),m.jsxs("div",{className:"score-value",children:[e.score||0,"/",e.totalPoints||100]})]}),m.jsxs("div",{className:"score-item",children:[m.jsx("div",{className:"score-icon",children:""}),m.jsx("div",{className:"score-label",children:"Percentage"}),m.jsxs("div",{className:`percentage-value ${u>=80?"percentage-good":u>=60?"percentage-fair":"percentage-poor"}`,children:[u.toFixed(2),"%"]})]}),m.jsxs("div",{className:"score-item",children:[m.jsx("div",{className:"score-icon",children:""}),m.jsx("div",{className:"score-label",children:"Correct Answers"}),m.jsxs("div",{className:"score-value",children:[d,"/",h]})]}),m.jsxs("div",{className:"score-item",children:[m.jsx("div",{className:"score-icon",children:""}),m.jsx("div",{className:"score-label",children:"Time Taken"}),m.jsx("div",{className:"score-value",children:e.timeTaken>0?`${Math.floor(e.timeTaken/60)}m ${e.timeTaken%60}s`:"N/A"})]})]}),m.jsxs("div",{className:"quiz-info",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:" Quiz Title"}),m.jsx("span",{className:"info-value",children:s.title})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:" Total Questions"}),m.jsx("span",{className:"info-value",children:h})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:" Total Points"}),m.jsx("span",{className:"info-value",children:e.totalPoints||100})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:" Submitted On"}),m.jsx("span",{className:"info-value",children:new Date(e.date||e.submittedAt||Date.now()).toLocaleDateString()})]})]}),m.jsxs("div",{className:"questions-section",children:[m.jsx("h2",{children:" Question Review"}),s.questions&&s.questions.map((x,y)=>{var b;const A=(b=e.answers)==null?void 0:b[y],g=A==null?void 0:A.isCorrect,w=A==null?void 0:A.selectedAnswer;return m.jsxs(J.div,{className:`question-card ${g?"correct":"incorrect"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},children:[m.jsxs("div",{className:"question-header",children:[m.jsx("div",{className:"question-number",children:y+1}),m.jsxs("div",{className:"question-title",children:[m.jsx("div",{className:"question-text",children:x.questionText}),m.jsxs("div",{className:"question-points",children:[x.points||1," point",(x.points||1)!==1?"s":""]})]}),m.jsx("div",{className:`question-status ${g?"correct":"incorrect"}`,children:g?" Correct":" Incorrect"})]}),m.jsx("div",{className:"options-section",children:x.options&&x.options.map((E,T)=>{const P=T===x.correctAnswer,k=T===w;let _="";return k&&P?_="selected correct":k&&!P?_="selected incorrect":P&&(_="correct"),m.jsxs("div",{className:`option ${_}`,children:[m.jsx("div",{className:"option-letter",children:tx(T)}),m.jsx("div",{className:"option-text",children:E}),k&&!P&&m.jsx("div",{className:"option-icon",children:""}),P&&m.jsx("div",{className:"option-icon",children:""})]},T)})}),m.jsxs("div",{className:"answer-summary",children:[m.jsx("div",{className:"answer-label",children:"Your Answer:"}),m.jsx("div",{className:"your-answer",children:w!==void 0?`${tx(w)}) ${x.options[w]}`:"Not answered"}),m.jsx("div",{className:"answer-label",style:{marginTop:"10px"},children:"Correct Answer:"}),m.jsx("div",{className:"correct-answer",children:`${tx(x.correctAnswer)}) ${x.options[x.correctAnswer]}`})]})]},y)})]}),m.jsxs("div",{className:"action-buttons",children:[m.jsx("button",{className:"btn btn-primary",onClick:()=>n("/scoreboard"),children:"Back to Scoreboard"}),m.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/dashboard"),children:"Back to Dashboard"})]})]})]})}function E5(){const[n,t]=N.useState("student"),[e,i]=N.useState(""),[s,r]=N.useState(""),[o,l]=N.useState(""),c=Xi(),u={id:"1",password:"1"},d=()=>{if(n==="teacher")e===u.id&&s===u.password?(l("TEACHER Login Successful!"),sessionStorage.setItem("role","teacher"),sessionStorage.setItem("userName",e),setTimeout(()=>c("/dashboard"),1500)):l("Invalid Teacher Credentials!");else{const h=JSON.parse(localStorage.getItem("students")||"[]"),f=h.find(p=>p.id===e&&p.password===s);f?(l("STUDENT Login Successful!"),sessionStorage.setItem("role","student"),sessionStorage.setItem("userName",e),sessionStorage.setItem("studentName",f.name),setTimeout(()=>c("/dashboard"),1500)):h.length===0?l(" No students created yet! Ask your teacher to create your account."):l(" Invalid Student ID or Password!")}};return m.jsxs("div",{className:"container",children:[m.jsx("div",{className:"floating-icons",children:"    "}),m.jsxs("div",{className:"left-panel",children:[m.jsx("img",{src:n==="teacher"?"https://cdn-icons-png.flaticon.com/512/3135/3135768.png":"https://cdn-icons-png.flaticon.com/512/3135/3135755.png",alt:"study"}),m.jsx("h2",{children:n==="teacher"?"Teacher Portal":"Student Portal"})]}),m.jsxs(J.div,{className:"right-panel",initial:{x:200,opacity:0},animate:{x:0,opacity:1},transition:{duration:.6},children:[m.jsxs("div",{className:"role-switch",children:[m.jsx("button",{className:n==="student"?"active":"",onClick:()=>{t("student"),l("")},children:"Student"}),m.jsx("button",{className:n==="teacher"?"active":"",onClick:()=>{t("teacher"),l("")},children:"Teacher"})]}),m.jsx("h3",{children:n==="teacher"?"Teacher Login":"Student Login"}),m.jsx("input",{type:"text",placeholder:"Enter ID",value:e,onChange:h=>i(h.target.value)}),m.jsx("input",{type:"password",placeholder:"Enter Password",value:s,onChange:h=>r(h.target.value)}),m.jsx(J.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,children:"Login"}),o&&m.jsx("p",{className:o.includes("Successful")?"success":"error",children:o}),n==="student"&&!o&&m.jsx("div",{style:{background:"rgba(0, 153, 255, 0.1)",border:"1px solid #0099ff",borderRadius:"8px",padding:"12px",marginTop:"15px",color:"#aaa",fontSize:"0.9em",textAlign:"center"},children:m.jsxs("p",{style:{margin:0},children:[" ",m.jsx("strong",{children:"Note:"})," Your teacher must create your account with an ID and password first."]})})]},n)]})}function T5(){const n=Xi(),t=sessionStorage.getItem("role"),e=sessionStorage.getItem("userName"),i=()=>{sessionStorage.removeItem("role"),sessionStorage.removeItem("userName"),n("/")};if(!t)return n("/"),null;const[s,r]=N.useState([]),o=I1(),l=s;N.useEffect(()=>{r(JSON.parse(localStorage.getItem("quizzes")||"[]"))},[o.key]),N.useEffect(()=>{const y=()=>r(JSON.parse(localStorage.getItem("quizzes")||"[]"));return window.addEventListener("storage",y),()=>window.removeEventListener("storage",y)},[]);const c=y=>{if(!y.published)return!1;const A=new Date;if(y.startTime){const g=new Date(y.startTime);if(A<g)return!1}if(y.endTime){const g=new Date(y.endTime);if(A>g)return!1}return!0},u=y=>y?new Date(y).toLocaleString():"Not set",d=y=>{const A=[...s];A[y]={...A[y],published:!A[y].published,status:A[y].published?"created":"published"},r(A),localStorage.setItem("quizzes",JSON.stringify(A))},h=y=>{const A=window.prompt("Enter start (YYYY-MM-DDTHH:MM) or leave blank",s[y].startTime||""),g=window.prompt("Enter end (YYYY-MM-DDTHH:MM) or leave blank",s[y].endTime||""),w=[...s];w[y]={...w[y],startTime:A||null,endTime:g||null},r(w),localStorage.setItem("quizzes",JSON.stringify(w))},f=y=>y==="created"?m.jsx("span",{style:{color:"#00ff99",fontWeight:"bold"},children:" Created"}):y==="cancelled"?m.jsx("span",{style:{color:"#ff6b6b",fontWeight:"bold"},children:" Cancelled"}):y,p={backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid #0099ff",borderRadius:"10px",padding:"20px",marginBottom:"15px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease"},x={padding:"8px 16px",marginRight:"10px",backgroundColor:"#0099ff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"0.9em",fontWeight:"600",transition:"all 0.3s ease"};return m.jsx("div",{className:"container",children:m.jsxs(J.div,{className:"dashboard",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{maxHeight:"100vh",overflowY:"auto",overflowX:"hidden",paddingRight:"15px"},children:[m.jsxs("div",{className:"dashboard-header",children:[m.jsxs("h1",{children:["Welcome, ",e,"! "]}),m.jsxs("p",{className:"role-badge",children:[t.toUpperCase()," Portal"]})]}),t==="student"?m.jsxs("div",{className:"student-dashboard",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",gap:"15px",flexWrap:"wrap"},children:[m.jsx("h2",{style:{margin:0},children:" Available Quizzes"}),m.jsxs("div",{style:{display:"flex",gap:"10px"},children:[m.jsx(J.button,{onClick:()=>n("/scoreboard"),style:{padding:"10px 20px",background:"linear-gradient(135deg, #9d00ff, #6f00cc)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"0.95em"},whileHover:{scale:1.05},whileTap:{scale:.95},children:" Scoreboard"}),m.jsx(J.button,{onClick:()=>n("/my-attempts"),style:{padding:"10px 20px",background:"linear-gradient(135deg, #0099ff, #00d4ff)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"0.95em"},whileHover:{scale:1.05},whileTap:{scale:.95},children:" My Attempts"})]})]}),m.jsx("div",{className:"quiz-cards",children:l.filter(c).length===0?m.jsx("p",{style:{fontSize:"1.1em",color:"#999",marginTop:"20px"},children:" No quizzes are currently available. Check back when a quiz is published and open."}):l.filter(c).map((y,A)=>m.jsxs(J.div,{className:"quiz-card",whileHover:{scale:1.03},whileTap:{scale:.98},children:[m.jsxs("h3",{children:[" ",y.subject]}),m.jsxs("p",{children:[y.timer," Minutes | Attempts: ",y.maxAttempts||1]}),m.jsxs("p",{style:{color:"#aaa",fontSize:"0.9em"},children:["Opens: ",u(y.startTime)," | Closes: ",u(y.endTime)]}),m.jsx("button",{onClick:()=>n(`/take-quiz/${A}`),children:"Start Quiz"})]},A))})]}):m.jsxs("div",{className:"teacher-dashboard",children:[m.jsx("h2",{children:"Manage Quizzes"}),m.jsxs("div",{className:"teacher-actions",children:[m.jsx(J.button,{className:"action-btn",onClick:()=>n("/create-quiz"),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Create New Quiz"}),m.jsx(J.button,{className:"action-btn",onClick:()=>n("/quiz-management"),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Quiz Management"}),m.jsx(J.button,{className:"action-btn",onClick:()=>n("/analytics"),whileHover:{scale:1.05},whileTap:{scale:.95},children:" View Analytics"}),m.jsx(J.button,{className:"action-btn",onClick:()=>n("/manage-students"),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Manage Students"})]}),m.jsx("h2",{style:{marginTop:"40px"},children:" All Quizzes"}),m.jsx("div",{className:"quiz-list",children:l.length===0?m.jsx("p",{children:"No quizzes created yet."}):l.map((y,A)=>{var g;return m.jsxs("div",{style:p,children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:"0 0 8px",color:"#00d4ff"},children:y.subject}),m.jsxs("p",{style:{margin:"5px 0",color:"#aaa",fontSize:"0.9em"},children:[m.jsx("strong",{children:"Quiz ID:"})," ",y.quizId]}),m.jsxs("p",{style:{margin:"5px 0",color:"#aaa",fontSize:"0.9em"},children:[m.jsx("strong",{children:"Status:"})," ",f(y.status||"created")]}),m.jsxs("p",{style:{margin:"5px 0",color:"#aaa",fontSize:"0.9em"},children:[m.jsx("strong",{children:"Timer:"})," ",y.timer," min | ",m.jsx("strong",{children:"Questions:"})," ",((g=y.questions)==null?void 0:g.length)||0,"/",y.numQuestions," | ",m.jsx("strong",{children:"Max Attempts:"})," ",y.maxAttempts||1]}),m.jsx("div",{style:{marginTop:"10px",background:"linear-gradient(135deg, #2ecc71, #27ae60)",padding:"8px 12px",borderRadius:"6px",display:"inline-block"},children:m.jsxs("p",{style:{margin:"0",color:"#000",fontSize:"0.85em",fontWeight:"bold"},children:[" Password: ",m.jsx("span",{style:{fontFamily:"monospace",letterSpacing:"1px"},children:y.password})]})})]}),m.jsx("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:m.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[m.jsx(J.button,{style:{...x,backgroundColor:y.published?"#2ecc71":"#9d00ff"},onClick:()=>d(A),whileHover:{scale:1.05},whileTap:{scale:.95},children:y.published?"Unpublish":"Publish"}),m.jsx(J.button,{style:{...x,backgroundColor:"#ffaa00"},onClick:()=>h(A),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Edit Schedule"}),y.status==="created"&&m.jsxs(m.Fragment,{children:[m.jsx(J.button,{style:{...x,backgroundColor:"#9d00ff"},onClick:()=>n(`/ai-generate/${A}`),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Generate questions using AI from PDF/Image",children:" AI Generate"}),m.jsx(J.button,{style:x,onClick:()=>n(`/add-questions/${A}`),whileHover:{scale:1.05},whileTap:{scale:.95},children:" Add Questions"})]}),m.jsx(J.button,{style:{...x,backgroundColor:"#666"},onClick:()=>{if(window.confirm(`Are you sure you want to delete "${y.subject}"? All student attempts will be cleared!`)){const w=l.filter((T,P)=>P!==A);r(w),localStorage.setItem("quizzes",JSON.stringify(w));const E=JSON.parse(localStorage.getItem("results")||"[]").filter(T=>T.quizId!==y.quizId);localStorage.setItem("results",JSON.stringify(E)),alert(` Quiz "${y.subject}" deleted and all attempts cleared!`)}},whileHover:{scale:1.05},whileTap:{scale:.95},children:" Delete"})]})})]},A)})})]}),m.jsx(J.button,{className:"logout-btn",onClick:i,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Logout"})]})})}function k5(){return m.jsx(nR,{children:m.jsxs(ZL,{children:[m.jsx(Un,{path:"/",element:m.jsx(E5,{})}),m.jsx(Un,{path:"/dashboard",element:m.jsx(T5,{})}),m.jsx(Un,{path:"/create-quiz",element:m.jsx(mO,{})}),m.jsx(Un,{path:"/add-questions/:index",element:m.jsx(yO,{})}),m.jsx(Un,{path:"/ai-generate/:index",element:m.jsx(m5,{})}),m.jsx(Un,{path:"/take-quiz/:index",element:m.jsx(g5,{})}),m.jsx(Un,{path:"/my-attempts",element:m.jsx(y5,{})}),m.jsx(Un,{path:"/analytics",element:m.jsx(v5,{})}),m.jsx(Un,{path:"/manage-students",element:m.jsx(x5,{})}),m.jsx(Un,{path:"/quiz-management",element:m.jsx(w5,{})}),m.jsx(Un,{path:"/scoreboard",element:m.jsx(A5,{})}),m.jsx(Un,{path:"/review-attempt/:attemptId",element:m.jsx(C5,{})})]})})}ex.createRoot(document.getElementById("root")).render(m.jsx(wy.StrictMode,{children:m.jsx(k5,{})}));
